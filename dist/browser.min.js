(()=>{var sn=Object.defineProperty;var on=(t,e)=>{for(var r in e)sn(t,r,{get:e[r],enumerable:!0})};var yt={};on(yt,{client:()=>et,formdata:()=>ei,metroError:()=>Be,request:()=>lt,response:()=>bt,trace:()=>ln,url:()=>Le});var at="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var _t=class t{#e={url:typeof window<"u"?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...e){for(let r of e)if(typeof r=="string"||r instanceof String)this.#e.url=""+r;else if(r instanceof t)Object.assign(this.#e,r.#e);else if(r instanceof Function)this.#r([r]);else if(r&&typeof r=="object")for(let i in r)i=="middlewares"?this.#r(r[i]):typeof r[i]=="function"?this.#e[i]=r[i](this.#e[i],this.#e):this.#e[i]=r[i];this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs);for(let r of this.#t)this[r]=async function(...i){return this.fetch(lt(this.#e,...i,{method:r.toUpperCase()}))};Object.freeze(this)}#r(e){typeof e=="function"&&(e=[e]);let r=e.findIndex(i=>typeof i!="function");if(r>=0)throw Be("metro.client: middlewares must be a function or an array of functions "+at+"client/invalid-middlewares/",e[r]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(e)}fetch(e,r){if(e=lt(e,r),!e.url)throw Be("metro.client."+e.method.toLowerCase()+": Missing url parameter "+at+"client/fetch-missing-url/",e);if(r||(r={}),typeof r!="object"||r instanceof String)throw Be("metro.client.fetch: Invalid options parameter "+at+"client/fetch-invalid-options/",r);let n=[async function(l){l[Symbol.metroProxy]&&(l=l[Symbol.metroSource]);let g=await fetch(l);return bt(g)}].concat(this.#e?.middlewares?.slice()||[]);r=Object.assign({},this.#e,r);let a;for(let u of n)a=function(l,g){return async function(h){let _,b=Object.values(t.tracers);for(let v of b)v.request&&v.request.call(v,h,g);_=await g(h,l);for(let v of b)v.response&&v.response.call(v,_,g);return _}}(a,u);return a(e)}with(...e){return new t(this,...e)}};function et(...t){return new _t(...t)}function an(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let i of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let n=t[i];if(!(typeof n>"u"||n==null))if(n?.[Symbol.metroProxy]&&(n=n[Symbol.metroSource]),typeof n=="function")r[i]=n(r[i],r);else if(i=="url")r.url=Le(r.url,n);else if(i=="headers"){r.headers=new Headers(e.headers),n instanceof Headers||(n=new Headers(t.headers));for(let[a,u]of n.entries())r.headers.set(a,u)}else r[i]=n}return t instanceof Request&&t.data&&(r.body=t.data),r}function lt(...t){let e={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let n of t)typeof n=="string"||n instanceof URL||n instanceof URLSearchParams?e.url=Le(e.url,n):n&&(n instanceof FormData||n instanceof ReadableStream||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView)?e.body=n:n&&typeof n=="object"&&Object.assign(e,an(n,e));let r=new Request(e.url,e),i=e.body;return i&&typeof i=="object"&&!(i instanceof String)&&!(i instanceof ReadableStream)&&!(i instanceof Blob)&&!(i instanceof ArrayBuffer)&&!(i instanceof DataView)&&!(i instanceof FormData)&&!(i instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(i instanceof TypedArray))&&typeof i.toString=="function"&&(e.body=i.toString({headers:r.headers}),r=new Request(e.url,e)),Object.freeze(r),new Proxy(r,{get(n,a,u){switch(a){case Symbol.metroSource:return n;case Symbol.metroProxy:return!0;case"with":return function(...l){return i&&l.unshift({body:i}),lt(n,...l)};case"data":return i}return n[a]instanceof Function?n[a].bind(n):n[a]}})}function Zr(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let i of["status","statusText","headers","body","url","type","redirected"]){let n=t[i];typeof n>"u"||n==null||(n?.[Symbol.metroProxy]&&(n=n[Symbol.metroSource]),typeof n=="function"?r[i]=n(r[i],r):i=="url"?r.url=new URL(n,r.url||"https://localhost/"):r[i]=n)}return t instanceof Response&&t.data&&(r.body=t.data),r}function bt(...t){let e={};for(let n of t)typeof n=="string"?e.body=n:n instanceof Response?Object.assign(e,Zr(n,e)):n&&typeof n=="object"&&(n instanceof FormData||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView||n instanceof ReadableStream||n instanceof URLSearchParams||n instanceof String||typeof TypedArray<"u"&&n instanceof TypedArray?e.body=n:Object.assign(e,Zr(n,e)));let r;e.body&&(r=e.body),[101,204,205,304].includes(e.status)&&(e.body=null);let i=new Response(e.body,e);return Object.freeze(i),new Proxy(i,{get(n,a,u){switch(a){case Symbol.metroProxy:return!0;case Symbol.metroSource:return n;case"with":return function(...l){return bt(n,...l)};case"data":return r;case"ok":return n.status>=200&&n.status<400}return typeof n[a]=="function"?n[a].bind(n):n[a]}})}function Xr(t,e){typeof e=="function"?e(t.searchParams,t):(e=new URLSearchParams(e),e.forEach((r,i)=>{t.searchParams.append(i,r)}))}function Le(...t){let e=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let i of t)if(typeof i=="string"||i instanceof String)r=new URL(i,r);else if(i instanceof URL||typeof Location<"u"&&i instanceof Location)r=new URL(i);else if(i instanceof URLSearchParams)Xr(r,i);else if(i&&typeof i=="object")for(let n in i)switch(n){case"search":typeof i.search=="function"?i.search(r.search,r):r.search=new URLSearchParams(i.search);break;case"searchParams":Xr(r,i.searchParams);break;default:if(!e.includes(n))throw Be("metro.url: unknown url parameter "+at+"url/unknown-param-name/",n);if(typeof i[n]=="function")i[n](r[n],r);else if(typeof i[n]=="string"||i[n]instanceof String||typeof i[n]=="number"||i[n]instanceof Number||typeof i[n]=="boolean"||i[n]instanceof Boolean)r[n]=""+i[n];else if(typeof i[n]=="object"&&i[n].toString)r[n]=i[n].toString();else throw Be("metro.url: unsupported value for "+n+" "+at+"url/unsupported-param-value/",t[n]);break}else throw Be("metro.url: unsupported option value "+at+"url/unsupported-option-value/",i);return Object.freeze(r),new Proxy(r,{get(i,n,a){switch(n){case Symbol.metroProxy:return!0;case Symbol.metroSource:return i;case"with":return function(...u){return Le(i,...u)};case"filename":return i.pathname.split("/").pop();case"folderpath":return i.pathname.substring(0,i.pathname.lastIndexOf("\\")+1)}return i[n]instanceof Function?i[n].bind(i):i[n]}})}function ei(...t){var e=new FormData;for(let r of t)if(r instanceof HTMLFormElement&&(r=new FormData(r)),r instanceof FormData)for(let i of r.entries())e.append(i[0],i[1]);else if(r&&typeof r=="object")for(let i of Object.entries(r))if(Array.isArray(i[1]))for(let n of i[1])e.append(i[0],n);else e.append(i[0],i[1]);else throw new Be("metro.formdata: unknown option type "+at+"formdata/unknown-option-value/",r);return Object.freeze(e),new Proxy(e,{get:(r,i,n)=>{switch(i){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...a){return ei(r,...a)}}return r[i]instanceof Function?r[i].bind(r):r[i]}})}var Tt={error:(t,...e)=>{console.error("\u24C2\uFE0F  ",t,...e)},info:(t,...e)=>{console.info("\u24C2\uFE0F  ",t,...e)},group:t=>{console.group("\u24C2\uFE0F  "+t)},groupEnd:t=>{console.groupEnd("\u24C2\uFE0F  "+t)}};function Be(t,...e){return Tt.error(t,...e),new Error(t,...e)}var ln={add(t,e){_t.tracers[t]=e},delete(t){delete _t.tracers[t]},clear(){_t.tracers={}},group(){let t=0;return{request:(e,r)=>{t++,Tt.group(t),Tt.info(e?.url,e,r)},response:(e,r)=>{Tt.info(e?.body?e.body[Symbol.metroSource]:null,e,r),Tt.groupEnd(t),t--}}}};globalThis.assertEnabled=!1;function Me(t,e){if(globalThis.assertEnabled){let r=We(t,e);if(r)throw console.error("\u{1F170}\uFE0F  Assertions failed because of:",r,"in this source:",t),new Error("Assertions failed",{cause:{problems:r,source:t}})}}function ce(t){return function(r,i,n){if(typeof r<"u"&&r!=null&&typeof t<"u")return We(r,t,i,n)}}function Ie(t){return function(r,i,n){return r==null||typeof r>"u"?Ne("data is required",r,t||"any value",n):typeof t<"u"?We(r,t,i,n):!1}}function jt(t){return function(r,i,n){return r==null||typeof r>"u"?(console.warn("data does not contain recommended value",r,t,n),!1):We(r,t,i,n)}}function Fe(...t){return function(r,i,n){for(let a of t)if(!We(r,a,i,n))return!1;return Ne("data does not match oneOf patterns",r,t,n)}}function gt(...t){return function(r,i,n){if(!Array.isArray(r))return Ne("data is not an array",r,"anyOf",n);for(let a of r)if(Fe(...t)(a))return Ne("data does not match anyOf patterns",a,t,n);return!1}}function ti(...t){return function(r,i,n){let a=[];for(let u of t)a=a.concat(We(r,u,i,n));if(a=a.filter(Boolean),a.length)return Ne("data does not match all given patterns",r,t,n,a)}}function xe(t,e,r){try{t instanceof URL&&(t=t.href);let i=new URL(t);if(i.href!=t&&!(i.href+"/"==t||i.href==t+"/"))return Ne("data is not a valid url",t,"validURL",r)}catch{return Ne("data is not a valid url",t,"validURL",r)}}function ri(t,e,r){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return Ne("data is not a valid email",t,"validEmail",r)}function mt(t){return function(r,i,n){if(!(r instanceof t))return Ne("data is not an instanceof pattern",r,t,n)}}function Nt(t){return function(r,i,n){if(!We(r,t,i,n))return Ne("data matches pattern, when required not to",r,t,n)}}function We(t,e,r,i=""){r||(r=t);let n=[];if(e===Boolean)typeof t!="boolean"&&!(t instanceof Boolean)&&n.push(Ne("data is not a boolean",t,e,i));else if(e===Number)typeof t!="number"&&!(t instanceof Number)&&n.push(Ne("data is not a number",t,e,i));else if(e===String)typeof t!="string"&&!(t instanceof String)&&n.push(Ne("data is not a string",t,e,i)),t==""&&n.push(Ne("data is an empty string, which is not allowed",t,e,i));else if(e instanceof RegExp)if(Array.isArray(t)){let a=t.findIndex((u,l)=>We(u,e,r,i+"["+l+"]"));a>-1&&n.push(Ne("data["+a+"] does not match pattern",t[a],e,i+"["+a+"]"))}else typeof t>"u"?n.push(Ne("data is undefined, should match pattern",t,e,i)):e.test(t)||n.push(Ne("data does not match pattern",t,e,i));else if(e instanceof Function){let a=e(t,r,i);a&&(Array.isArray(a)?n=n.concat(a):n.push(a))}else if(Array.isArray(e)){Array.isArray(t)||n.push(Ne("data is not an array",t,[],i));for(let a of e)for(let u of t.keys()){let l=We(t[u],a,r,i+"["+u+"]");Array.isArray(l)?n=n.concat(l):l&&n.push(l)}}else if(e&&typeof e=="object")if(Array.isArray(t)){let a=t.findIndex((u,l)=>We(u,e,r,i+"["+l+"]"));a>-1&&n.push(Ne("data["+a+"] does not match pattern",t[a],e,i+"["+a+"]"))}else if(!t||typeof t!="object")n.push(Ne("data is not an object, pattern is",t,e,i));else if(t instanceof URLSearchParams&&(t=Object.fromEntries(t)),e instanceof Function){let a=We(t,e,r,i);a&&(n=n.concat(a))}else for(let[a,u]of Object.entries(e)){let l=We(t[a],u,r,i+"."+a);l&&(n=n.concat(l))}else e!=t&&n.push(Ne("data and pattern are not equal",t,e,i));return n.length?n:!1}function Ne(t,e,r,i,n){let a={message:t,found:e,expected:r,path:i};return n&&(a.problems=n),a}function cr(t){let e,r;if(typeof localStorage<"u")e={get:()=>localStorage.getItem("metro/state:"+t),set:i=>localStorage.setItem("metro/state:"+t,i),has:()=>localStorage.getItem("metro/state:"+t)!==null},r={get:i=>JSON.parse(localStorage.getItem(t+":"+i)),set:(i,n)=>localStorage.setItem(t+":"+i,JSON.stringify(n)),has:i=>localStorage.getItem(t+":"+i)!==null};else{let i=new Map;e={get:()=>i.get("metro/state:"+t),set:n=>i.set("metro/state:"+t,n),has:()=>i.has("metro/state:"+t)},r=new Map}return{state:e,tokens:r}}function dr(t){let e={client:et(),force_authorization:!1,site:"default",oauth2_configuration:{authorization_endpoint:"/authorize",token_endpoint:"/token",redirect_uri:globalThis.document?.location.href,grant_type:"authorization_code",code_verifier:un(64)},authorize_callback:async _=>(window.location.href!=_.href&&window.location.replace(_.href),!1)};Me(t,{});let r=Object.assign({},e.oauth2_configuration,t?.oauth2_configuration);t=Object.assign({},e,t),t.oauth2_configuration=r;let i=cr(t.site);t.tokens||(t.tokens=i.tokens),t.state||(t.state=i.state),Me(t,{oauth2_configuration:{client_id:Ie(/.+/),grant_type:"authorization_code",authorization_endpoint:Ie(xe),token_endpoint:Ie(xe),redirect_uri:Ie(xe)}});for(let _ in r)switch(_){case"access_token":case"authorization_code":case"refresh_token":t.tokens.set(_,r[_]);break}return async function(_,b){if(t.force_authorization)return n(_,b);let v;try{if(v=await b(_),v.ok)return v}catch(S){switch(v.status){case 400:case 401:return n(_,b)}throw S}if(!v.ok)switch(v.status){case 400:case 401:return n(_,b)}return v};async function n(_,b){a();let v=t.tokens.get("access_token");if(v)if(ni(v)){try{if(!await l())return bt("false")}catch(S){throw S}return n(_,b)}else return _=lt(_,{headers:{Authorization:v.type+" "+v.value}}),b(_);else{try{if(!await u())return bt("false")}catch(S){throw S}return n(_,b)}}function a(){if(typeof window<"u"&&window?.location){let _=Le(window.location),b,v,S;if(_.searchParams.has("code"))S=_.searchParams,_=_.with({search:""}),history.pushState({},"",_.href);else if(_.hash){let A=_.hash.substr(1);S=new URLSearchParams("?"+A),_=_.with({hash:""}),history.pushState({},"",_.href)}if(S){b=S.get("code"),v=S.get("state");let A=t.state.get("metro/state");if(!v||v!==A)return;b&&t.tokens.set("authorization_code",b)}}}async function u(){if(r.grant_type==="authorization_code"&&!t.tokens.has("authorization_code")){let S=await g();if(!t.authorize_callback||typeof t.authorize_callback!="function")throw Be("oauth2mw: oauth2 with grant_type:authorization_code requires a callback function in client options.authorize_callback");let A=await t.authorize_callback(S);if(A)t.tokens.set("authorization_code",A);else return!1}let _=h(),b=await t.client.post(_);if(!b.ok){let S=await b.text();throw Be("OAuth2mw: fetch access_token: "+b.status+": "+b.statusText,{cause:_})}let v=await b.json();if(t.tokens.set("access_token",{value:v.access_token,expires:ii(v.expires_in),type:v.token_type,scope:v.scope}),v.refresh_token){let S={value:v.refresh_token};t.tokens.set("refresh_token",S)}return v}async function l(){let _=h("refresh_token"),b=await t.client.post(_);if(!b.ok)throw Be("OAuth2mw: refresh access_token: "+b.status+": "+b.statusText,{cause:_});let v=await b.json();if(t.tokens.set("access_token",{value:v.access_token,expires:ii(v.expires_in),type:v.token_type,scope:v.scope}),v.refresh_token){let S={value:v.refresh_token};t.tokens.set("refresh_token",S)}else return!1;return v}async function g(){if(!r.authorization_endpoint)throw Be("oauth2mw: Missing options.oauth2_configuration.authorization_endpoint");let _=Le(r.authorization_endpoint,{hash:""});Me(r,{client_id:/.+/,redirect_uri:/.+/,scope:/.*/});let b={response_type:"code",client_id:r.client_id,redirect_uri:r.redirect_uri,state:r.state||dn(40)};return r.response_type&&(b.response_type=r.response_type),r.response_mode&&(b.response_mode=r.response_mode),t.state.set(b.state),r.code_verifier&&(t.tokens.set("code_verifier",r.code_verifier),b.code_challenge=await fn(r.code_verifier),b.code_challenge_method="S256"),r.client_secret&&(b.client_secret=r.client_secret),r.scope&&(b.scope=r.scope),r.prompt&&(b.prompt=r.prompt),Le(_,{search:b})}function h(_=null){if(Me(r,{client_id:/.+/,redirect_uri:/.+/}),!r.token_endpoint)throw Be("oauth2mw: Missing options.endpoints.token url");let b=Le(r.token_endpoint,{hash:""}),v={grant_type:_||r.grant_type,client_id:r.client_id},S=t.tokens.get("code_verifier");switch(S&&(v.code_verifier=S),r.client_secret&&(v.client_secret=r.client_secret),r.scope&&(v.scope=r.scope),r.grant_type){case"authorization_code":v.redirect_uri=r.redirect_uri,v.code=t.tokens.get("authorization_code");break;case"client_credentials":break;case"refresh_token":v.refresh_token=r.refresh_token;break;default:throw new Error("Unknown grant_type: ".oauth2.grant_type)}return lt(b,{method:"POST",body:new URLSearchParams(v)})}}function ni(t){if(!t)return!0;let e=new Date(t.expires);return new Date().getTime()>e.getTime()}function ii(t){if(t instanceof Date)return new Date(t.getTime());if(typeof t=="number"){let e=new Date;return e.setSeconds(e.getSeconds()+t),e}throw new TypeError("Unknown expires type "+t)}function un(t=64){t=Math.min(43,Math.max(128,t));let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(t);return globalThis.crypto.getRandomValues(r),Array.from(r).map(n=>e[n%e.length]).join("")}async function fn(t){let r=new TextEncoder().encode(t),i=await globalThis.crypto.subtle.digest("SHA-256",r);return cn(i)}function cn(t){let e=Array.from(new Uint8Array(t),r=>String.fromCharCode(r)).join("");return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function dn(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",i=0;for(;i<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),i++;return r}function si(t){typeof t=="string"&&(t=cr(t).tokens);let e=t.get("access_token");return!!(e&&!ni(e)||t.get("refresh_token"))}function ut(t){return t=Object.assign({mimetype:"application/json",reviver:null,replacer:null,space:""},t),async(e,r)=>{hr(e.headers.get("Accept"))||(e=e.with({headers:{Accept:t.mimetype}})),["POST","PUT","PATCH","QUERY"].includes(e.method)&&e.data&&typeof e.data=="object"&&!(e.data instanceof ReadableStream)&&(hr(e.headers.get("content-type"))||(e=e.with({headers:{"Content-Type":t.mimetype}})),e=e.with({body:JSON.stringify(e.data,t.replacer,t.space)}));let i=await r(e);if(hr(i.headers.get("content-type"))){let a=await i.clone().text();try{let u=JSON.parse(a,t.reviver);return i.with({body:u})}catch{}}return i}}var pn=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function hr(t){return pn.exec(t)}function ft(t){return async(e,r)=>{let i=await r(e);if(!i.ok)if(t&&typeof t[i.status]=="function")i=t[i.status].apply(i,e);else throw new Error(i.status+": "+i.statusText,{cause:i});return i}}var oi=Object.assign({},yt,{mw:{jsonmw:ut,thrower:ft}});globalThis.metro||(globalThis.metro=oi);var ze=oi;var _n=new TextEncoder,bn=new TextDecoder;function Qt(t){return typeof t=="string"?_n.encode(t):bn.decode(t)}function ai(t){if(typeof t.modulusLength!="number"||t.modulusLength<2048)throw new pr(`${t.name} modulusLength must be at least 2048 bits`)}function yn(t){switch(t.algorithm.name){case"ECDSA":return{name:t.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return ai(t.algorithm),{name:t.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return ai(t.algorithm),{name:t.algorithm.name};case"Ed25519":return{name:t.algorithm.name}}throw new tt}async function gn(t,e,r){if(r.usages.includes("sign")===!1)throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');let i=`${Pt(Qt(JSON.stringify(t)))}.${Pt(Qt(JSON.stringify(e)))}`,n=Pt(await crypto.subtle.sign(yn(r),r,Qt(i)));return`${i}.${n}`}var li=32768;function mn(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=[];for(let r=0;r<t.byteLength;r+=li)e.push(String.fromCharCode.apply(null,t.subarray(r,r+li)));return btoa(e.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pt(t){return mn(t)}function wn(){return Pt(crypto.getRandomValues(new Uint8Array(32)))}var tt=class extends Error{constructor(e){super(e??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},pr=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};function vn(t){switch(t.algorithm.hash.name){case"SHA-256":return"PS256";default:throw new tt("unsupported RsaHashedKeyAlgorithm hash name")}}function Sn(t){switch(t.algorithm.hash.name){case"SHA-256":return"RS256";default:throw new tt("unsupported RsaHashedKeyAlgorithm hash name")}}function xn(t){switch(t.algorithm.namedCurve){case"P-256":return"ES256";default:throw new tt("unsupported EcKeyAlgorithm namedCurve")}}function En(t){switch(t.algorithm.name){case"RSA-PSS":return vn(t);case"RSASSA-PKCS1-v1_5":return Sn(t);case"ECDSA":return xn(t);case"Ed25519":return"EdDSA";default:throw new tt("unsupported CryptoKey algorithm name")}}function ui(t){return t instanceof CryptoKey}function Rn(t){return ui(t)&&t.type==="private"}function An(t){return ui(t)&&t.type==="public"}function In(){return Math.floor(Date.now()/1e3)}async function Vt(t,e,r,i,n,a){let u=t?.privateKey,l=t?.publicKey;if(!Rn(u))throw new TypeError('"keypair.privateKey" must be a private CryptoKey');if(!An(l))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(l.extractable!==!0)throw new TypeError('"keypair.publicKey.extractable" must be true');if(typeof e!="string")throw new TypeError('"htu" must be a string');if(typeof r!="string")throw new TypeError('"htm" must be a string');if(i!==void 0&&typeof i!="string")throw new TypeError('"nonce" must be a string or undefined');if(n!==void 0&&typeof n!="string")throw new TypeError('"accessToken" must be a string or undefined');if(a!==void 0&&(typeof a!="object"||a===null||Array.isArray(a)))throw new TypeError('"additional" must be an object');return gn({alg:En(u),typ:"dpop+jwt",jwk:await Tn(l)},{...a,iat:In(),jti:wn(),htm:r,nonce:i,htu:e,ath:n?Pt(await crypto.subtle.digest("SHA-256",Qt(n))):void 0},u)}async function Tn(t){let{kty:e,e:r,n:i,x:n,y:a,crv:u}=await crypto.subtle.exportKey("jwk",t);return{kty:e,crv:u,e:r,n:i,x:n,y:a}}async function fi(t,e){let r;if(typeof t!="string"||t.length===0)throw new TypeError('"alg" must be a non-empty string');switch(t){case"PS256":r={name:"RSA-PSS",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"RS256":r={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"};break;case"EdDSA":r={name:"Ed25519"};break;default:throw new tt}return crypto.subtle.generateKey(r,e?.extractable??!1,["sign","verify"])}function _r(){return new Promise((t,e)=>{let r=globalThis.indexedDB.open("metro",1);r.onupgradeneeded=()=>r.result.createObjectStore("keyPairs",{keyPath:"domain"}),r.onerror=i=>{e(i)},r.onsuccess=i=>{let n=i.target.result;t({set:function(a,u){return new Promise((l,g)=>{let h=n.transaction("keyPairs","readwrite",{durability:"strict"}),_=h.objectStore("keyPairs");h.oncomplete=()=>{l()},h.onerror=g,_.put(a,u)})},get:function(a){return new Promise((u,l)=>{let g=n.transaction("keyPairs","readonly"),_=g.objectStore("keyPairs").get(a);_.onsuccess=()=>{u(_.result)},_.onerror=l,g.onerror=l})},clear:function(){return new Promise((a,u)=>{let l=n.transaction("keyPairs","readwrite"),h=l.objectStore("keyPairs").clear();h.onsuccess=()=>{a()},h.onerror=u,l.onerror=u})}})}})}function br(t){return Me(t,{site:Ie(xe),authorization_endpoint:Ie(xe),token_endpoint:Ie(xe),dpop_signing_alg_values_supported:ce([])}),async(e,r)=>{let i=await _r(),n=await i.get(t.site);if(!n){let l=await fi("ES256");n={domain:t.site,keyPair:l},await i.set(n)}let a=ze.url(e.url);if(e.url.startsWith(t.authorization_endpoint)){let l=e.body;l instanceof URLSearchParams||l instanceof FormData?l.set("dpop_jkt",n.keyPair.publicKey):l.dpop_jkt=n.keyPair.publicKey}else if(e.url.startsWith(t.token_endpoint)){let l=await Vt(n.keyPair,e.url,e.method);e=e.with({headers:{DPoP:l}})}else if(e.headers.has("Authorization")){let l=localStorage.getItem(a.host+":nonce")||void 0,g=e.headers.get("Authorization").split(" ")[1],h=await Vt(n.keyPair,e.url,e.method,l,g);e=e.with({headers:{Authorization:"DPoP "+g,DPoP:h}})}let u=await r(e);return u.headers.get("DPoP-Nonce")&&localStorage.setItem(a.host+":nonce",u.headers.get("DPoP-Nonce")),u}}var kt=(...t)=>(e,r)=>t.filter(i=>r.hasOwnKey(i)).length>0?!1:Ne("root data must have all of",r,t),rt=(...t)=>e=>Array.isArray(e)&&t.filter(r=>!e.includes(r)).length==0?!1:Ne("data must be an array which includes",e,t);var qe=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],Kt=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"];async function yr(t={}){Me(t,{client:ce(mt(ze.client().constructor)),issuer:Ie(xe)});let e={client:ze.client().with(ft()).with(ut()),requireDynamicRegistration:!1};t=Object.assign({},e,t);let r=!1;function i(g){return r}let n={issuer:Ie(ti(t.issuer,i)),authorization_endpoint:Ie(xe),token_endpoint:Ie(xe),userinfo_endpoint:jt(xe),jwks_uri:Ie(xe),registration_endpoint:t.requireDynamicRegistration?Ie(xe):jt(xe),scopes_supported:jt(rt("openid")),response_types_supported:t.requireDynamicRegistration?Ie(rt("code","id_token","id_token token")):Ie([]),response_modes_supported:ce([]),grant_types_supported:t.requireDynamicRegistration?ce(rt("authorization_code")):ce([]),acr_values_supported:ce([]),subject_types_supported:Ie([]),id_token_signing_alg_values_supported:Ie(rt("RS256")),id_token_encryption_alg_values_supported:ce([]),id_token_encryption_enc_values_supported:ce([]),userinfo_signing_alg_values_supported:ce([]),userinfo_encryption_alg_values_supported:ce([]),userinfo_encryption_enc_values_supported:ce([]),request_object_signing_alg_values_supported:ce(rt("RS256")),request_object_encryption_alg_values_supported:ce([]),request_object_encryption_enc_values_supported:ce([]),token_endpoint_auth_methods_supported:ce(gt(...Kt)),token_endpoint_auth_signing_alg_values_supported:ce(rt("RS256"),Nt(rt("none"))),display_values_supported:ce(gt("page","popup","touch","wap")),claim_types_supported:ce(gt("normal","aggregated","distributed")),claims_supported:jt([]),service_documentation:ce(xe),claims_locales_supported:ce([]),ui_locales_supported:ce([]),claims_parameter_supported:ce(Boolean),request_parameter_supported:ce(Boolean),request_uri_parameter_supported:ce(Boolean),op_policy_uri:ce(xe),op_tos_uri:ce(xe)},a=ze.url(t.issuer,".well-known/openid-configuration"),l=(await t.client.get(a)).data;return Me(l,n),Me(l.issuer,t.issuer),l}async function gr(t){let e={redirect_uris:Ie([xe]),response_types:ce([]),grant_types:ce(gt("authorization_code","refresh_token")),application_type:ce(Fe("native","web")),contacts:ce([ri]),client_name:ce(String),logo_uri:ce(xe),client_uri:ce(xe),policy_uri:ce(xe),tos_uri:ce(xe),jwks_uri:ce(xe,Nt(kt("jwks"))),jwks:ce(xe,Nt(kt("jwks_uri"))),sector_identifier_uri:ce(xe),subject_type:ce(String),id_token_signed_response_alg:ce(Fe(...qe)),id_token_encrypted_response_alg:ce(Fe(...qe)),id_token_encrypted_response_enc:ce(Fe(...qe),kt("id_token_encrypted_response_alg")),userinfo_signed_response_alg:ce(Fe(...qe)),userinfo_encrypted_response_alg:ce(Fe(...qe)),userinfo_encrypted_response_enc:ce(Fe(...qe),kt("userinfo_encrypted_response_alg")),request_object_signing_alg:ce(Fe(...qe)),request_object_encryption_alg:ce(Fe(...qe)),request_object_encryption_enc:ce(Fe(...qe)),token_endpoint_auth_method:ce(Fe(...Kt)),token_endpoint_auth_signing_alg:ce(Fe(...qe)),default_max_age:ce(Number),require_auth_time:ce(Boolean),default_acr_values:ce([String]),initiate_login_uri:ce([xe]),request_uris:ce([xe])};Me(t,{client:ce(mt(ze.client().constructor)),registration_endpoint:xe,client_info:e});let r={client:ze.client().with(ft()).with(ut())};t=Object.assign({},r,t);let i=await t.client.post(t.registration_endpoint,{body:t.client_info}),n=i.data;if(!n.client_id||!n.client_secret)throw ze.metroError("metro.oidc: Error: dynamic registration of client failed, no client_id or client_secret returned",i);return t.client_info=Object.assign(t.client_info,n),t.client_info}function mr(t){let e;if(typeof localStorage<"u")e={get:r=>JSON.parse(localStorage.getItem("metro/oidc:"+t+":"+r)),set:(r,i)=>localStorage.setItem("metro/oidc:"+t+":"+r,JSON.stringify(i)),has:r=>localStorage.getItem("metro/oidc:"+t+":"+r)!==null};else{let r=new Map;e={get:i=>JSON.parse(r.get("metro/oidc:"+t+":"+i)||null),set:(i,n)=>r.set("metro/oidc:"+t+":"+i,JSON.stringify(n)),has:i=>r.has("metro/oidc:"+t+":"+i)}}return e}function wr(t={}){let e={client:et(),force_authorization:!1,use_dpop:!0,authorize_callback:async r=>(window.location.href!=r.href&&window.location.replace(r.href),!1)};return t=Object.assign({},e,t),Me(t,{client:Ie(mt(et().constructor)),client_info:Ie(),issuer:Ie(xe),oauth2:ce({}),openid_configuration:ce()}),t.store||(t.store=mr(t.issuer)),!t.openid_configuration&&t.store.has("openid_configuration")&&(t.openid_configuration=t.store.get("openid_configuration")),!t.client_info.client_id&&t.store.has("client_info")&&(t.client_info=t.store.get("client_info")),async(r,i)=>{let n;if(!t.force_authorization){try{n=await i(r)}catch(h){if(n.status!=401&&n.status!=403)throw h}if(n.ok||n.status!=401&&n.status!=403)return n}if(t.openid_configuration||(t.openid_configuration=await yr({issuer:t.issuer}),t.store.set("openid_configuration",t.openid_configuration)),!t.client_info?.client_id){if(Me(t.client_info?.client_name,Ie()),!t.openid_configuration.registration_endpoint)throw Be("metro.oidcmw: Error: issuer "+t.issuer+" does not support dynamic client registration, but you haven't specified a client_id");t.client_info=await gr({registration_endpoint:t.openid_configuration.registration_endpoint,client_info:t.client_info}),t.store.set("client_info",t.client_info)}let a=t.scope||"openid",u=Object.assign({site:t.issuer,client:t.client,force_authorization:!0,authorize_callback:t.authorize_callback,oauth2_configuration:{client_id:t.client_info.client_id,client_secret:t.client_info.client_secret,grant_type:"authorization_code",response_type:"code",response_mode:"query",authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,scope:a,redirect_uri:t.client_info.redirect_uris[0]}}),l=async(h,_)=>{let b=await _(h);if(b.headers.get("content-type")?.startsWith("application/json")){let S=b.data?.id_token;if(!S){let A=b.clone();try{let F=await A.json();F&&F.id_token&&(S=F.id_token)}catch{}}S&&t.store.set("id_token",S)}return b},g=t.client.with(t.issuer).with(l);if(t.use_dpop){let h={site:t.issuer,authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,dpop_signing_alg_values_supported:t.openid_configuration.dpop_signing_alg_values_supported};g=g.with(br(h)),u.client=g}return g=g.with(dr(u)),n=await g.fetch(r),n}}var jn=Object.create,jr=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,gi=Object.getOwnPropertyNames,Pn=Object.getPrototypeOf,kn=Object.prototype.hasOwnProperty,Se=(t,e)=>function(){return e||(0,t[gi(t)[0]])((e={exports:{}}).exports,e),e.exports},Ln=(t,e)=>{for(var r in e)jr(t,r,{get:e[r],enumerable:!0})},On=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of gi(e))!kn.call(t,n)&&n!==r&&jr(t,n,{get:()=>e[n],enumerable:!(i=Nn(e,n))||i.enumerable});return t},Wt=(t,e,r)=>(r=t!=null?jn(Pn(t)):{},On(e||!t||!t.__esModule?jr(r,"default",{value:t,enumerable:!0}):r,t)),Bn=Se({"node_modules/base64-js/index.js"(t){"use strict";t.byteLength=g,t.toByteArray=_,t.fromByteArray=S;var e=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(a=0,u=n.length;a<u;++a)e[a]=n[a],r[n.charCodeAt(a)]=a;var a,u;r[45]=62,r[95]=63;function l(A){var F=A.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=A.indexOf("=");P===-1&&(P=F);var k=P===F?0:4-P%4;return[P,k]}function g(A){var F=l(A),P=F[0],k=F[1];return(P+k)*3/4-k}function h(A,F,P){return(F+P)*3/4-P}function _(A){var F,P=l(A),k=P[0],c=P[1],w=new i(h(A,k,c)),x=0,R=c>0?k-4:k,T;for(T=0;T<R;T+=4)F=r[A.charCodeAt(T)]<<18|r[A.charCodeAt(T+1)]<<12|r[A.charCodeAt(T+2)]<<6|r[A.charCodeAt(T+3)],w[x++]=F>>16&255,w[x++]=F>>8&255,w[x++]=F&255;return c===2&&(F=r[A.charCodeAt(T)]<<2|r[A.charCodeAt(T+1)]>>4,w[x++]=F&255),c===1&&(F=r[A.charCodeAt(T)]<<10|r[A.charCodeAt(T+1)]<<4|r[A.charCodeAt(T+2)]>>2,w[x++]=F>>8&255,w[x++]=F&255),w}function b(A){return e[A>>18&63]+e[A>>12&63]+e[A>>6&63]+e[A&63]}function v(A,F,P){for(var k,c=[],w=F;w<P;w+=3)k=(A[w]<<16&16711680)+(A[w+1]<<8&65280)+(A[w+2]&255),c.push(b(k));return c.join("")}function S(A){for(var F,P=A.length,k=P%3,c=[],w=16383,x=0,R=P-k;x<R;x+=w)c.push(v(A,x,x+w>R?R:x+w));return k===1?(F=A[P-1],c.push(e[F>>2]+e[F<<4&63]+"==")):k===2&&(F=(A[P-2]<<8)+A[P-1],c.push(e[F>>10]+e[F>>4&63]+e[F<<2&63]+"=")),c.join("")}}}),Mn=Se({"node_modules/ieee754/index.js"(t){t.read=function(e,r,i,n,a){var u,l,g=a*8-n-1,h=(1<<g)-1,_=h>>1,b=-7,v=i?a-1:0,S=i?-1:1,A=e[r+v];for(v+=S,u=A&(1<<-b)-1,A>>=-b,b+=g;b>0;u=u*256+e[r+v],v+=S,b-=8);for(l=u&(1<<-b)-1,u>>=-b,b+=n;b>0;l=l*256+e[r+v],v+=S,b-=8);if(u===0)u=1-_;else{if(u===h)return l?NaN:(A?-1:1)*(1/0);l=l+Math.pow(2,n),u=u-_}return(A?-1:1)*l*Math.pow(2,u-n)},t.write=function(e,r,i,n,a,u){var l,g,h,_=u*8-a-1,b=(1<<_)-1,v=b>>1,S=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:u-1,F=n?1:-1,P=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(g=isNaN(r)?1:0,l=b):(l=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+v>=1?r+=S/h:r+=S*Math.pow(2,1-v),r*h>=2&&(l++,h/=2),l+v>=b?(g=0,l=b):l+v>=1?(g=(r*h-1)*Math.pow(2,a),l=l+v):(g=r*Math.pow(2,v-1)*Math.pow(2,a),l=0));a>=8;e[i+A]=g&255,A+=F,g/=256,a-=8);for(l=l<<a|g,_+=a;_>0;e[i+A]=l&255,A+=F,l/=256,_-=8);e[i+A-F]|=P*128}}}),Ye=Se({"node_modules/buffer/index.js"(t){"use strict";var e=Bn(),r=Mn(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=c,t.INSPECT_MAX_BYTES=50;var n=2147483647;t.kMaxLength=n,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(f){if(f>n)throw new RangeError('The value "'+f+'" is invalid for option "size"');let s=new Uint8Array(f);return Object.setPrototypeOf(s,l.prototype),s}function l(f,s,o){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(f)}return g(f,s,o)}l.poolSize=8192;function g(f,s,o){if(typeof f=="string")return v(f,s);if(ArrayBuffer.isView(f))return A(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(W(f,ArrayBuffer)||f&&W(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(f,SharedArrayBuffer)||f&&W(f.buffer,SharedArrayBuffer)))return F(f,s,o);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let d=f.valueOf&&f.valueOf();if(d!=null&&d!==f)return l.from(d,s,o);let E=P(f);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return l.from(f[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}l.from=function(f,s,o){return g(f,s,o)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function h(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function _(f,s,o){return h(f),f<=0?u(f):s!==void 0?typeof o=="string"?u(f).fill(s,o):u(f).fill(s):u(f)}l.alloc=function(f,s,o){return _(f,s,o)};function b(f){return h(f),u(f<0?0:k(f)|0)}l.allocUnsafe=function(f){return b(f)},l.allocUnsafeSlow=function(f){return b(f)};function v(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let o=w(f,s)|0,d=u(o),E=d.write(f,s);return E!==o&&(d=d.slice(0,E)),d}function S(f){let s=f.length<0?0:k(f.length)|0,o=u(s);for(let d=0;d<s;d+=1)o[d]=f[d]&255;return o}function A(f){if(W(f,Uint8Array)){let s=new Uint8Array(f);return F(s.buffer,s.byteOffset,s.byteLength)}return S(f)}function F(f,s,o){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');let d;return s===void 0&&o===void 0?d=new Uint8Array(f):o===void 0?d=new Uint8Array(f,s):d=new Uint8Array(f,s,o),Object.setPrototypeOf(d,l.prototype),d}function P(f){if(l.isBuffer(f)){let s=k(f.length)|0,o=u(s);return o.length===0||f.copy(o,0,0,s),o}if(f.length!==void 0)return typeof f.length!="number"||se(f.length)?u(0):S(f);if(f.type==="Buffer"&&Array.isArray(f.data))return S(f.data)}function k(f){if(f>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return f|0}function c(f){return+f!=f&&(f=0),l.alloc(+f)}l.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==l.prototype},l.compare=function(s,o){if(W(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),W(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),!l.isBuffer(s)||!l.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;let d=s.length,E=o.length;for(let M=0,U=Math.min(d,E);M<U;++M)if(s[M]!==o[M]){d=s[M],E=o[M];break}return d<E?-1:E<d?1:0},l.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return l.alloc(0);let d;if(o===void 0)for(o=0,d=0;d<s.length;++d)o+=s[d].length;let E=l.allocUnsafe(o),M=0;for(d=0;d<s.length;++d){let U=s[d];if(W(U,Uint8Array))M+U.length>E.length?(l.isBuffer(U)||(U=l.from(U)),U.copy(E,M)):Uint8Array.prototype.set.call(E,U,M);else if(l.isBuffer(U))U.copy(E,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=U.length}return E};function w(f,s){if(l.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||W(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let o=f.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&o===0)return 0;let E=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return D(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Z(f).length;default:if(E)return d?-1:D(f).length;s=(""+s).toLowerCase(),E=!0}}l.byteLength=w;function x(f,s,o){let d=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return ve(this,s,o);case"utf8":case"utf-8":return K(this,s,o);case"ascii":return le(this,s,o);case"latin1":case"binary":return he(this,s,o);case"base64":return C(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,s,o);default:if(d)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),d=!0}}l.prototype._isBuffer=!0;function R(f,s,o){let d=f[s];f[s]=f[o],f[o]=d}l.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<s;o+=2)R(this,o,o+1);return this},l.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<s;o+=4)R(this,o,o+3),R(this,o+1,o+2);return this},l.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<s;o+=8)R(this,o,o+7),R(this,o+1,o+6),R(this,o+2,o+5),R(this,o+3,o+4);return this},l.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?K(this,0,s):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(s){if(!l.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:l.compare(this,s)===0},l.prototype.inspect=function(){let s="",o=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(s,o,d,E,M){if(W(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),!l.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),d===void 0&&(d=s?s.length:0),E===void 0&&(E=0),M===void 0&&(M=this.length),o<0||d>s.length||E<0||M>this.length)throw new RangeError("out of range index");if(E>=M&&o>=d)return 0;if(E>=M)return-1;if(o>=d)return 1;if(o>>>=0,d>>>=0,E>>>=0,M>>>=0,this===s)return 0;let U=M-E,ge=d-o,Te=Math.min(U,ge),Ae=this.slice(E,M),je=s.slice(o,d);for(let Re=0;Re<Te;++Re)if(Ae[Re]!==je[Re]){U=Ae[Re],ge=je[Re];break}return U<ge?-1:ge<U?1:0};function T(f,s,o,d,E){if(f.length===0)return-1;if(typeof o=="string"?(d=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,se(o)&&(o=E?0:f.length-1),o<0&&(o=f.length+o),o>=f.length){if(E)return-1;o=f.length-1}else if(o<0)if(E)o=0;else return-1;if(typeof s=="string"&&(s=l.from(s,d)),l.isBuffer(s))return s.length===0?-1:L(f,s,o,d,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(f,s,o):Uint8Array.prototype.lastIndexOf.call(f,s,o):L(f,[s],o,d,E);throw new TypeError("val must be string, number or Buffer")}function L(f,s,o,d,E){let M=1,U=f.length,ge=s.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(f.length<2||s.length<2)return-1;M=2,U/=2,ge/=2,o/=2}function Te(je,Re){return M===1?je[Re]:je.readUInt16BE(Re*M)}let Ae;if(E){let je=-1;for(Ae=o;Ae<U;Ae++)if(Te(f,Ae)===Te(s,je===-1?0:Ae-je)){if(je===-1&&(je=Ae),Ae-je+1===ge)return je*M}else je!==-1&&(Ae-=Ae-je),je=-1}else for(o+ge>U&&(o=U-ge),Ae=o;Ae>=0;Ae--){let je=!0;for(let Re=0;Re<ge;Re++)if(Te(f,Ae+Re)!==Te(s,Re)){je=!1;break}if(je)return Ae}return-1}l.prototype.includes=function(s,o,d){return this.indexOf(s,o,d)!==-1},l.prototype.indexOf=function(s,o,d){return T(this,s,o,d,!0)},l.prototype.lastIndexOf=function(s,o,d){return T(this,s,o,d,!1)};function G(f,s,o,d){o=Number(o)||0;let E=f.length-o;d?(d=Number(d),d>E&&(d=E)):d=E;let M=s.length;d>M/2&&(d=M/2);let U;for(U=0;U<d;++U){let ge=parseInt(s.substr(U*2,2),16);if(se(ge))return U;f[o+U]=ge}return U}function Y(f,s,o,d){return I(D(s,f.length-o),f,o,d)}function Q(f,s,o,d){return I(ee(s),f,o,d)}function pe(f,s,o,d){return I(Z(s),f,o,d)}function O(f,s,o,d){return I(X(s,f.length-o),f,o,d)}l.prototype.write=function(s,o,d,E){if(o===void 0)E="utf8",d=this.length,o=0;else if(d===void 0&&typeof o=="string")E=o,d=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(d)?(d=d>>>0,E===void 0&&(E="utf8")):(E=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-o;if((d===void 0||d>M)&&(d=M),s.length>0&&(d<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let U=!1;for(;;)switch(E){case"hex":return G(this,s,o,d);case"utf8":case"utf-8":return Y(this,s,o,d);case"ascii":case"latin1":case"binary":return Q(this,s,o,d);case"base64":return pe(this,s,o,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,s,o,d);default:if(U)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),U=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(f,s,o){return s===0&&o===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,o))}function K(f,s,o){o=Math.min(f.length,o);let d=[],E=s;for(;E<o;){let M=f[E],U=null,ge=M>239?4:M>223?3:M>191?2:1;if(E+ge<=o){let Te,Ae,je,Re;switch(ge){case 1:M<128&&(U=M);break;case 2:Te=f[E+1],(Te&192)===128&&(Re=(M&31)<<6|Te&63,Re>127&&(U=Re));break;case 3:Te=f[E+1],Ae=f[E+2],(Te&192)===128&&(Ae&192)===128&&(Re=(M&15)<<12|(Te&63)<<6|Ae&63,Re>2047&&(Re<55296||Re>57343)&&(U=Re));break;case 4:Te=f[E+1],Ae=f[E+2],je=f[E+3],(Te&192)===128&&(Ae&192)===128&&(je&192)===128&&(Re=(M&15)<<18|(Te&63)<<12|(Ae&63)<<6|je&63,Re>65535&&Re<1114112&&(U=Re))}}U===null?(U=65533,ge=1):U>65535&&(U-=65536,d.push(U>>>10&1023|55296),U=56320|U&1023),d.push(U),E+=ge}return oe(d)}var B=4096;function oe(f){let s=f.length;if(s<=B)return String.fromCharCode.apply(String,f);let o="",d=0;for(;d<s;)o+=String.fromCharCode.apply(String,f.slice(d,d+=B));return o}function le(f,s,o){let d="";o=Math.min(f.length,o);for(let E=s;E<o;++E)d+=String.fromCharCode(f[E]&127);return d}function he(f,s,o){let d="";o=Math.min(f.length,o);for(let E=s;E<o;++E)d+=String.fromCharCode(f[E]);return d}function ve(f,s,o){let d=f.length;(!s||s<0)&&(s=0),(!o||o<0||o>d)&&(o=d);let E="";for(let M=s;M<o;++M)E+=J[f[M]];return E}function z(f,s,o){let d=f.slice(s,o),E="";for(let M=0;M<d.length-1;M+=2)E+=String.fromCharCode(d[M]+d[M+1]*256);return E}l.prototype.slice=function(s,o){let d=this.length;s=~~s,o=o===void 0?d:~~o,s<0?(s+=d,s<0&&(s=0)):s>d&&(s=d),o<0?(o+=d,o<0&&(o=0)):o>d&&(o=d),o<s&&(o=s);let E=this.subarray(s,o);return Object.setPrototypeOf(E,l.prototype),E};function ie(f,s,o){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>o)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||ie(s,o,this.length);let E=this[s],M=1,U=0;for(;++U<o&&(M*=256);)E+=this[s+U]*M;return E},l.prototype.readUintBE=l.prototype.readUIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||ie(s,o,this.length);let E=this[s+--o],M=1;for(;o>0&&(M*=256);)E+=this[s+--o]*M;return E},l.prototype.readUint8=l.prototype.readUInt8=function(s,o){return s=s>>>0,o||ie(s,1,this.length),this[s]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||ie(s,2,this.length),this[s]|this[s+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||ie(s,2,this.length),this[s]<<8|this[s+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},l.prototype.readBigUInt64LE=fe(function(s){s=s>>>0,be(s,"offset");let o=this[s],d=this[s+7];(o===void 0||d===void 0)&&_e(s,this.length-8);let E=o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,M=this[++s]+this[++s]*2**8+this[++s]*2**16+d*2**24;return BigInt(E)+(BigInt(M)<<BigInt(32))}),l.prototype.readBigUInt64BE=fe(function(s){s=s>>>0,be(s,"offset");let o=this[s],d=this[s+7];(o===void 0||d===void 0)&&_e(s,this.length-8);let E=o*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],M=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d;return(BigInt(E)<<BigInt(32))+BigInt(M)}),l.prototype.readIntLE=function(s,o,d){s=s>>>0,o=o>>>0,d||ie(s,o,this.length);let E=this[s],M=1,U=0;for(;++U<o&&(M*=256);)E+=this[s+U]*M;return M*=128,E>=M&&(E-=Math.pow(2,8*o)),E},l.prototype.readIntBE=function(s,o,d){s=s>>>0,o=o>>>0,d||ie(s,o,this.length);let E=o,M=1,U=this[s+--E];for(;E>0&&(M*=256);)U+=this[s+--E]*M;return M*=128,U>=M&&(U-=Math.pow(2,8*o)),U},l.prototype.readInt8=function(s,o){return s=s>>>0,o||ie(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},l.prototype.readInt16LE=function(s,o){s=s>>>0,o||ie(s,2,this.length);let d=this[s]|this[s+1]<<8;return d&32768?d|4294901760:d},l.prototype.readInt16BE=function(s,o){s=s>>>0,o||ie(s,2,this.length);let d=this[s+1]|this[s]<<8;return d&32768?d|4294901760:d},l.prototype.readInt32LE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},l.prototype.readInt32BE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},l.prototype.readBigInt64LE=fe(function(s){s=s>>>0,be(s,"offset");let o=this[s],d=this[s+7];(o===void 0||d===void 0)&&_e(s,this.length-8);let E=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(d<<24);return(BigInt(E)<<BigInt(32))+BigInt(o+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),l.prototype.readBigInt64BE=fe(function(s){s=s>>>0,be(s,"offset");let o=this[s],d=this[s+7];(o===void 0||d===void 0)&&_e(s,this.length-8);let E=(o<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(E)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+d)}),l.prototype.readFloatLE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),r.read(this,s,!0,23,4)},l.prototype.readFloatBE=function(s,o){return s=s>>>0,o||ie(s,4,this.length),r.read(this,s,!1,23,4)},l.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||ie(s,8,this.length),r.read(this,s,!0,52,8)},l.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||ie(s,8,this.length),r.read(this,s,!1,52,8)};function m(f,s,o,d,E,M){if(!l.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<M)throw new RangeError('"value" argument is out of bounds');if(o+d>f.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(s,o,d,E){if(s=+s,o=o>>>0,d=d>>>0,!E){let ge=Math.pow(2,8*d)-1;m(this,s,o,d,ge,0)}let M=1,U=0;for(this[o]=s&255;++U<d&&(M*=256);)this[o+U]=s/M&255;return o+d},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(s,o,d,E){if(s=+s,o=o>>>0,d=d>>>0,!E){let ge=Math.pow(2,8*d)-1;m(this,s,o,d,ge,0)}let M=d-1,U=1;for(this[o+M]=s&255;--M>=0&&(U*=256);)this[o+M]=s/U&255;return o+d},l.prototype.writeUint8=l.prototype.writeUInt8=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,1,255,0),this[o]=s&255,o+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function V(f,s,o,d,E){ne(s,d,E,f,o,7);let M=Number(s&BigInt(4294967295));f[o++]=M,M=M>>8,f[o++]=M,M=M>>8,f[o++]=M,M=M>>8,f[o++]=M;let U=Number(s>>BigInt(32)&BigInt(4294967295));return f[o++]=U,U=U>>8,f[o++]=U,U=U>>8,f[o++]=U,U=U>>8,f[o++]=U,o}function ae(f,s,o,d,E){ne(s,d,E,f,o,7);let M=Number(s&BigInt(4294967295));f[o+7]=M,M=M>>8,f[o+6]=M,M=M>>8,f[o+5]=M,M=M>>8,f[o+4]=M;let U=Number(s>>BigInt(32)&BigInt(4294967295));return f[o+3]=U,U=U>>8,f[o+2]=U,U=U>>8,f[o+1]=U,U=U>>8,f[o]=U,o+8}l.prototype.writeBigUInt64LE=fe(function(s,o=0){return V(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=fe(function(s,o=0){return ae(this,s,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(s,o,d,E){if(s=+s,o=o>>>0,!E){let Te=Math.pow(2,8*d-1);m(this,s,o,d,Te-1,-Te)}let M=0,U=1,ge=0;for(this[o]=s&255;++M<d&&(U*=256);)s<0&&ge===0&&this[o+M-1]!==0&&(ge=1),this[o+M]=(s/U>>0)-ge&255;return o+d},l.prototype.writeIntBE=function(s,o,d,E){if(s=+s,o=o>>>0,!E){let Te=Math.pow(2,8*d-1);m(this,s,o,d,Te-1,-Te)}let M=d-1,U=1,ge=0;for(this[o+M]=s&255;--M>=0&&(U*=256);)s<0&&ge===0&&this[o+M+1]!==0&&(ge=1),this[o+M]=(s/U>>0)-ge&255;return o+d},l.prototype.writeInt8=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},l.prototype.writeInt16LE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},l.prototype.writeInt16BE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},l.prototype.writeInt32LE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},l.prototype.writeInt32BE=function(s,o,d){return s=+s,o=o>>>0,d||m(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},l.prototype.writeBigInt64LE=fe(function(s,o=0){return V(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=fe(function(s,o=0){return ae(this,s,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $(f,s,o,d,E,M){if(o+d>f.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function ue(f,s,o,d,E){return s=+s,o=o>>>0,E||$(f,s,o,4,34028234663852886e22,-34028234663852886e22),r.write(f,s,o,d,23,4),o+4}l.prototype.writeFloatLE=function(s,o,d){return ue(this,s,o,!0,d)},l.prototype.writeFloatBE=function(s,o,d){return ue(this,s,o,!1,d)};function ye(f,s,o,d,E){return s=+s,o=o>>>0,E||$(f,s,o,8,17976931348623157e292,-17976931348623157e292),r.write(f,s,o,d,52,8),o+8}l.prototype.writeDoubleLE=function(s,o,d){return ye(this,s,o,!0,d)},l.prototype.writeDoubleBE=function(s,o,d){return ye(this,s,o,!1,d)},l.prototype.copy=function(s,o,d,E){if(!l.isBuffer(s))throw new TypeError("argument should be a Buffer");if(d||(d=0),!E&&E!==0&&(E=this.length),o>=s.length&&(o=s.length),o||(o=0),E>0&&E<d&&(E=d),E===d||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),s.length-o<E-d&&(E=s.length-o+d);let M=E-d;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,d,E):Uint8Array.prototype.set.call(s,this.subarray(d,E),o),M},l.prototype.fill=function(s,o,d,E){if(typeof s=="string"){if(typeof o=="string"?(E=o,o=0,d=this.length):typeof d=="string"&&(E=d,d=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!l.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(s.length===1){let U=s.charCodeAt(0);(E==="utf8"&&U<128||E==="latin1")&&(s=U)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<d)throw new RangeError("Out of range index");if(d<=o)return this;o=o>>>0,d=d===void 0?this.length:d>>>0,s||(s=0);let M;if(typeof s=="number")for(M=o;M<d;++M)this[M]=s;else{let U=l.isBuffer(s)?s:l.from(s,E),ge=U.length;if(ge===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(M=0;M<d-o;++M)this[M+o]=U[M%ge]}return this};var we={};function me(f,s,o){we[f]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),me("ERR_OUT_OF_RANGE",function(f,s,o){let d=`The value of "${f}" is out of range.`,E=o;return Number.isInteger(o)&&Math.abs(o)>2**32?E=q(String(o)):typeof o=="bigint"&&(E=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(E=q(E)),E+="n"),d+=` It must be ${s}. Received ${E}`,d},RangeError);function q(f){let s="",o=f.length,d=f[0]==="-"?1:0;for(;o>=d+4;o-=3)s=`_${f.slice(o-3,o)}${s}`;return`${f.slice(0,o)}${s}`}function H(f,s,o){be(s,"offset"),(f[s]===void 0||f[s+o]===void 0)&&_e(s,f.length-(o+1))}function ne(f,s,o,d,E,M){if(f>o||f<s){let U=typeof s=="bigint"?"n":"",ge;throw M>3?s===0||s===BigInt(0)?ge=`>= 0${U} and < 2${U} ** ${(M+1)*8}${U}`:ge=`>= -(2${U} ** ${(M+1)*8-1}${U}) and < 2 ** ${(M+1)*8-1}${U}`:ge=`>= ${s}${U} and <= ${o}${U}`,new we.ERR_OUT_OF_RANGE("value",ge,f)}H(d,E,M)}function be(f,s){if(typeof f!="number")throw new we.ERR_INVALID_ARG_TYPE(s,"number",f)}function _e(f,s,o){throw Math.floor(f)!==f?(be(f,o),new we.ERR_OUT_OF_RANGE(o||"offset","an integer",f)):s<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${s}`,f)}var j=/[^+/0-9A-Za-z-_]/g;function N(f){if(f=f.split("=")[0],f=f.trim().replace(j,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function D(f,s){s=s||1/0;let o,d=f.length,E=null,M=[];for(let U=0;U<d;++U){if(o=f.charCodeAt(U),o>55295&&o<57344){if(!E){if(o>56319){(s-=3)>-1&&M.push(239,191,189);continue}else if(U+1===d){(s-=3)>-1&&M.push(239,191,189);continue}E=o;continue}if(o<56320){(s-=3)>-1&&M.push(239,191,189),E=o;continue}o=(E-55296<<10|o-56320)+65536}else E&&(s-=3)>-1&&M.push(239,191,189);if(E=null,o<128){if((s-=1)<0)break;M.push(o)}else if(o<2048){if((s-=2)<0)break;M.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;M.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;M.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return M}function ee(f){let s=[];for(let o=0;o<f.length;++o)s.push(f.charCodeAt(o)&255);return s}function X(f,s){let o,d,E,M=[];for(let U=0;U<f.length&&!((s-=2)<0);++U)o=f.charCodeAt(U),d=o>>8,E=o%256,M.push(E),M.push(d);return M}function Z(f){return e.toByteArray(N(f))}function I(f,s,o,d){let E;for(E=0;E<d&&!(E+o>=s.length||E>=f.length);++E)s[E+o]=f[E];return E}function W(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function se(f){return f!==f}var J=function(){let f="0123456789abcdef",s=new Array(256);for(let o=0;o<16;++o){let d=o*16;for(let E=0;E<16;++E)s[d+E]=f[o]+f[E]}return s}();function fe(f){return typeof BigInt>"u"?ke:f}function ke(){throw new Error("BigInt not supported")}}}),Cn=Se({"node_modules/queue-microtask/index.js"(t,e){var r;e.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):i=>(r||(r=Promise.resolve())).then(i).catch(n=>setTimeout(()=>{throw n},0))}}),Pe=Se({"node_modules/readable-stream/lib/ours/primordials.js"(t,e){"use strict";var r=class extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let n="";for(let a=0;a<i.length;a++)n+=`    ${i[a].stack}
`;super(n),this.name="AggregateError",this.errors=i}};e.exports={AggregateError:r,ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,n){return i.includes(n)},ArrayPrototypeIndexOf(i,n){return i.indexOf(n)},ArrayPrototypeJoin(i,n){return i.join(n)},ArrayPrototypeMap(i,n){return i.map(n)},ArrayPrototypePop(i,n){return i.pop(n)},ArrayPrototypePush(i,n){return i.push(n)},ArrayPrototypeSlice(i,n,a){return i.slice(n,a)},Error,FunctionPrototypeCall(i,n,...a){return i.call(n,...a)},FunctionPrototypeSymbolHasInstance(i,n){return Function.prototype[Symbol.hasInstance].call(i,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,n){return Object.defineProperties(i,n)},ObjectDefineProperty(i,n,a){return Object.defineProperty(i,n,a)},ObjectGetOwnPropertyDescriptor(i,n){return Object.getOwnPropertyDescriptor(i,n)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,n){return Object.setPrototypeOf(i,n)},Promise,PromisePrototypeCatch(i,n){return i.catch(n)},PromisePrototypeThen(i,n,a){return i.then(n,a)},PromiseReject(i){return Promise.reject(i)},PromiseResolve(i){return Promise.resolve(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,n){return i.test(n)},SafeSet:Set,String,StringPrototypeSlice(i,n,a){return i.slice(n,a)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(i,n,a){return i.set(n,a)},Boolean,Uint8Array}}}),mi=Se({"node_modules/readable-stream/lib/ours/util/inspect.js"(t,e){"use strict";e.exports={format(r,...i){return r.replace(/%([sdifj])/g,function(...[n,a]){let u=i.shift();return a==="f"?u.toFixed(6):a==="j"?JSON.stringify(u):a==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}}}),De=Se({"node_modules/readable-stream/lib/ours/errors.js"(t,e){"use strict";var{format:r,inspect:i}=mi(),{AggregateError:n}=Pe(),a=globalThis.AggregateError||n,u=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],g=/^([A-Z][a-z0-9]*)+$/,h="__node_internal_",_={};function b(c,w){if(!c)throw new _.ERR_INTERNAL_ASSERTION(w)}function v(c){let w="",x=c.length,R=c[0]==="-"?1:0;for(;x>=R+4;x-=3)w=`_${c.slice(x-3,x)}${w}`;return`${c.slice(0,x)}${w}`}function S(c,w,x){if(typeof w=="function")return b(w.length<=x.length,`Code: ${c}; The provided arguments length (${x.length}) does not match the required ones (${w.length}).`),w(...x);let R=(w.match(/%[dfijoOs]/g)||[]).length;return b(R===x.length,`Code: ${c}; The provided arguments length (${x.length}) does not match the required ones (${R}).`),x.length===0?w:r(w,...x)}function A(c,w,x){x||(x=Error);class R extends x{constructor(...L){super(S(c,w,L))}toString(){return`${this.name} [${c}]: ${this.message}`}}Object.defineProperties(R.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${c}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),R.prototype.code=c,R.prototype[u]=!0,_[c]=R}function F(c){let w=h+c.name;return Object.defineProperty(c,"name",{value:w}),c}function P(c,w){if(c&&w&&c!==w){if(Array.isArray(w.errors))return w.errors.push(c),w;let x=new a([w,c],w.message);return x.code=w.code,x}return c||w}var k=class extends Error{constructor(c="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new _.ERR_INVALID_ARG_TYPE("options","Object",w);super(c,w),this.code="ABORT_ERR",this.name="AbortError"}};A("ERR_ASSERTION","%s",Error),A("ERR_INVALID_ARG_TYPE",(c,w,x)=>{b(typeof c=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let R="The ";c.endsWith(" argument")?R+=`${c} `:R+=`"${c}" ${c.includes(".")?"property":"argument"} `,R+="must be ";let T=[],L=[],G=[];for(let Q of w)b(typeof Q=="string","All expected entries have to be of type string"),l.includes(Q)?T.push(Q.toLowerCase()):g.test(Q)?L.push(Q):(b(Q!=="object",'The value "object" should be written as "Object"'),G.push(Q));if(L.length>0){let Q=T.indexOf("object");Q!==-1&&(T.splice(T,Q,1),L.push("Object"))}if(T.length>0){switch(T.length){case 1:R+=`of type ${T[0]}`;break;case 2:R+=`one of type ${T[0]} or ${T[1]}`;break;default:{let Q=T.pop();R+=`one of type ${T.join(", ")}, or ${Q}`}}(L.length>0||G.length>0)&&(R+=" or ")}if(L.length>0){switch(L.length){case 1:R+=`an instance of ${L[0]}`;break;case 2:R+=`an instance of ${L[0]} or ${L[1]}`;break;default:{let Q=L.pop();R+=`an instance of ${L.join(", ")}, or ${Q}`}}G.length>0&&(R+=" or ")}switch(G.length){case 0:break;case 1:G[0].toLowerCase()!==G[0]&&(R+="an "),R+=`${G[0]}`;break;case 2:R+=`one of ${G[0]} or ${G[1]}`;break;default:{let Q=G.pop();R+=`one of ${G.join(", ")}, or ${Q}`}}if(x==null)R+=`. Received ${x}`;else if(typeof x=="function"&&x.name)R+=`. Received function ${x.name}`;else if(typeof x=="object"){var Y;if((Y=x.constructor)!==null&&Y!==void 0&&Y.name)R+=`. Received an instance of ${x.constructor.name}`;else{let Q=i(x,{depth:-1});R+=`. Received ${Q}`}}else{let Q=i(x,{colors:!1});Q.length>25&&(Q=`${Q.slice(0,25)}...`),R+=`. Received type ${typeof x} (${Q})`}return R},TypeError),A("ERR_INVALID_ARG_VALUE",(c,w,x="is invalid")=>{let R=i(w);return R.length>128&&(R=R.slice(0,128)+"..."),`The ${c.includes(".")?"property":"argument"} '${c}' ${x}. Received ${R}`},TypeError),A("ERR_INVALID_RETURN_VALUE",(c,w,x)=>{var R;let T=x!=null&&(R=x.constructor)!==null&&R!==void 0&&R.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${c} to be returned from the "${w}" function but got ${T}.`},TypeError),A("ERR_MISSING_ARGS",(...c)=>{b(c.length>0,"At least one arg needs to be specified");let w,x=c.length;switch(c=(Array.isArray(c)?c:[c]).map(R=>`"${R}"`).join(" or "),x){case 1:w+=`The ${c[0]} argument`;break;case 2:w+=`The ${c[0]} and ${c[1]} arguments`;break;default:{let R=c.pop();w+=`The ${c.join(", ")}, and ${R} arguments`}break}return`${w} must be specified`},TypeError),A("ERR_OUT_OF_RANGE",(c,w,x)=>{b(w,'Missing "range" argument');let R;if(Number.isInteger(x)&&Math.abs(x)>2**32)R=v(String(x));else if(typeof x=="bigint"){R=String(x);let T=BigInt(2)**BigInt(32);(x>T||x<-T)&&(R=v(R)),R+="n"}else R=i(x);return`The value of "${c}" is out of range. It must be ${w}. Received ${R}`},RangeError),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),A("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),A("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),A("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),A("ERR_STREAM_WRITE_AFTER_END","write after end",Error),A("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:k,aggregateTwoErrors:F(P),hideStackFrames:F,codes:_}}}),Ut=Se({"node_modules/abort-controller/browser.js"(t,e){"use strict";var{AbortController:r,AbortSignal:i}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=r,e.exports.AbortSignal=i,e.exports.default=r}}),er=Se({"node_modules/events/events.js"(t,e){"use strict";var r=typeof Reflect=="object"?Reflect:null,i=r&&typeof r.apply=="function"?r.apply:function(L,G,Y){return Function.prototype.apply.call(L,G,Y)},n;r&&typeof r.ownKeys=="function"?n=r.ownKeys:Object.getOwnPropertySymbols?n=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:n=function(L){return Object.getOwnPropertyNames(L)};function a(T){console&&console.warn&&console.warn(T)}var u=Number.isNaN||function(L){return L!==L};function l(){l.init.call(this)}e.exports=l,e.exports.once=w,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var g=10;function h(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(T){if(typeof T!="number"||T<0||u(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");g=T}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||u(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function _(T){return T._maxListeners===void 0?l.defaultMaxListeners:T._maxListeners}l.prototype.getMaxListeners=function(){return _(this)},l.prototype.emit=function(L){for(var G=[],Y=1;Y<arguments.length;Y++)G.push(arguments[Y]);var Q=L==="error",pe=this._events;if(pe!==void 0)Q=Q&&pe.error===void 0;else if(!Q)return!1;if(Q){var O;if(G.length>0&&(O=G[0]),O instanceof Error)throw O;var C=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw C.context=O,C}var K=pe[L];if(K===void 0)return!1;if(typeof K=="function")i(K,this,G);else for(var B=K.length,oe=P(K,B),Y=0;Y<B;++Y)i(oe[Y],this,G);return!0};function b(T,L,G,Y){var Q,pe,O;if(h(G),pe=T._events,pe===void 0?(pe=T._events=Object.create(null),T._eventsCount=0):(pe.newListener!==void 0&&(T.emit("newListener",L,G.listener?G.listener:G),pe=T._events),O=pe[L]),O===void 0)O=pe[L]=G,++T._eventsCount;else if(typeof O=="function"?O=pe[L]=Y?[G,O]:[O,G]:Y?O.unshift(G):O.push(G),Q=_(T),Q>0&&O.length>Q&&!O.warned){O.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=T,C.type=L,C.count=O.length,a(C)}return T}l.prototype.addListener=function(L,G){return b(this,L,G,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(L,G){return b(this,L,G,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(T,L,G){var Y={fired:!1,wrapFn:void 0,target:T,type:L,listener:G},Q=v.bind(Y);return Q.listener=G,Y.wrapFn=Q,Q}l.prototype.once=function(L,G){return h(G),this.on(L,S(this,L,G)),this},l.prototype.prependOnceListener=function(L,G){return h(G),this.prependListener(L,S(this,L,G)),this},l.prototype.removeListener=function(L,G){var Y,Q,pe,O,C;if(h(G),Q=this._events,Q===void 0)return this;if(Y=Q[L],Y===void 0)return this;if(Y===G||Y.listener===G)--this._eventsCount===0?this._events=Object.create(null):(delete Q[L],Q.removeListener&&this.emit("removeListener",L,Y.listener||G));else if(typeof Y!="function"){for(pe=-1,O=Y.length-1;O>=0;O--)if(Y[O]===G||Y[O].listener===G){C=Y[O].listener,pe=O;break}if(pe<0)return this;pe===0?Y.shift():k(Y,pe),Y.length===1&&(Q[L]=Y[0]),Q.removeListener!==void 0&&this.emit("removeListener",L,C||G)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(L){var G,Y,Q;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[L]),this;if(arguments.length===0){var pe=Object.keys(Y),O;for(Q=0;Q<pe.length;++Q)O=pe[Q],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(G=Y[L],typeof G=="function")this.removeListener(L,G);else if(G!==void 0)for(Q=G.length-1;Q>=0;Q--)this.removeListener(L,G[Q]);return this};function A(T,L,G){var Y=T._events;if(Y===void 0)return[];var Q=Y[L];return Q===void 0?[]:typeof Q=="function"?G?[Q.listener||Q]:[Q]:G?c(Q):P(Q,Q.length)}l.prototype.listeners=function(L){return A(this,L,!0)},l.prototype.rawListeners=function(L){return A(this,L,!1)},l.listenerCount=function(T,L){return typeof T.listenerCount=="function"?T.listenerCount(L):F.call(T,L)},l.prototype.listenerCount=F;function F(T){var L=this._events;if(L!==void 0){var G=L[T];if(typeof G=="function")return 1;if(G!==void 0)return G.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function P(T,L){for(var G=new Array(L),Y=0;Y<L;++Y)G[Y]=T[Y];return G}function k(T,L){for(;L+1<T.length;L++)T[L]=T[L+1];T.pop()}function c(T){for(var L=new Array(T.length),G=0;G<L.length;++G)L[G]=T[G].listener||T[G];return L}function w(T,L){return new Promise(function(G,Y){function Q(O){T.removeListener(L,pe),Y(O)}function pe(){typeof T.removeListener=="function"&&T.removeListener("error",Q),G([].slice.call(arguments))}R(T,L,pe,{once:!0}),L!=="error"&&x(T,Q,{once:!0})})}function x(T,L,G){typeof T.on=="function"&&R(T,"error",L,G)}function R(T,L,G,Y){if(typeof T.on=="function")Y.once?T.once(L,G):T.on(L,G);else if(typeof T.addEventListener=="function")T.addEventListener(L,function Q(pe){Y.once&&T.removeEventListener(L,Q),G(pe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}}}),Ue=Se({"node_modules/readable-stream/lib/ours/util.js"(t,e){"use strict";var r=Ye(),{format:i,inspect:n}=mi(),{codes:{ERR_INVALID_ARG_TYPE:a}}=De(),{kResistStopPropagation:u,AggregateError:l,SymbolDispose:g}=Pe(),h=globalThis.AbortSignal||Ut().AbortSignal,_=globalThis.AbortController||Ut().AbortController,b=Object.getPrototypeOf(async function(){}).constructor,v=globalThis.Blob||r.Blob,S=typeof v<"u"?function(k){return k instanceof v}:function(k){return!1},A=(P,k)=>{if(P!==void 0&&(P===null||typeof P!="object"||!("aborted"in P)))throw new a(k,"AbortSignal",P)},F=(P,k)=>{if(typeof P!="function")throw new a(k,"Function",P)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(P){let k=!1;return function(...c){k||(k=!0,P.apply(this,c))}},createDeferredPromise:function(){let P,k;return{promise:new Promise((w,x)=>{P=w,k=x}),resolve:P,reject:k}},promisify(P){return new Promise((k,c)=>{P((w,...x)=>w?c(w):k(...x))})},debuglog(){return function(){}},format:i,inspect:n,types:{isAsyncFunction(P){return P instanceof b},isArrayBufferView(P){return ArrayBuffer.isView(P)}},isBlob:S,deprecate(P,k){return P},addAbortListener:er().addAbortListener||function(k,c){if(k===void 0)throw new a("signal","AbortSignal",k);A(k,"signal"),F(c,"listener");let w;return k.aborted?queueMicrotask(()=>c()):(k.addEventListener("abort",c,{__proto__:null,once:!0,[u]:!0}),w=()=>{k.removeEventListener("abort",c)}),{__proto__:null,[g](){var x;(x=w)===null||x===void 0||x()}}},AbortSignalAny:h.any||function(k){if(k.length===1)return k[0];let c=new _,w=()=>c.abort();return k.forEach(x=>{A(x,"signals"),x.addEventListener("abort",w,{once:!0})}),c.signal.addEventListener("abort",()=>{k.forEach(x=>x.removeEventListener("abort",w))},{once:!0}),c.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}}),Gt=Se({"node_modules/readable-stream/lib/internal/validators.js"(t,e){"use strict";var{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:n,ArrayPrototypeMap:a,NumberIsInteger:u,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:g,NumberMIN_SAFE_INTEGER:h,NumberParseInt:_,ObjectPrototypeHasOwnProperty:b,RegExpPrototypeExec:v,String:S,StringPrototypeToUpperCase:A,StringPrototypeTrim:F}=Pe(),{hideStackFrames:P,codes:{ERR_SOCKET_BAD_PORT:k,ERR_INVALID_ARG_TYPE:c,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:R}}=De(),{normalizeEncoding:T}=Ue(),{isAsyncFunction:L,isArrayBufferView:G}=Ue().types,Y={};function Q(I){return I===(I|0)}function pe(I){return I===I>>>0}var O=/^[0-7]+$/,C="must be a 32-bit unsigned integer or an octal string";function K(I,W,se){if(typeof I>"u"&&(I=se),typeof I=="string"){if(v(O,I)===null)throw new w(W,I,C);I=_(I,8)}return le(I,W),I}var B=P((I,W,se=h,J=g)=>{if(typeof I!="number")throw new c(W,"number",I);if(!u(I))throw new x(W,"an integer",I);if(I<se||I>J)throw new x(W,`>= ${se} && <= ${J}`,I)}),oe=P((I,W,se=-2147483648,J=2147483647)=>{if(typeof I!="number")throw new c(W,"number",I);if(!u(I))throw new x(W,"an integer",I);if(I<se||I>J)throw new x(W,`>= ${se} && <= ${J}`,I)}),le=P((I,W,se=!1)=>{if(typeof I!="number")throw new c(W,"number",I);if(!u(I))throw new x(W,"an integer",I);let J=se?1:0,fe=4294967295;if(I<J||I>fe)throw new x(W,`>= ${J} && <= ${fe}`,I)});function he(I,W){if(typeof I!="string")throw new c(W,"string",I)}function ve(I,W,se=void 0,J){if(typeof I!="number")throw new c(W,"number",I);if(se!=null&&I<se||J!=null&&I>J||(se!=null||J!=null)&&l(I))throw new x(W,`${se!=null?`>= ${se}`:""}${se!=null&&J!=null?" && ":""}${J!=null?`<= ${J}`:""}`,I)}var z=P((I,W,se)=>{if(!i(se,I)){let fe="must be one of: "+n(a(se,ke=>typeof ke=="string"?`'${ke}'`:S(ke)),", ");throw new w(W,I,fe)}});function ie(I,W){if(typeof I!="boolean")throw new c(W,"boolean",I)}function m(I,W,se){return I==null||!b(I,W)?se:I[W]}var V=P((I,W,se=null)=>{let J=m(se,"allowArray",!1),fe=m(se,"allowFunction",!1);if(!m(se,"nullable",!1)&&I===null||!J&&r(I)||typeof I!="object"&&(!fe||typeof I!="function"))throw new c(W,"Object",I)}),ae=P((I,W)=>{if(I!=null&&typeof I!="object"&&typeof I!="function")throw new c(W,"a dictionary",I)}),$=P((I,W,se=0)=>{if(!r(I))throw new c(W,"Array",I);if(I.length<se){let J=`must be longer than ${se}`;throw new w(W,I,J)}});function ue(I,W){$(I,W);for(let se=0;se<I.length;se++)he(I[se],`${W}[${se}]`)}function ye(I,W){$(I,W);for(let se=0;se<I.length;se++)ie(I[se],`${W}[${se}]`)}function we(I,W){$(I,W);for(let se=0;se<I.length;se++){let J=I[se],fe=`${W}[${se}]`;if(J==null)throw new c(fe,"AbortSignal",J);be(J,fe)}}function me(I,W="signal"){if(he(I,W),Y[I]===void 0)throw Y[A(I)]!==void 0?new R(I+" (signals must use all capital letters)"):new R(I)}var q=P((I,W="buffer")=>{if(!G(I))throw new c(W,["Buffer","TypedArray","DataView"],I)});function H(I,W){let se=T(W),J=I.length;if(se==="hex"&&J%2!==0)throw new w("encoding",W,`is invalid for data of length ${J}`)}function ne(I,W="Port",se=!0){if(typeof I!="number"&&typeof I!="string"||typeof I=="string"&&F(I).length===0||+I!==+I>>>0||I>65535||I===0&&!se)throw new k(W,I,se);return I|0}var be=P((I,W)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new c(W,"AbortSignal",I)}),_e=P((I,W)=>{if(typeof I!="function")throw new c(W,"Function",I)}),j=P((I,W)=>{if(typeof I!="function"||L(I))throw new c(W,"Function",I)}),N=P((I,W)=>{if(I!==void 0)throw new c(W,"undefined",I)});function D(I,W,se){if(!i(se,I))throw new c(W,`('${n(se,"|")}')`,I)}var ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function X(I,W){if(typeof I>"u"||!v(ee,I))throw new w(W,I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Z(I){if(typeof I=="string")return X(I,"hints"),I;if(r(I)){let W=I.length,se="";if(W===0)return se;for(let J=0;J<W;J++){let fe=I[J];X(fe,"hints"),se+=fe,J!==W-1&&(se+=", ")}return se}throw new w("hints",I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:Q,isUint32:pe,parseFileMode:K,validateArray:$,validateStringArray:ue,validateBooleanArray:ye,validateAbortSignalArray:we,validateBoolean:ie,validateBuffer:q,validateDictionary:ae,validateEncoding:H,validateFunction:_e,validateInt32:oe,validateInteger:B,validateNumber:ve,validateObject:V,validateOneOf:z,validatePlainFunction:j,validatePort:ne,validateSignalName:me,validateString:he,validateUint32:le,validateUndefined:N,validateUnion:D,validateAbortSignal:be,validateLinkHeaderValue:Z}}}),ht=Se({"node_modules/process/browser.js"(t,e){var r=e.exports={},i,n;function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=a}catch{i=a}try{typeof clearTimeout=="function"?n=clearTimeout:n=u}catch{n=u}})();function l(k){if(i===setTimeout)return setTimeout(k,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(k,0);try{return i(k,0)}catch{try{return i.call(null,k,0)}catch{return i.call(this,k,0)}}}function g(k){if(n===clearTimeout)return clearTimeout(k);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(k);try{return n(k)}catch{try{return n.call(null,k)}catch{return n.call(this,k)}}}var h=[],_=!1,b,v=-1;function S(){!_||!b||(_=!1,b.length?h=b.concat(h):v=-1,h.length&&A())}function A(){if(!_){var k=l(S);_=!0;for(var c=h.length;c;){for(b=h,h=[];++v<c;)b&&b[v].run();v=-1,c=h.length}b=null,_=!1,g(k)}}r.nextTick=function(k){var c=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)c[w-1]=arguments[w];h.push(new F(k,c)),h.length===1&&!_&&l(A)};function F(k,c){this.fun=k,this.array=c}F.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function P(){}r.on=P,r.addListener=P,r.once=P,r.off=P,r.removeListener=P,r.removeAllListeners=P,r.emit=P,r.prependListener=P,r.prependOnceListener=P,r.listeners=function(k){return[]},r.binding=function(k){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(k){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}}),Ze=Se({"node_modules/readable-stream/lib/internal/streams/utils.js"(t,e){"use strict";var{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:n}=Pe(),a=n("nodejs.stream.destroyed"),u=n("nodejs.stream.errored"),l=n("nodejs.stream.readable"),g=n("nodejs.stream.writable"),h=n("nodejs.stream.disturbed"),_=n("nodejs.webstream.isClosedPromise"),b=n("nodejs.webstream.controllerErrorFunction");function v(m,V=!1){var ae;return!!(m&&typeof m.pipe=="function"&&typeof m.on=="function"&&(!V||typeof m.pause=="function"&&typeof m.resume=="function")&&(!m._writableState||((ae=m._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!m._writableState||m._readableState))}function S(m){var V;return!!(m&&typeof m.write=="function"&&typeof m.on=="function"&&(!m._readableState||((V=m._writableState)===null||V===void 0?void 0:V.writable)!==!1))}function A(m){return!!(m&&typeof m.pipe=="function"&&m._readableState&&typeof m.on=="function"&&typeof m.write=="function")}function F(m){return m&&(m._readableState||m._writableState||typeof m.write=="function"&&typeof m.on=="function"||typeof m.pipe=="function"&&typeof m.on=="function")}function P(m){return!!(m&&!F(m)&&typeof m.pipeThrough=="function"&&typeof m.getReader=="function"&&typeof m.cancel=="function")}function k(m){return!!(m&&!F(m)&&typeof m.getWriter=="function"&&typeof m.abort=="function")}function c(m){return!!(m&&!F(m)&&typeof m.readable=="object"&&typeof m.writable=="object")}function w(m){return P(m)||k(m)||c(m)}function x(m,V){return m==null?!1:V===!0?typeof m[r]=="function":V===!1?typeof m[i]=="function":typeof m[r]=="function"||typeof m[i]=="function"}function R(m){if(!F(m))return null;let V=m._writableState,ae=m._readableState,$=V||ae;return!!(m.destroyed||m[a]||$!=null&&$.destroyed)}function T(m){if(!S(m))return null;if(m.writableEnded===!0)return!0;let V=m._writableState;return V!=null&&V.errored?!1:typeof V?.ended!="boolean"?null:V.ended}function L(m,V){if(!S(m))return null;if(m.writableFinished===!0)return!0;let ae=m._writableState;return ae!=null&&ae.errored?!1:typeof ae?.finished!="boolean"?null:!!(ae.finished||V===!1&&ae.ended===!0&&ae.length===0)}function G(m){if(!v(m))return null;if(m.readableEnded===!0)return!0;let V=m._readableState;return!V||V.errored?!1:typeof V?.ended!="boolean"?null:V.ended}function Y(m,V){if(!v(m))return null;let ae=m._readableState;return ae!=null&&ae.errored?!1:typeof ae?.endEmitted!="boolean"?null:!!(ae.endEmitted||V===!1&&ae.ended===!0&&ae.length===0)}function Q(m){return m&&m[l]!=null?m[l]:typeof m?.readable!="boolean"?null:R(m)?!1:v(m)&&m.readable&&!Y(m)}function pe(m){return m&&m[g]!=null?m[g]:typeof m?.writable!="boolean"?null:R(m)?!1:S(m)&&m.writable&&!T(m)}function O(m,V){return F(m)?R(m)?!0:!(V?.readable!==!1&&Q(m)||V?.writable!==!1&&pe(m)):null}function C(m){var V,ae;return F(m)?m.writableErrored?m.writableErrored:(V=(ae=m._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&V!==void 0?V:null:null}function K(m){var V,ae;return F(m)?m.readableErrored?m.readableErrored:(V=(ae=m._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&V!==void 0?V:null:null}function B(m){if(!F(m))return null;if(typeof m.closed=="boolean")return m.closed;let V=m._writableState,ae=m._readableState;return typeof V?.closed=="boolean"||typeof ae?.closed=="boolean"?V?.closed||ae?.closed:typeof m._closed=="boolean"&&oe(m)?m._closed:null}function oe(m){return typeof m._closed=="boolean"&&typeof m._defaultKeepAlive=="boolean"&&typeof m._removedConnection=="boolean"&&typeof m._removedContLen=="boolean"}function le(m){return typeof m._sent100=="boolean"&&oe(m)}function he(m){var V;return typeof m._consuming=="boolean"&&typeof m._dumped=="boolean"&&((V=m.req)===null||V===void 0?void 0:V.upgradeOrConnect)===void 0}function ve(m){if(!F(m))return null;let V=m._writableState,ae=m._readableState,$=V||ae;return!$&&le(m)||!!($&&$.autoDestroy&&$.emitClose&&$.closed===!1)}function z(m){var V;return!!(m&&((V=m[h])!==null&&V!==void 0?V:m.readableDidRead||m.readableAborted))}function ie(m){var V,ae,$,ue,ye,we,me,q,H,ne;return!!(m&&((V=(ae=($=(ue=(ye=(we=m[u])!==null&&we!==void 0?we:m.readableErrored)!==null&&ye!==void 0?ye:m.writableErrored)!==null&&ue!==void 0?ue:(me=m._readableState)===null||me===void 0?void 0:me.errorEmitted)!==null&&$!==void 0?$:(q=m._writableState)===null||q===void 0?void 0:q.errorEmitted)!==null&&ae!==void 0?ae:(H=m._readableState)===null||H===void 0?void 0:H.errored)!==null&&V!==void 0?V:!((ne=m._writableState)===null||ne===void 0)&&ne.errored))}e.exports={isDestroyed:R,kIsDestroyed:a,isDisturbed:z,kIsDisturbed:h,isErrored:ie,kIsErrored:u,isReadable:Q,kIsReadable:l,kIsClosedPromise:_,kControllerErrorFunction:b,kIsWritable:g,isClosed:B,isDuplexNodeStream:A,isFinished:O,isIterable:x,isReadableNodeStream:v,isReadableStream:P,isReadableEnded:G,isReadableFinished:Y,isReadableErrored:K,isNodeStream:F,isWebStream:w,isWritable:pe,isWritableNodeStream:S,isWritableStream:k,isWritableEnded:T,isWritableFinished:L,isWritableErrored:C,isServerRequest:he,isServerResponse:le,willEmitClose:ve,isTransformStream:c}}}),nt=Se({"node_modules/readable-stream/lib/internal/streams/end-of-stream.js"(t,e){"use strict";var r=ht(),{AbortError:i,codes:n}=De(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:u}=n,{kEmptyObject:l,once:g}=Ue(),{validateAbortSignal:h,validateFunction:_,validateObject:b,validateBoolean:v}=Gt(),{Promise:S,PromisePrototypeThen:A,SymbolDispose:F}=Pe(),{isClosed:P,isReadable:k,isReadableNodeStream:c,isReadableStream:w,isReadableFinished:x,isReadableErrored:R,isWritable:T,isWritableNodeStream:L,isWritableStream:G,isWritableFinished:Y,isWritableErrored:Q,isNodeStream:pe,willEmitClose:O,kIsClosedPromise:C}=Ze(),K;function B(z){return z.setHeader&&typeof z.abort=="function"}var oe=()=>{};function le(z,ie,m){var V,ae;if(arguments.length===2?(m=ie,ie=l):ie==null?ie=l:b(ie,"options"),_(m,"callback"),h(ie.signal,"options.signal"),m=g(m),w(z)||G(z))return he(z,ie,m);if(!pe(z))throw new a("stream",["ReadableStream","WritableStream","Stream"],z);let $=(V=ie.readable)!==null&&V!==void 0?V:c(z),ue=(ae=ie.writable)!==null&&ae!==void 0?ae:L(z),ye=z._writableState,we=z._readableState,me=()=>{z.writable||ne()},q=O(z)&&c(z)===$&&L(z)===ue,H=Y(z,!1),ne=()=>{H=!0,z.destroyed&&(q=!1),!(q&&(!z.readable||$))&&(!$||be)&&m.call(z)},be=x(z,!1),_e=()=>{be=!0,z.destroyed&&(q=!1),!(q&&(!z.writable||ue))&&(!ue||H)&&m.call(z)},j=I=>{m.call(z,I)},N=P(z),D=()=>{N=!0;let I=Q(z)||R(z);if(I&&typeof I!="boolean")return m.call(z,I);if($&&!be&&c(z,!0)&&!x(z,!1))return m.call(z,new u);if(ue&&!H&&!Y(z,!1))return m.call(z,new u);m.call(z)},ee=()=>{N=!0;let I=Q(z)||R(z);if(I&&typeof I!="boolean")return m.call(z,I);m.call(z)},X=()=>{z.req.on("finish",ne)};B(z)?(z.on("complete",ne),q||z.on("abort",D),z.req?X():z.on("request",X)):ue&&!ye&&(z.on("end",me),z.on("close",me)),!q&&typeof z.aborted=="boolean"&&z.on("aborted",D),z.on("end",_e),z.on("finish",ne),ie.error!==!1&&z.on("error",j),z.on("close",D),N?r.nextTick(D):ye!=null&&ye.errorEmitted||we!=null&&we.errorEmitted?q||r.nextTick(ee):(!$&&(!q||k(z))&&(H||T(z)===!1)||!ue&&(!q||T(z))&&(be||k(z)===!1)||we&&z.req&&z.aborted)&&r.nextTick(ee);let Z=()=>{m=oe,z.removeListener("aborted",D),z.removeListener("complete",ne),z.removeListener("abort",D),z.removeListener("request",X),z.req&&z.req.removeListener("finish",ne),z.removeListener("end",me),z.removeListener("close",me),z.removeListener("finish",ne),z.removeListener("end",_e),z.removeListener("error",j),z.removeListener("close",D)};if(ie.signal&&!N){let I=()=>{let W=m;Z(),W.call(z,new i(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)r.nextTick(I);else{K=K||Ue().addAbortListener;let W=K(ie.signal,I),se=m;m=g((...J)=>{W[F](),se.apply(z,J)})}}return Z}function he(z,ie,m){let V=!1,ae=oe;if(ie.signal)if(ae=()=>{V=!0,m.call(z,new i(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)r.nextTick(ae);else{K=K||Ue().addAbortListener;let ue=K(ie.signal,ae),ye=m;m=g((...we)=>{ue[F](),ye.apply(z,we)})}let $=(...ue)=>{V||r.nextTick(()=>m.apply(z,ue))};return A(z[C].promise,$,$),oe}function ve(z,ie){var m;let V=!1;return ie===null&&(ie=l),(m=ie)!==null&&m!==void 0&&m.cleanup&&(v(ie.cleanup,"cleanup"),V=ie.cleanup),new S((ae,$)=>{let ue=le(z,ie,ye=>{V&&ue(),ye?$(ye):ae()})})}e.exports=le,e.exports.finished=ve}}),xt=Se({"node_modules/readable-stream/lib/internal/streams/destroy.js"(t,e){"use strict";var r=ht(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:a}=De(),{Symbol:u}=Pe(),{kIsDestroyed:l,isDestroyed:g,isFinished:h,isServerRequest:_}=Ze(),b=u("kDestroy"),v=u("kConstruct");function S(O,C,K){O&&(O.stack,C&&!C.errored&&(C.errored=O),K&&!K.errored&&(K.errored=O))}function A(O,C){let K=this._readableState,B=this._writableState,oe=B||K;return B!=null&&B.destroyed||K!=null&&K.destroyed?(typeof C=="function"&&C(),this):(S(O,B,K),B&&(B.destroyed=!0),K&&(K.destroyed=!0),oe.constructed?F(this,O,C):this.once(b,function(le){F(this,i(le,O),C)}),this)}function F(O,C,K){let B=!1;function oe(le){if(B)return;B=!0;let he=O._readableState,ve=O._writableState;S(le,ve,he),ve&&(ve.closed=!0),he&&(he.closed=!0),typeof K=="function"&&K(le),le?r.nextTick(P,O,le):r.nextTick(k,O)}try{O._destroy(C||null,oe)}catch(le){oe(le)}}function P(O,C){c(O,C),k(O)}function k(O){let C=O._readableState,K=O._writableState;K&&(K.closeEmitted=!0),C&&(C.closeEmitted=!0),(K!=null&&K.emitClose||C!=null&&C.emitClose)&&O.emit("close")}function c(O,C){let K=O._readableState,B=O._writableState;B!=null&&B.errorEmitted||K!=null&&K.errorEmitted||(B&&(B.errorEmitted=!0),K&&(K.errorEmitted=!0),O.emit("error",C))}function w(){let O=this._readableState,C=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),C&&(C.constructed=!0,C.destroyed=!1,C.closed=!1,C.closeEmitted=!1,C.errored=null,C.errorEmitted=!1,C.finalCalled=!1,C.prefinished=!1,C.ended=C.writable===!1,C.ending=C.writable===!1,C.finished=C.writable===!1)}function x(O,C,K){let B=O._readableState,oe=O._writableState;if(oe!=null&&oe.destroyed||B!=null&&B.destroyed)return this;B!=null&&B.autoDestroy||oe!=null&&oe.autoDestroy?O.destroy(C):C&&(C.stack,oe&&!oe.errored&&(oe.errored=C),B&&!B.errored&&(B.errored=C),K?r.nextTick(c,O,C):c(O,C))}function R(O,C){if(typeof O._construct!="function")return;let K=O._readableState,B=O._writableState;K&&(K.constructed=!1),B&&(B.constructed=!1),O.once(v,C),!(O.listenerCount(v)>1)&&r.nextTick(T,O)}function T(O){let C=!1;function K(B){if(C){x(O,B??new n);return}C=!0;let oe=O._readableState,le=O._writableState,he=le||oe;oe&&(oe.constructed=!0),le&&(le.constructed=!0),he.destroyed?O.emit(b,B):B?x(O,B,!0):r.nextTick(L,O)}try{O._construct(B=>{r.nextTick(K,B)})}catch(B){r.nextTick(K,B)}}function L(O){O.emit(v)}function G(O){return O?.setHeader&&typeof O.abort=="function"}function Y(O){O.emit("close")}function Q(O,C){O.emit("error",C),r.nextTick(Y,O)}function pe(O,C){!O||g(O)||(!C&&!h(O)&&(C=new a),_(O)?(O.socket=null,O.destroy(C)):G(O)?O.abort():G(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(C):typeof O.close=="function"?O.close():C?r.nextTick(Q,O,C):r.nextTick(Y,O),O.destroyed||(O[l]=!0))}e.exports={construct:R,destroyer:pe,destroy:A,undestroy:w,errorOrDestroy:x}}}),Nr=Se({"node_modules/readable-stream/lib/internal/streams/legacy.js"(t,e){"use strict";var{ArrayIsArray:r,ObjectSetPrototypeOf:i}=Pe(),{EventEmitter:n}=er();function a(l){n.call(this,l)}i(a.prototype,n.prototype),i(a,n),a.prototype.pipe=function(l,g){let h=this;function _(k){l.writable&&l.write(k)===!1&&h.pause&&h.pause()}h.on("data",_);function b(){h.readable&&h.resume&&h.resume()}l.on("drain",b),!l._isStdio&&(!g||g.end!==!1)&&(h.on("end",S),h.on("close",A));let v=!1;function S(){v||(v=!0,l.end())}function A(){v||(v=!0,typeof l.destroy=="function"&&l.destroy())}function F(k){P(),n.listenerCount(this,"error")===0&&this.emit("error",k)}u(h,"error",F),u(l,"error",F);function P(){h.removeListener("data",_),l.removeListener("drain",b),h.removeListener("end",S),h.removeListener("close",A),h.removeListener("error",F),l.removeListener("error",F),h.removeListener("end",P),h.removeListener("close",P),l.removeListener("close",P)}return h.on("end",P),h.on("close",P),l.on("close",P),l.emit("pipe",h),l};function u(l,g,h){if(typeof l.prependListener=="function")return l.prependListener(g,h);!l._events||!l._events[g]?l.on(g,h):r(l._events[g])?l._events[g].unshift(h):l._events[g]=[h,l._events[g]]}e.exports={Stream:a,prependListener:u}}}),tr=Se({"node_modules/readable-stream/lib/internal/streams/add-abort-signal.js"(t,e){"use strict";var{SymbolDispose:r}=Pe(),{AbortError:i,codes:n}=De(),{isNodeStream:a,isWebStream:u,kControllerErrorFunction:l}=Ze(),g=nt(),{ERR_INVALID_ARG_TYPE:h}=n,_,b=(v,S)=>{if(typeof v!="object"||!("aborted"in v))throw new h(S,"AbortSignal",v)};e.exports.addAbortSignal=function(S,A){if(b(S,"signal"),!a(A)&&!u(A))throw new h("stream",["ReadableStream","WritableStream","Stream"],A);return e.exports.addAbortSignalNoValidate(S,A)},e.exports.addAbortSignalNoValidate=function(v,S){if(typeof v!="object"||!("aborted"in v))return S;let A=a(S)?()=>{S.destroy(new i(void 0,{cause:v.reason}))}:()=>{S[l](new i(void 0,{cause:v.reason}))};if(v.aborted)A();else{_=_||Ue().addAbortListener;let F=_(v,A);g(S,F[r])}return S}}}),Dn=Se({"node_modules/readable-stream/lib/internal/streams/buffer_list.js"(t,e){"use strict";var{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:n,Uint8Array:a}=Pe(),{Buffer:u}=Ye(),{inspect:l}=Ue();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(h){let _={data:h,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}unshift(h){let _={data:h,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}shift(){if(this.length===0)return;let h=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,h}clear(){this.head=this.tail=null,this.length=0}join(h){if(this.length===0)return"";let _=this.head,b=""+_.data;for(;(_=_.next)!==null;)b+=h+_.data;return b}concat(h){if(this.length===0)return u.alloc(0);let _=u.allocUnsafe(h>>>0),b=this.head,v=0;for(;b;)n(_,b.data,v),v+=b.data.length,b=b.next;return _}consume(h,_){let b=this.head.data;if(h<b.length){let v=b.slice(0,h);return this.head.data=b.slice(h),v}return h===b.length?this.shift():_?this._getString(h):this._getBuffer(h)}first(){return this.head.data}*[i](){for(let h=this.head;h;h=h.next)yield h.data}_getString(h){let _="",b=this.head,v=0;do{let S=b.data;if(h>S.length)_+=S,h-=S.length;else{h===S.length?(_+=S,++v,b.next?this.head=b.next:this.head=this.tail=null):(_+=r(S,0,h),this.head=b,b.data=r(S,h));break}++v}while((b=b.next)!==null);return this.length-=v,_}_getBuffer(h){let _=u.allocUnsafe(h),b=h,v=this.head,S=0;do{let A=v.data;if(h>A.length)n(_,A,b-h),h-=A.length;else{h===A.length?(n(_,A,b-h),++S,v.next?this.head=v.next:this.head=this.tail=null):(n(_,new a(A.buffer,A.byteOffset,h),b-h),this.head=v,v.data=A.slice(h));break}++S}while((v=v.next)!==null);return this.length-=S,_}[Symbol.for("nodejs.util.inspect.custom")](h,_){return l(this,{..._,depth:0,customInspect:!1})}}}}),rr=Se({"node_modules/readable-stream/lib/internal/streams/state.js"(t,e){"use strict";var{MathFloor:r,NumberIsInteger:i}=Pe(),{validateInteger:n}=Gt(),{ERR_INVALID_ARG_VALUE:a}=De().codes,u=16*1024,l=16;function g(v,S,A){return v.highWaterMark!=null?v.highWaterMark:S?v[A]:null}function h(v){return v?l:u}function _(v,S){n(S,"value",0),v?l=S:u=S}function b(v,S,A,F){let P=g(S,F,A);if(P!=null){if(!i(P)||P<0){let k=F?`options.${A}`:"options.highWaterMark";throw new a(k,P)}return r(P)}return h(v.objectMode)}e.exports={getHighWaterMark:b,getDefaultHighWaterMark:h,setDefaultHighWaterMark:_}}}),Fn=Se({"node_modules/safe-buffer/index.js"(t,e){var r=Ye(),i=r.Buffer;function n(u,l){for(var g in u)l[g]=u[g]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=a);function a(u,l,g){return i(u,l,g)}a.prototype=Object.create(i.prototype),n(i,a),a.from=function(u,l,g){if(typeof u=="number")throw new TypeError("Argument must not be a number");return i(u,l,g)},a.alloc=function(u,l,g){if(typeof u!="number")throw new TypeError("Argument must be a number");var h=i(u);return l!==void 0?typeof g=="string"?h.fill(l,g):h.fill(l):h.fill(0),h},a.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return i(u)},a.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}}}),Un=Se({"node_modules/string_decoder/lib/string_decoder.js"(t){"use strict";var e=Fn().Buffer,r=e.isEncoding||function(c){switch(c=""+c,c&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(c){if(!c)return"utf8";for(var w;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(w)return;c=(""+c).toLowerCase(),w=!0}}function n(c){var w=i(c);if(typeof w!="string"&&(e.isEncoding===r||!r(c)))throw new Error("Unknown encoding: "+c);return w||c}t.StringDecoder=a;function a(c){this.encoding=n(c);var w;switch(this.encoding){case"utf16le":this.text=v,this.end=S,w=4;break;case"utf8":this.fillLast=h,w=4;break;case"base64":this.text=A,this.end=F,w=3;break;default:this.write=P,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}a.prototype.write=function(c){if(c.length===0)return"";var w,x;if(this.lastNeed){if(w=this.fillLast(c),w===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<c.length?w?w+this.text(c,x):this.text(c,x):w||""},a.prototype.end=b,a.prototype.text=_,a.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length};function u(c){return c<=127?0:c>>5===6?2:c>>4===14?3:c>>3===30?4:c>>6===2?-1:-2}function l(c,w,x){var R=w.length-1;if(R<x)return 0;var T=u(w[R]);return T>=0?(T>0&&(c.lastNeed=T-1),T):--R<x||T===-2?0:(T=u(w[R]),T>=0?(T>0&&(c.lastNeed=T-2),T):--R<x||T===-2?0:(T=u(w[R]),T>=0?(T>0&&(T===2?T=0:c.lastNeed=T-3),T):0))}function g(c,w,x){if((w[0]&192)!==128)return c.lastNeed=0,"\uFFFD";if(c.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return c.lastNeed=1,"\uFFFD";if(c.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return c.lastNeed=2,"\uFFFD"}}function h(c){var w=this.lastTotal-this.lastNeed,x=g(this,c,w);if(x!==void 0)return x;if(this.lastNeed<=c.length)return c.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,w,0,c.length),this.lastNeed-=c.length}function _(c,w){var x=l(this,c,w);if(!this.lastNeed)return c.toString("utf8",w);this.lastTotal=x;var R=c.length-(x-this.lastNeed);return c.copy(this.lastChar,0,R),c.toString("utf8",w,R)}function b(c){var w=c&&c.length?this.write(c):"";return this.lastNeed?w+"\uFFFD":w}function v(c,w){if((c.length-w)%2===0){var x=c.toString("utf16le",w);if(x){var R=x.charCodeAt(x.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",w,c.length-1)}function S(c){var w=c&&c.length?this.write(c):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,x)}return w}function A(c,w){var x=(c.length-w)%3;return x===0?c.toString("base64",w):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",w,c.length-x))}function F(c){var w=c&&c.length?this.write(c):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function P(c){return c.toString(this.encoding)}function k(c){return c&&c.length?this.write(c):""}}}),wi=Se({"node_modules/readable-stream/lib/internal/streams/from.js"(t,e){"use strict";var r=ht(),{PromisePrototypeThen:i,SymbolAsyncIterator:n,SymbolIterator:a}=Pe(),{Buffer:u}=Ye(),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:g}=De().codes;function h(_,b,v){let S;if(typeof b=="string"||b instanceof u)return new _({objectMode:!0,...v,read(){this.push(b),this.push(null)}});let A;if(b&&b[n])A=!0,S=b[n]();else if(b&&b[a])A=!1,S=b[a]();else throw new l("iterable",["Iterable"],b);let F=new _({objectMode:!0,highWaterMark:1,...v}),P=!1;F._read=function(){P||(P=!0,c())},F._destroy=function(w,x){i(k(w),()=>r.nextTick(x,w),R=>r.nextTick(x,R||w))};async function k(w){let x=w!=null,R=typeof S.throw=="function";if(x&&R){let{value:T,done:L}=await S.throw(w);if(await T,L)return}if(typeof S.return=="function"){let{value:T}=await S.return();await T}}async function c(){for(;;){try{let{value:w,done:x}=A?await S.next():S.next();if(x)F.push(null);else{let R=w&&typeof w.then=="function"?await w:w;if(R===null)throw P=!1,new g;if(F.push(R))continue;P=!1}}catch(w){F.destroy(w)}break}}return F}e.exports=h}}),ir=Se({"node_modules/readable-stream/lib/internal/streams/readable.js"(t,e){"use strict";var r=ht(),{ArrayPrototypeIndexOf:i,NumberIsInteger:n,NumberIsNaN:a,NumberParseInt:u,ObjectDefineProperties:l,ObjectKeys:g,ObjectSetPrototypeOf:h,Promise:_,SafeSet:b,SymbolAsyncDispose:v,SymbolAsyncIterator:S,Symbol:A}=Pe();e.exports=J,J.ReadableState=se;var{EventEmitter:F}=er(),{Stream:P,prependListener:k}=Nr(),{Buffer:c}=Ye(),{addAbortSignal:w}=tr(),x=nt(),R=Ue().debuglog("stream",p=>{R=p}),T=Dn(),L=xt(),{getHighWaterMark:G,getDefaultHighWaterMark:Y}=rr(),{aggregateTwoErrors:Q,codes:{ERR_INVALID_ARG_TYPE:pe,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:K,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:B},AbortError:oe}=De(),{validateObject:le}=Gt(),he=A("kPaused"),{StringDecoder:ve}=Un(),z=wi();h(J.prototype,P.prototype),h(J,P);var ie=()=>{},{errorOrDestroy:m}=L,V=1,ae=2,$=4,ue=8,ye=16,we=32,me=64,q=128,H=256,ne=512,be=1024,_e=2048,j=4096,N=8192,D=16384,ee=32768,X=65536,Z=1<<17,I=1<<18;function W(p){return{enumerable:!1,get(){return(this.state&p)!==0},set(y){y?this.state|=p:this.state&=~p}}}l(se.prototype,{objectMode:W(V),ended:W(ae),endEmitted:W($),reading:W(ue),constructed:W(ye),sync:W(we),needReadable:W(me),emittedReadable:W(q),readableListening:W(H),resumeScheduled:W(ne),errorEmitted:W(be),emitClose:W(_e),autoDestroy:W(j),destroyed:W(N),closed:W(D),closeEmitted:W(ee),multiAwaitDrain:W(X),readingMore:W(Z),dataEmitted:W(I)});function se(p,y,te){typeof te!="boolean"&&(te=y instanceof Je()),this.state=_e|j|ye|we,p&&p.objectMode&&(this.state|=V),te&&p&&p.readableObjectMode&&(this.state|=V),this.highWaterMark=p?G(this,p,"readableHighWaterMark",te):Y(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[he]=null,p&&p.emitClose===!1&&(this.state&=~_e),p&&p.autoDestroy===!1&&(this.state&=~j),this.errored=null,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new ve(p.encoding),this.encoding=p.encoding)}function J(p){if(!(this instanceof J))return new J(p);let y=this instanceof Je();this._readableState=new se(p,this,y),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!y&&w(p.signal,this)),P.call(this,p),L.construct(this,()=>{this._readableState.needReadable&&U(this,this._readableState)})}J.prototype.destroy=L.destroy,J.prototype._undestroy=L.undestroy,J.prototype._destroy=function(p,y){y(p)},J.prototype[F.captureRejectionSymbol]=function(p){this.destroy(p)},J.prototype[v]=function(){let p;return this.destroyed||(p=this.readableEnded?null:new oe,this.destroy(p)),new _((y,te)=>x(this,re=>re&&re!==p?te(re):y(null)))},J.prototype.push=function(p,y){return fe(this,p,y,!1)},J.prototype.unshift=function(p,y){return fe(this,p,y,!0)};function fe(p,y,te,re){R("readableAddChunk",y);let de=p._readableState,Oe;if((de.state&V)===0&&(typeof y=="string"?(te=te||de.defaultEncoding,de.encoding!==te&&(re&&de.encoding?y=c.from(y,te).toString(de.encoding):(y=c.from(y,te),te=""))):y instanceof c?te="":P._isUint8Array(y)?(y=P._uint8ArrayToBuffer(y),te=""):y!=null&&(Oe=new pe("chunk",["string","Buffer","Uint8Array"],y))),Oe)m(p,Oe);else if(y===null)de.state&=~ue,d(p,de);else if((de.state&V)!==0||y&&y.length>0)if(re)if((de.state&$)!==0)m(p,new B);else{if(de.destroyed||de.errored)return!1;ke(p,de,y,!0)}else if(de.ended)m(p,new K);else{if(de.destroyed||de.errored)return!1;de.state&=~ue,de.decoder&&!te?(y=de.decoder.write(y),de.objectMode||y.length!==0?ke(p,de,y,!1):U(p,de)):ke(p,de,y,!1)}else re||(de.state&=~ue,U(p,de));return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function ke(p,y,te,re){y.flowing&&y.length===0&&!y.sync&&p.listenerCount("data")>0?((y.state&X)!==0?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,p.emit("data",te)):(y.length+=y.objectMode?1:te.length,re?y.buffer.unshift(te):y.buffer.push(te),(y.state&me)!==0&&E(p)),U(p,y)}J.prototype.isPaused=function(){let p=this._readableState;return p[he]===!0||p.flowing===!1},J.prototype.setEncoding=function(p){let y=new ve(p);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;let te=this._readableState.buffer,re="";for(let de of te)re+=y.write(de);return te.clear(),re!==""&&te.push(re),this._readableState.length=re.length,this};var f=1073741824;function s(p){if(p>f)throw new C("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function o(p,y){return p<=0||y.length===0&&y.ended?0:(y.state&V)!==0?1:a(p)?y.flowing&&y.length?y.buffer.first().length:y.length:p<=y.length?p:y.ended?y.length:0}J.prototype.read=function(p){R("read",p),p===void 0?p=NaN:n(p)||(p=u(p,10));let y=this._readableState,te=p;if(p>y.highWaterMark&&(y.highWaterMark=s(p)),p!==0&&(y.state&=~q),p===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return R("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?or(this):E(this),null;if(p=o(p,y),p===0&&y.ended)return y.length===0&&or(this),null;let re=(y.state&me)!==0;if(R("need readable",re),(y.length===0||y.length-p<y.highWaterMark)&&(re=!0,R("length less than watermark",re)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)re=!1,R("reading, ended or constructing",re);else if(re){R("do read"),y.state|=ue|we,y.length===0&&(y.state|=me);try{this._read(y.highWaterMark)}catch(Oe){m(this,Oe)}y.state&=~we,y.reading||(p=o(te,y))}let de;return p>0?de=Hr(p,y):de=null,de===null?(y.needReadable=y.length<=y.highWaterMark,p=0):(y.length-=p,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),te!==p&&y.ended&&or(this)),de!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",de)),de};function d(p,y){if(R("onEofChunk"),!y.ended){if(y.decoder){let te=y.decoder.end();te&&te.length&&(y.buffer.push(te),y.length+=y.objectMode?1:te.length)}y.ended=!0,y.sync?E(p):(y.needReadable=!1,y.emittedReadable=!0,M(p))}}function E(p){let y=p._readableState;R("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(R("emitReadable",y.flowing),y.emittedReadable=!0,r.nextTick(M,p))}function M(p){let y=p._readableState;R("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(p.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,qr(p)}function U(p,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,r.nextTick(ge,p,y))}function ge(p,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){let te=y.length;if(R("maybeReadMore read 0"),p.read(0),te===y.length)break}y.readingMore=!1}J.prototype._read=function(p){throw new O("_read()")},J.prototype.pipe=function(p,y){let te=this,re=this._readableState;re.pipes.length===1&&(re.multiAwaitDrain||(re.multiAwaitDrain=!0,re.awaitDrainWriters=new b(re.awaitDrainWriters?[re.awaitDrainWriters]:[]))),re.pipes.push(p),R("pipe count=%d opts=%j",re.pipes.length,y);let Oe=(!y||y.end!==!1)&&p!==r.stdout&&p!==r.stderr?Vr:It;re.endEmitted?r.nextTick(Oe):te.once("end",Oe),p.on("unpipe",$e);function $e(ot,Ke){R("onunpipe"),ot===te&&Ke&&Ke.hasUnpiped===!1&&(Ke.hasUnpiped=!0,nn())}function Vr(){R("onend"),p.end()}let st,Kr=!1;function nn(){R("cleanup"),p.removeListener("close",ur),p.removeListener("finish",fr),st&&p.removeListener("drain",st),p.removeListener("error",lr),p.removeListener("unpipe",$e),te.removeListener("end",Vr),te.removeListener("end",It),te.removeListener("data",Yr),Kr=!0,st&&re.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&st()}function Jr(){Kr||(re.pipes.length===1&&re.pipes[0]===p?(R("false write response, pause",0),re.awaitDrainWriters=p,re.multiAwaitDrain=!1):re.pipes.length>1&&re.pipes.includes(p)&&(R("false write response, pause",re.awaitDrainWriters.size),re.awaitDrainWriters.add(p)),te.pause()),st||(st=Te(te,p),p.on("drain",st))}te.on("data",Yr);function Yr(ot){R("ondata");let Ke=p.write(ot);R("dest.write",Ke),Ke===!1&&Jr()}function lr(ot){if(R("onerror",ot),It(),p.removeListener("error",lr),p.listenerCount("error")===0){let Ke=p._writableState||p._readableState;Ke&&!Ke.errorEmitted?m(p,ot):p.emit("error",ot)}}k(p,"error",lr);function ur(){p.removeListener("finish",fr),It()}p.once("close",ur);function fr(){R("onfinish"),p.removeListener("close",ur),It()}p.once("finish",fr);function It(){R("unpipe"),te.unpipe(p)}return p.emit("pipe",te),p.writableNeedDrain===!0?Jr():re.flowing||(R("pipe resume"),te.resume()),p};function Te(p,y){return function(){let re=p._readableState;re.awaitDrainWriters===y?(R("pipeOnDrain",1),re.awaitDrainWriters=null):re.multiAwaitDrain&&(R("pipeOnDrain",re.awaitDrainWriters.size),re.awaitDrainWriters.delete(y)),(!re.awaitDrainWriters||re.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}J.prototype.unpipe=function(p){let y=this._readableState,te={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!p){let de=y.pipes;y.pipes=[],this.pause();for(let Oe=0;Oe<de.length;Oe++)de[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}let re=i(y.pipes,p);return re===-1?this:(y.pipes.splice(re,1),y.pipes.length===0&&this.pause(),p.emit("unpipe",this,te),this)},J.prototype.on=function(p,y){let te=P.prototype.on.call(this,p,y),re=this._readableState;return p==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):p==="readable"&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,R("on readable",re.length,re.reading),re.length?E(this):re.reading||r.nextTick(je,this)),te},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(p,y){let te=P.prototype.removeListener.call(this,p,y);return p==="readable"&&r.nextTick(Ae,this),te},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(p){let y=P.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&r.nextTick(Ae,this),y};function Ae(p){let y=p._readableState;y.readableListening=p.listenerCount("readable")>0,y.resumeScheduled&&y[he]===!1?y.flowing=!0:p.listenerCount("data")>0?p.resume():y.readableListening||(y.flowing=null)}function je(p){R("readable nexttick read 0"),p.read(0)}J.prototype.resume=function(){let p=this._readableState;return p.flowing||(R("resume"),p.flowing=!p.readableListening,Re(this,p)),p[he]=!1,this};function Re(p,y){y.resumeScheduled||(y.resumeScheduled=!0,r.nextTick(Xi,p,y))}function Xi(p,y){R("resume",y.reading),y.reading||p.read(0),y.resumeScheduled=!1,p.emit("resume"),qr(p),y.flowing&&!y.reading&&p.read(0)}J.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[he]=!0,this};function qr(p){let y=p._readableState;for(R("flow",y.flowing);y.flowing&&p.read()!==null;);}J.prototype.wrap=function(p){let y=!1;p.on("data",re=>{!this.push(re)&&p.pause&&(y=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",re=>{m(this,re)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&p.resume&&(y=!1,p.resume())};let te=g(p);for(let re=1;re<te.length;re++){let de=te[re];this[de]===void 0&&typeof p[de]=="function"&&(this[de]=p[de].bind(p))}return this},J.prototype[S]=function(){return zr(this)},J.prototype.iterator=function(p){return p!==void 0&&le(p,"options"),zr(this,p)};function zr(p,y){typeof p.read!="function"&&(p=J.wrap(p,{objectMode:!0}));let te=en(p,y);return te.stream=p,te}async function*en(p,y){let te=ie;function re($e){this===p?(te(),te=ie):te=$e}p.on("readable",re);let de,Oe=x(p,{writable:!1},$e=>{de=$e?Q(de,$e):null,te(),te=ie});try{for(;;){let $e=p.destroyed?null:p.read();if($e!==null)yield $e;else{if(de)throw de;if(de===null)return;await new _(re)}}}catch($e){throw de=Q(de,$e),de}finally{(de||y?.destroyOnReturn!==!1)&&(de===void 0||p._readableState.autoDestroy)?L.destroyer(p,null):(p.off("readable",re),Oe())}}l(J.prototype,{readable:{__proto__:null,get(){let p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[he]!==!1},set(p){this[he]=!!p}}}),J._fromList=Hr;function Hr(p,y){if(y.length===0)return null;let te;return y.objectMode?te=y.buffer.shift():!p||p>=y.length?(y.decoder?te=y.buffer.join(""):y.buffer.length===1?te=y.buffer.first():te=y.buffer.concat(y.length),y.buffer.clear()):te=y.buffer.consume(p,y.decoder),te}function or(p){let y=p._readableState;R("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,r.nextTick(tn,y,p))}function tn(p,y){if(R("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)r.nextTick(rn,y);else if(p.autoDestroy){let te=y._writableState;(!te||te.autoDestroy&&(te.finished||te.writable===!1))&&y.destroy()}}}function rn(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}J.from=function(p,y){return z(J,p,y)};var ar;function Qr(){return ar===void 0&&(ar={}),ar}J.fromWeb=function(p,y){return Qr().newStreamReadableFromReadableStream(p,y)},J.toWeb=function(p,y){return Qr().newReadableStreamFromStreamReadable(p,y)},J.wrap=function(p,y){var te,re;return new J({objectMode:(te=(re=p.readableObjectMode)!==null&&re!==void 0?re:p.objectMode)!==null&&te!==void 0?te:!0,...y,destroy(de,Oe){L.destroyer(p,de),Oe(de)}}).wrap(p)}}}),Pr=Se({"node_modules/readable-stream/lib/internal/streams/writable.js"(t,e){"use strict";var r=ht(),{ArrayPrototypeSlice:i,Error:n,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:u,ObjectDefineProperties:l,ObjectSetPrototypeOf:g,StringPrototypeToLowerCase:h,Symbol:_,SymbolHasInstance:b}=Pe();e.exports=le,le.WritableState=B;var{EventEmitter:v}=er(),S=Nr().Stream,{Buffer:A}=Ye(),F=xt(),{addAbortSignal:P}=tr(),{getHighWaterMark:k,getDefaultHighWaterMark:c}=rr(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:R,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:G,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:Q,ERR_UNKNOWN_ENCODING:pe}=De().codes,{errorOrDestroy:O}=F;g(le.prototype,S.prototype),g(le,S);function C(){}var K=_("kOnFinished");function B(j,N,D){typeof D!="boolean"&&(D=N instanceof Je()),this.objectMode=!!(j&&j.objectMode),D&&(this.objectMode=this.objectMode||!!(j&&j.writableObjectMode)),this.highWaterMark=j?k(this,j,"writableHighWaterMark",D):c(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ee=!!(j&&j.decodeStrings===!1);this.decodeStrings=!ee,this.defaultEncoding=j&&j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=m.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,oe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!j||j.emitClose!==!1,this.autoDestroy=!j||j.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[K]=[]}function oe(j){j.buffered=[],j.bufferedIndex=0,j.allBuffers=!0,j.allNoop=!0}B.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},u(B.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function le(j){let N=this instanceof Je();if(!N&&!a(le,this))return new le(j);this._writableState=new B(j,this,N),j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final),typeof j.construct=="function"&&(this._construct=j.construct),j.signal&&P(j.signal,this)),S.call(this,j),F.construct(this,()=>{let D=this._writableState;D.writing||ue(this,D),q(this,D)})}u(le,b,{__proto__:null,value:function(j){return a(this,j)?!0:this!==le?!1:j&&j._writableState instanceof B}}),le.prototype.pipe=function(){O(this,new T)};function he(j,N,D,ee){let X=j._writableState;if(typeof D=="function")ee=D,D=X.defaultEncoding;else{if(!D)D=X.defaultEncoding;else if(D!=="buffer"&&!A.isEncoding(D))throw new pe(D);typeof ee!="function"&&(ee=C)}if(N===null)throw new Y;if(!X.objectMode)if(typeof N=="string")X.decodeStrings!==!1&&(N=A.from(N,D),D="buffer");else if(N instanceof A)D="buffer";else if(S._isUint8Array(N))N=S._uint8ArrayToBuffer(N),D="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],N);let Z;return X.ending?Z=new Q:X.destroyed&&(Z=new L("write")),Z?(r.nextTick(ee,Z),O(j,Z,!0),Z):(X.pendingcb++,ve(j,X,N,D,ee))}le.prototype.write=function(j,N,D){return he(this,j,N,D)===!0},le.prototype.cork=function(){this._writableState.corked++},le.prototype.uncork=function(){let j=this._writableState;j.corked&&(j.corked--,j.writing||ue(this,j))},le.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=h(N)),!A.isEncoding(N))throw new pe(N);return this._writableState.defaultEncoding=N,this};function ve(j,N,D,ee,X){let Z=N.objectMode?1:D.length;N.length+=Z;let I=N.length<N.highWaterMark;return I||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:D,encoding:ee,callback:X}),N.allBuffers&&ee!=="buffer"&&(N.allBuffers=!1),N.allNoop&&X!==C&&(N.allNoop=!1)):(N.writelen=Z,N.writecb=X,N.writing=!0,N.sync=!0,j._write(D,ee,N.onwrite),N.sync=!1),I&&!N.errored&&!N.destroyed}function z(j,N,D,ee,X,Z,I){N.writelen=ee,N.writecb=I,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new L("write")):D?j._writev(X,N.onwrite):j._write(X,Z,N.onwrite),N.sync=!1}function ie(j,N,D,ee){--N.pendingcb,ee(D),$(N),O(j,D)}function m(j,N){let D=j._writableState,ee=D.sync,X=D.writecb;if(typeof X!="function"){O(j,new R);return}D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0,N?(N.stack,D.errored||(D.errored=N),j._readableState&&!j._readableState.errored&&(j._readableState.errored=N),ee?r.nextTick(ie,j,D,N,X):ie(j,D,N,X)):(D.buffered.length>D.bufferedIndex&&ue(j,D),ee?D.afterWriteTickInfo!==null&&D.afterWriteTickInfo.cb===X?D.afterWriteTickInfo.count++:(D.afterWriteTickInfo={count:1,cb:X,stream:j,state:D},r.nextTick(V,D.afterWriteTickInfo)):ae(j,D,1,X))}function V({stream:j,state:N,count:D,cb:ee}){return N.afterWriteTickInfo=null,ae(j,N,D,ee)}function ae(j,N,D,ee){for(!N.ending&&!j.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,j.emit("drain"));D-- >0;)N.pendingcb--,ee();N.destroyed&&$(N),q(j,N)}function $(j){if(j.writing)return;for(let X=j.bufferedIndex;X<j.buffered.length;++X){var N;let{chunk:Z,callback:I}=j.buffered[X],W=j.objectMode?1:Z.length;j.length-=W,I((N=j.errored)!==null&&N!==void 0?N:new L("write"))}let D=j[K].splice(0);for(let X=0;X<D.length;X++){var ee;D[X]((ee=j.errored)!==null&&ee!==void 0?ee:new L("end"))}oe(j)}function ue(j,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;let{buffered:D,bufferedIndex:ee,objectMode:X}=N,Z=D.length-ee;if(!Z)return;let I=ee;if(N.bufferProcessing=!0,Z>1&&j._writev){N.pendingcb-=Z-1;let W=N.allNoop?C:J=>{for(let fe=I;fe<D.length;++fe)D[fe].callback(J)},se=N.allNoop&&I===0?D:i(D,I);se.allBuffers=N.allBuffers,z(j,N,!0,N.length,se,"",W),oe(N)}else{do{let{chunk:W,encoding:se,callback:J}=D[I];D[I++]=null;let fe=X?1:W.length;z(j,N,!1,fe,W,se,J)}while(I<D.length&&!N.writing);I===D.length?oe(N):I>256?(D.splice(0,I),N.bufferedIndex=0):N.bufferedIndex=I}N.bufferProcessing=!1}le.prototype._write=function(j,N,D){if(this._writev)this._writev([{chunk:j,encoding:N}],D);else throw new x("_write()")},le.prototype._writev=null,le.prototype.end=function(j,N,D){let ee=this._writableState;typeof j=="function"?(D=j,j=null,N=null):typeof N=="function"&&(D=N,N=null);let X;if(j!=null){let Z=he(this,j,N);Z instanceof n&&(X=Z)}return ee.corked&&(ee.corked=1,this.uncork()),X||(!ee.errored&&!ee.ending?(ee.ending=!0,q(this,ee,!0),ee.ended=!0):ee.finished?X=new G("end"):ee.destroyed&&(X=new L("end"))),typeof D=="function"&&(X||ee.finished?r.nextTick(D,X):ee[K].push(D)),this};function ye(j){return j.ending&&!j.destroyed&&j.constructed&&j.length===0&&!j.errored&&j.buffered.length===0&&!j.finished&&!j.writing&&!j.errorEmitted&&!j.closeEmitted}function we(j,N){let D=!1;function ee(X){if(D){O(j,X??R());return}if(D=!0,N.pendingcb--,X){let Z=N[K].splice(0);for(let I=0;I<Z.length;I++)Z[I](X);O(j,X,N.sync)}else ye(N)&&(N.prefinished=!0,j.emit("prefinish"),N.pendingcb++,r.nextTick(H,j,N))}N.sync=!0,N.pendingcb++;try{j._final(ee)}catch(X){ee(X)}N.sync=!1}function me(j,N){!N.prefinished&&!N.finalCalled&&(typeof j._final=="function"&&!N.destroyed?(N.finalCalled=!0,we(j,N)):(N.prefinished=!0,j.emit("prefinish")))}function q(j,N,D){ye(N)&&(me(j,N),N.pendingcb===0&&(D?(N.pendingcb++,r.nextTick((ee,X)=>{ye(X)?H(ee,X):X.pendingcb--},j,N)):ye(N)&&(N.pendingcb++,H(j,N))))}function H(j,N){N.pendingcb--,N.finished=!0;let D=N[K].splice(0);for(let ee=0;ee<D.length;ee++)D[ee]();if(j.emit("finish"),N.autoDestroy){let ee=j._readableState;(!ee||ee.autoDestroy&&(ee.endEmitted||ee.readable===!1))&&j.destroy()}}l(le.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(j){this._writableState&&(this._writableState.destroyed=j)}},writable:{__proto__:null,get(){let j=this._writableState;return!!j&&j.writable!==!1&&!j.destroyed&&!j.errored&&!j.ending&&!j.ended},set(j){this._writableState&&(this._writableState.writable=!!j)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let j=this._writableState;return j?!j.destroyed&&!j.ending&&j.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ne=F.destroy;le.prototype.destroy=function(j,N){let D=this._writableState;return!D.destroyed&&(D.bufferedIndex<D.buffered.length||D[K].length)&&r.nextTick($,D),ne.call(this,j,N),this},le.prototype._undestroy=F.undestroy,le.prototype._destroy=function(j,N){N(j)},le.prototype[v.captureRejectionSymbol]=function(j){this.destroy(j)};var be;function _e(){return be===void 0&&(be={}),be}le.fromWeb=function(j,N){return _e().newStreamWritableFromWritableStream(j,N)},le.toWeb=function(j){return _e().newWritableStreamFromStreamWritable(j)}}}),$n=Se({"node_modules/readable-stream/lib/internal/streams/duplexify.js"(t,e){var r=ht(),i=Ye(),{isReadable:n,isWritable:a,isIterable:u,isNodeStream:l,isReadableNodeStream:g,isWritableNodeStream:h,isDuplexNodeStream:_,isReadableStream:b,isWritableStream:v}=Ze(),S=nt(),{AbortError:A,codes:{ERR_INVALID_ARG_TYPE:F,ERR_INVALID_RETURN_VALUE:P}}=De(),{destroyer:k}=xt(),c=Je(),w=ir(),x=Pr(),{createDeferredPromise:R}=Ue(),T=wi(),L=globalThis.Blob||i.Blob,G=typeof L<"u"?function(B){return B instanceof L}:function(B){return!1},Y=globalThis.AbortController||Ut().AbortController,{FunctionPrototypeCall:Q}=Pe(),pe=class extends c{constructor(K){super(K),K?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),K?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function K(B,oe){if(_(B))return B;if(g(B))return C({readable:B});if(h(B))return C({writable:B});if(l(B))return C({writable:!1,readable:!1});if(b(B))return C({readable:w.fromWeb(B)});if(v(B))return C({writable:x.fromWeb(B)});if(typeof B=="function"){let{value:he,write:ve,final:z,destroy:ie}=O(B);if(u(he))return T(pe,he,{objectMode:!0,write:ve,final:z,destroy:ie});let m=he?.then;if(typeof m=="function"){let V,ae=Q(m,he,$=>{if($!=null)throw new P("nully","body",$)},$=>{k(V,$)});return V=new pe({objectMode:!0,readable:!1,write:ve,final($){z(async()=>{try{await ae,r.nextTick($,null)}catch(ue){r.nextTick($,ue)}})},destroy:ie})}throw new P("Iterable, AsyncIterable or AsyncFunction",oe,he)}if(G(B))return K(B.arrayBuffer());if(u(B))return T(pe,B,{objectMode:!0,writable:!1});if(b(B?.readable)&&v(B?.writable))return pe.fromWeb(B);if(typeof B?.writable=="object"||typeof B?.readable=="object"){let he=B!=null&&B.readable?g(B?.readable)?B?.readable:K(B.readable):void 0,ve=B!=null&&B.writable?h(B?.writable)?B?.writable:K(B.writable):void 0;return C({readable:he,writable:ve})}let le=B?.then;if(typeof le=="function"){let he;return Q(le,B,ve=>{ve!=null&&he.push(ve),he.push(null)},ve=>{k(he,ve)}),he=new pe({objectMode:!0,writable:!1,read(){}})}throw new F(oe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],B)};function O(K){let{promise:B,resolve:oe}=R(),le=new Y,he=le.signal;return{value:K(async function*(){for(;;){let z=B;B=null;let{chunk:ie,done:m,cb:V}=await z;if(r.nextTick(V),m)return;if(he.aborted)throw new A(void 0,{cause:he.reason});({promise:B,resolve:oe}=R()),yield ie}}(),{signal:he}),write(z,ie,m){let V=oe;oe=null,V({chunk:z,done:!1,cb:m})},final(z){let ie=oe;oe=null,ie({done:!0,cb:z})},destroy(z,ie){le.abort(),ie(z)}}}function C(K){let B=K.readable&&typeof K.readable.read!="function"?w.wrap(K.readable):K.readable,oe=K.writable,le=!!n(B),he=!!a(oe),ve,z,ie,m,V;function ae($){let ue=m;m=null,ue?ue($):$&&V.destroy($)}return V=new pe({readableObjectMode:!!(B!=null&&B.readableObjectMode),writableObjectMode:!!(oe!=null&&oe.writableObjectMode),readable:le,writable:he}),he&&(S(oe,$=>{he=!1,$&&k(B,$),ae($)}),V._write=function($,ue,ye){oe.write($,ue)?ye():ve=ye},V._final=function($){oe.end(),z=$},oe.on("drain",function(){if(ve){let $=ve;ve=null,$()}}),oe.on("finish",function(){if(z){let $=z;z=null,$()}})),le&&(S(B,$=>{le=!1,$&&k(B,$),ae($)}),B.on("readable",function(){if(ie){let $=ie;ie=null,$()}}),B.on("end",function(){V.push(null)}),V._read=function(){for(;;){let $=B.read();if($===null){ie=V._read;return}if(!V.push($))return}}),V._destroy=function($,ue){!$&&m!==null&&($=new A),ie=null,ve=null,z=null,m===null?ue($):(m=ue,k(oe,$),k(B,$))},V}}}),Je=Se({"node_modules/readable-stream/lib/internal/streams/duplex.js"(t,e){"use strict";var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:n,ObjectSetPrototypeOf:a}=Pe();e.exports=g;var u=ir(),l=Pr();a(g.prototype,u.prototype),a(g,u);{let v=n(l.prototype);for(let S=0;S<v.length;S++){let A=v[S];g.prototype[A]||(g.prototype[A]=l.prototype[A])}}function g(v){if(!(this instanceof g))return new g(v);u.call(this,v),l.call(this,v),v?(this.allowHalfOpen=v.allowHalfOpen!==!1,v.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),v.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(g.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(v){this._readableState&&this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}});var h;function _(){return h===void 0&&(h={}),h}g.fromWeb=function(v,S){return _().newStreamDuplexFromReadableWritablePair(v,S)},g.toWeb=function(v){return _().newReadableWritablePairFromDuplex(v)};var b;g.from=function(v){return b||(b=$n()),b(v,"body")}}}),vi=Se({"node_modules/readable-stream/lib/internal/streams/transform.js"(t,e){"use strict";var{ObjectSetPrototypeOf:r,Symbol:i}=Pe();e.exports=g;var{ERR_METHOD_NOT_IMPLEMENTED:n}=De().codes,a=Je(),{getHighWaterMark:u}=rr();r(g.prototype,a.prototype),r(g,a);var l=i("kCallback");function g(b){if(!(this instanceof g))return new g(b);let v=b?u(this,b,"readableHighWaterMark",!0):null;v===0&&(b={...b,highWaterMark:null,readableHighWaterMark:v,writableHighWaterMark:b.writableHighWaterMark||0}),a.call(this,b),this._readableState.sync=!1,this[l]=null,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",_)}function h(b){typeof this._flush=="function"&&!this.destroyed?this._flush((v,S)=>{if(v){b?b(v):this.destroy(v);return}S!=null&&this.push(S),this.push(null),b&&b()}):(this.push(null),b&&b())}function _(){this._final!==h&&h.call(this)}g.prototype._final=h,g.prototype._transform=function(b,v,S){throw new n("_transform()")},g.prototype._write=function(b,v,S){let A=this._readableState,F=this._writableState,P=A.length;this._transform(b,v,(k,c)=>{if(k){S(k);return}c!=null&&this.push(c),F.ended||P===A.length||A.length<A.highWaterMark?S():this[l]=S})},g.prototype._read=function(){if(this[l]){let b=this[l];this[l]=null,b()}}}}),Si=Se({"node_modules/readable-stream/lib/internal/streams/passthrough.js"(t,e){"use strict";var{ObjectSetPrototypeOf:r}=Pe();e.exports=n;var i=vi();r(n.prototype,i.prototype),r(n,i);function n(a){if(!(this instanceof n))return new n(a);i.call(this,a)}n.prototype._transform=function(a,u,l){l(null,a)}}}),kr=Se({"node_modules/readable-stream/lib/internal/streams/pipeline.js"(t,e){var r=ht(),{ArrayIsArray:i,Promise:n,SymbolAsyncIterator:a,SymbolDispose:u}=Pe(),l=nt(),{once:g}=Ue(),h=xt(),_=Je(),{aggregateTwoErrors:b,codes:{ERR_INVALID_ARG_TYPE:v,ERR_INVALID_RETURN_VALUE:S,ERR_MISSING_ARGS:A,ERR_STREAM_DESTROYED:F,ERR_STREAM_PREMATURE_CLOSE:P},AbortError:k}=De(),{validateFunction:c,validateAbortSignal:w}=Gt(),{isIterable:x,isReadable:R,isReadableNodeStream:T,isNodeStream:L,isTransformStream:G,isWebStream:Y,isReadableStream:Q,isReadableFinished:pe}=Ze(),O=globalThis.AbortController||Ut().AbortController,C,K,B;function oe($,ue,ye){let we=!1;$.on("close",()=>{we=!0});let me=l($,{readable:ue,writable:ye},q=>{we=!q});return{destroy:q=>{we||(we=!0,h.destroyer($,q||new F("pipe")))},cleanup:me}}function le($){return c($[$.length-1],"streams[stream.length - 1]"),$.pop()}function he($){if(x($))return $;if(T($))return ve($);throw new v("val",["Readable","Iterable","AsyncIterable"],$)}async function*ve($){K||(K=ir()),yield*K.prototype[a].call($)}async function z($,ue,ye,{end:we}){let me,q=null,H=_e=>{if(_e&&(me=_e),q){let j=q;q=null,j()}},ne=()=>new n((_e,j)=>{me?j(me):q=()=>{me?j(me):_e()}});ue.on("drain",H);let be=l(ue,{readable:!1},H);try{ue.writableNeedDrain&&await ne();for await(let _e of $)ue.write(_e)||await ne();we&&(ue.end(),await ne()),ye()}catch(_e){ye(me!==_e?b(me,_e):_e)}finally{be(),ue.off("drain",H)}}async function ie($,ue,ye,{end:we}){G(ue)&&(ue=ue.writable);let me=ue.getWriter();try{for await(let q of $)await me.ready,me.write(q).catch(()=>{});await me.ready,we&&await me.close(),ye()}catch(q){try{await me.abort(q),ye(q)}catch(H){ye(H)}}}function m(...$){return V($,g(le($)))}function V($,ue,ye){if($.length===1&&i($[0])&&($=$[0]),$.length<2)throw new A("streams");let we=new O,me=we.signal,q=ye?.signal,H=[];w(q,"options.signal");function ne(){X(new k)}B=B||Ue().addAbortListener;let be;q&&(be=B(q,ne));let _e,j,N=[],D=0;function ee(J){X(J,--D===0)}function X(J,fe){var ke;if(J&&(!_e||_e.code==="ERR_STREAM_PREMATURE_CLOSE")&&(_e=J),!(!_e&&!fe)){for(;N.length;)N.shift()(_e);(ke=be)===null||ke===void 0||ke[u](),we.abort(),fe&&(_e||H.forEach(f=>f()),r.nextTick(ue,_e,j))}}let Z;for(let J=0;J<$.length;J++){let fe=$[J],ke=J<$.length-1,f=J>0,s=ke||ye?.end!==!1,o=J===$.length-1;if(L(fe)){let d=function(E){E&&E.name!=="AbortError"&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ee(E)};var I=d;if(s){let{destroy:E,cleanup:M}=oe(fe,ke,f);N.push(E),R(fe)&&o&&H.push(M)}fe.on("error",d),R(fe)&&o&&H.push(()=>{fe.removeListener("error",d)})}if(J===0)if(typeof fe=="function"){if(Z=fe({signal:me}),!x(Z))throw new S("Iterable, AsyncIterable or Stream","source",Z)}else x(fe)||T(fe)||G(fe)?Z=fe:Z=_.from(fe);else if(typeof fe=="function"){if(G(Z)){var W;Z=he((W=Z)===null||W===void 0?void 0:W.readable)}else Z=he(Z);if(Z=fe(Z,{signal:me}),ke){if(!x(Z,!0))throw new S("AsyncIterable",`transform[${J-1}]`,Z)}else{var se;C||(C=Si());let d=new C({objectMode:!0}),E=(se=Z)===null||se===void 0?void 0:se.then;if(typeof E=="function")D++,E.call(Z,ge=>{j=ge,ge!=null&&d.write(ge),s&&d.end(),r.nextTick(ee)},ge=>{d.destroy(ge),r.nextTick(ee,ge)});else if(x(Z,!0))D++,z(Z,d,ee,{end:s});else if(Q(Z)||G(Z)){let ge=Z.readable||Z;D++,z(ge,d,ee,{end:s})}else throw new S("AsyncIterable or Promise","destination",Z);Z=d;let{destroy:M,cleanup:U}=oe(Z,!1,!0);N.push(M),o&&H.push(U)}}else if(L(fe)){if(T(Z)){D+=2;let d=ae(Z,fe,ee,{end:s});R(fe)&&o&&H.push(d)}else if(G(Z)||Q(Z)){let d=Z.readable||Z;D++,z(d,fe,ee,{end:s})}else if(x(Z))D++,z(Z,fe,ee,{end:s});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Z);Z=fe}else if(Y(fe)){if(T(Z))D++,ie(he(Z),fe,ee,{end:s});else if(Q(Z)||x(Z))D++,ie(Z,fe,ee,{end:s});else if(G(Z))D++,ie(Z.readable,fe,ee,{end:s});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Z);Z=fe}else Z=_.from(fe)}return(me!=null&&me.aborted||q!=null&&q.aborted)&&r.nextTick(ne),Z}function ae($,ue,ye,{end:we}){let me=!1;if(ue.on("close",()=>{me||ye(new P)}),$.pipe(ue,{end:!1}),we){let H=function(){me=!0,ue.end()};var q=H;pe($)?r.nextTick(H):$.once("end",H)}else ye();return l($,{readable:!0,writable:!1},H=>{let ne=$._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&ne&&ne.ended&&!ne.errored&&!ne.errorEmitted?$.once("end",ye).once("error",ye):ye(H)}),l(ue,{readable:!1,writable:!0},ye)}e.exports={pipelineImpl:V,pipeline:m}}}),xi=Se({"node_modules/readable-stream/lib/internal/streams/compose.js"(t,e){"use strict";var{pipeline:r}=kr(),i=Je(),{destroyer:n}=xt(),{isNodeStream:a,isReadable:u,isWritable:l,isWebStream:g,isTransformStream:h,isWritableStream:_,isReadableStream:b}=Ze(),{AbortError:v,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:A}}=De(),F=nt();e.exports=function(...k){if(k.length===0)throw new A("streams");if(k.length===1)return i.from(k[0]);let c=[...k];if(typeof k[0]=="function"&&(k[0]=i.from(k[0])),typeof k[k.length-1]=="function"){let C=k.length-1;k[C]=i.from(k[C])}for(let C=0;C<k.length;++C)if(!(!a(k[C])&&!g(k[C]))){if(C<k.length-1&&!(u(k[C])||b(k[C])||h(k[C])))throw new S(`streams[${C}]`,c[C],"must be readable");if(C>0&&!(l(k[C])||_(k[C])||h(k[C])))throw new S(`streams[${C}]`,c[C],"must be writable")}let w,x,R,T,L;function G(C){let K=T;T=null,K?K(C):C?L.destroy(C):!O&&!pe&&L.destroy()}let Y=k[0],Q=r(k,G),pe=!!(l(Y)||_(Y)||h(Y)),O=!!(u(Q)||b(Q)||h(Q));if(L=new i({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(Q!=null&&Q.readableObjectMode),writable:pe,readable:O}),pe){if(a(Y))L._write=function(K,B,oe){Y.write(K,B)?oe():w=oe},L._final=function(K){Y.end(),x=K},Y.on("drain",function(){if(w){let K=w;w=null,K()}});else if(g(Y)){let B=(h(Y)?Y.writable:Y).getWriter();L._write=async function(oe,le,he){try{await B.ready,B.write(oe).catch(()=>{}),he()}catch(ve){he(ve)}},L._final=async function(oe){try{await B.ready,B.close().catch(()=>{}),x=oe}catch(le){oe(le)}}}let C=h(Q)?Q.readable:Q;F(C,()=>{if(x){let K=x;x=null,K()}})}if(O){if(a(Q))Q.on("readable",function(){if(R){let C=R;R=null,C()}}),Q.on("end",function(){L.push(null)}),L._read=function(){for(;;){let C=Q.read();if(C===null){R=L._read;return}if(!L.push(C))return}};else if(g(Q)){let K=(h(Q)?Q.readable:Q).getReader();L._read=async function(){for(;;)try{let{value:B,done:oe}=await K.read();if(!L.push(B))return;if(oe){L.push(null);return}}catch{return}}}}return L._destroy=function(C,K){!C&&T!==null&&(C=new v),R=null,w=null,x=null,T===null?K(C):(T=K,a(Q)&&n(Q,C))},L}}}),Wn=Se({"node_modules/readable-stream/lib/internal/streams/operators.js"(t,e){"use strict";var r=globalThis.AbortController||Ut().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:u},AbortError:l}=De(),{validateAbortSignal:g,validateInteger:h,validateObject:_}=Gt(),b=Pe().Symbol("kWeak"),v=Pe().Symbol("kResistStopPropagation"),{finished:S}=nt(),A=xi(),{addAbortSignalNoValidate:F}=tr(),{isWritable:P,isNodeStream:k}=Ze(),{deprecate:c}=Ue(),{ArrayPrototypePush:w,Boolean:x,MathFloor:R,Number:T,NumberIsNaN:L,Promise:G,PromiseReject:Y,PromiseResolve:Q,PromisePrototypeThen:pe,Symbol:O}=Pe(),C=O("kEmpty"),K=O("kEof");function B(q,H){if(H!=null&&_(H,"options"),H?.signal!=null&&g(H.signal,"options.signal"),k(q)&&!P(q))throw new i("stream",q,"must be writable");let ne=A(this,q);return H!=null&&H.signal&&F(H.signal,ne),ne}function oe(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);H!=null&&_(H,"options"),H?.signal!=null&&g(H.signal,"options.signal");let ne=1;H?.concurrency!=null&&(ne=R(H.concurrency));let be=ne-1;return H?.highWaterMark!=null&&(be=R(H.highWaterMark)),h(ne,"options.concurrency",1),h(be,"options.highWaterMark",0),be+=ne,async function*(){let j=Ue().AbortSignalAny([H?.signal].filter(x)),N=this,D=[],ee={signal:j},X,Z,I=!1,W=0;function se(){I=!0,J()}function J(){W-=1,fe()}function fe(){Z&&!I&&W<ne&&D.length<be&&(Z(),Z=null)}async function ke(){try{for await(let f of N){if(I)return;if(j.aborted)throw new l;try{if(f=q(f,ee),f===C)continue;f=Q(f)}catch(s){f=Y(s)}W+=1,pe(f,J,se),D.push(f),X&&(X(),X=null),!I&&(D.length>=be||W>=ne)&&await new G(s=>{Z=s})}D.push(K)}catch(f){let s=Y(f);pe(s,J,se),D.push(s)}finally{I=!0,X&&(X(),X=null)}}ke();try{for(;;){for(;D.length>0;){let f=await D[0];if(f===K)return;if(j.aborted)throw new l;f!==C&&(yield f),D.shift(),fe()}await new G(f=>{X=f})}}finally{I=!0,Z&&(Z(),Z=null)}}.call(this)}function le(q=void 0){return q!=null&&_(q,"options"),q?.signal!=null&&g(q.signal,"options.signal"),async function*(){let ne=0;for await(let _e of this){var be;if(q!=null&&(be=q.signal)!==null&&be!==void 0&&be.aborted)throw new l({cause:q.signal.reason});yield[ne++,_e]}}.call(this)}async function he(q,H=void 0){for await(let ne of m.call(this,q,H))return!0;return!1}async function ve(q,H=void 0){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);return!await he.call(this,async(...ne)=>!await q(...ne),H)}async function z(q,H){for await(let ne of m.call(this,q,H))return ne}async function ie(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);async function ne(be,_e){return await q(be,_e),C}for await(let be of oe.call(this,ne,H));}function m(q,H){if(typeof q!="function")throw new n("fn",["Function","AsyncFunction"],q);async function ne(be,_e){return await q(be,_e)?be:C}return oe.call(this,ne,H)}var V=class extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ae(q,H,ne){var be;if(typeof q!="function")throw new n("reducer",["Function","AsyncFunction"],q);ne!=null&&_(ne,"options"),ne?.signal!=null&&g(ne.signal,"options.signal");let _e=arguments.length>1;if(ne!=null&&(be=ne.signal)!==null&&be!==void 0&&be.aborted){let X=new l(void 0,{cause:ne.signal.reason});throw this.once("error",()=>{}),await S(this.destroy(X)),X}let j=new r,N=j.signal;if(ne!=null&&ne.signal){let X={once:!0,[b]:this,[v]:!0};ne.signal.addEventListener("abort",()=>j.abort(),X)}let D=!1;try{for await(let X of this){var ee;if(D=!0,ne!=null&&(ee=ne.signal)!==null&&ee!==void 0&&ee.aborted)throw new l;_e?H=await q(H,X,{signal:N}):(H=X,_e=!0)}if(!D&&!_e)throw new V}finally{j.abort()}return H}async function $(q){q!=null&&_(q,"options"),q?.signal!=null&&g(q.signal,"options.signal");let H=[];for await(let be of this){var ne;if(q!=null&&(ne=q.signal)!==null&&ne!==void 0&&ne.aborted)throw new l(void 0,{cause:q.signal.reason});w(H,be)}return H}function ue(q,H){let ne=oe.call(this,q,H);return async function*(){for await(let _e of ne)yield*_e}.call(this)}function ye(q){if(q=T(q),L(q))return 0;if(q<0)throw new u("number",">= 0",q);return q}function we(q,H=void 0){return H!=null&&_(H,"options"),H?.signal!=null&&g(H.signal,"options.signal"),q=ye(q),async function*(){var be;if(H!=null&&(be=H.signal)!==null&&be!==void 0&&be.aborted)throw new l;for await(let j of this){var _e;if(H!=null&&(_e=H.signal)!==null&&_e!==void 0&&_e.aborted)throw new l;q--<=0&&(yield j)}}.call(this)}function me(q,H=void 0){return H!=null&&_(H,"options"),H?.signal!=null&&g(H.signal,"options.signal"),q=ye(q),async function*(){var be;if(H!=null&&(be=H.signal)!==null&&be!==void 0&&be.aborted)throw new l;for await(let j of this){var _e;if(H!=null&&(_e=H.signal)!==null&&_e!==void 0&&_e.aborted)throw new l;if(q-- >0&&(yield j),q<=0)return}}.call(this)}e.exports.streamReturningOperators={asIndexedPairs:c(le,"readable.asIndexedPairs will be removed in a future version."),drop:we,filter:m,flatMap:ue,map:oe,take:me,compose:B},e.exports.promiseReturningOperators={every:ve,forEach:ie,reduce:ae,toArray:$,some:he,find:z}}}),Ei=Se({"node_modules/readable-stream/lib/stream/promises.js"(t,e){"use strict";var{ArrayPrototypePop:r,Promise:i}=Pe(),{isIterable:n,isNodeStream:a,isWebStream:u}=Ze(),{pipelineImpl:l}=kr(),{finished:g}=nt();Ri();function h(..._){return new i((b,v)=>{let S,A,F=_[_.length-1];if(F&&typeof F=="object"&&!a(F)&&!n(F)&&!u(F)){let P=r(_);S=P.signal,A=P.end}l(_,(P,k)=>{P?v(P):b(k)},{signal:S,end:A})})}e.exports={finished:g,pipeline:h}}}),Ri=Se({"node_modules/readable-stream/lib/stream.js"(t,e){"use strict";var{Buffer:r}=Ye(),{ObjectDefineProperty:i,ObjectKeys:n,ReflectApply:a}=Pe(),{promisify:{custom:u}}=Ue(),{streamReturningOperators:l,promiseReturningOperators:g}=Wn(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=De(),_=xi(),{setDefaultHighWaterMark:b,getDefaultHighWaterMark:v}=rr(),{pipeline:S}=kr(),{destroyer:A}=xt(),F=nt(),P=Ei(),k=Ze(),c=e.exports=Nr().Stream;c.isDestroyed=k.isDestroyed,c.isDisturbed=k.isDisturbed,c.isErrored=k.isErrored,c.isReadable=k.isReadable,c.isWritable=k.isWritable,c.Readable=ir();for(let x of n(l)){let R=function(...L){if(new.target)throw h();return c.Readable.from(a(T,this,L))},T=l[x];i(R,"name",{__proto__:null,value:T.name}),i(R,"length",{__proto__:null,value:T.length}),i(c.Readable.prototype,x,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}for(let x of n(g)){let R=function(...L){if(new.target)throw h();return a(T,this,L)},T=g[x];i(R,"name",{__proto__:null,value:T.name}),i(R,"length",{__proto__:null,value:T.length}),i(c.Readable.prototype,x,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}c.Writable=Pr(),c.Duplex=Je(),c.Transform=vi(),c.PassThrough=Si(),c.pipeline=S;var{addAbortSignal:w}=tr();c.addAbortSignal=w,c.finished=F,c.destroy=A,c.compose=_,c.setDefaultHighWaterMark=b,c.getDefaultHighWaterMark=v,i(c,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return P}}),i(S,u,{__proto__:null,enumerable:!0,get(){return P.pipeline}}),i(F,u,{__proto__:null,enumerable:!0,get(){return P.finished}}),c.Stream=c,c._isUint8Array=function(R){return R instanceof Uint8Array},c._uint8ArrayToBuffer=function(R){return r.from(R.buffer,R.byteOffset,R.byteLength)}}}),Lr=Se({"node_modules/readable-stream/lib/ours/browser.js"(t,e){"use strict";var r=Ri(),i=Ei(),n=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=n,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=r.Stream,e.exports.default=e.exports}});function Gn(t){return new zn(t)}var Ai="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",qn={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",solid:"http://www.w3.org/ns/solid/terms#",schema:"http://schema.org/",vcard:"http://www.w3.org/2006/vcard/ns#"},zn=class{constructor(t){this.prefixes={...qn,...t?.prefixes},this.prefixes.xsd||(this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#"),this.parser=t?.parser,this.writer=t?.writer,this.sources=Object.create(null),this.separator=t?.separator??"$"}parse(t,e,r){let{quads:i,prefixes:n}=this.parser(t,e,r);if(n)for(let a in n){let u=new URL(n[a],e).href;this.prefixes[a]||(this.prefixes[a]=u)}return this.sources[e]=new Hn(i,e,r,n,this),this.sources[e]}setType(t,e){if(!e)return t;if(typeof t=="string"?t=new String(t):typeof result=="number"&&(t=new Number(t)),typeof t!="object")throw new Error("cannot set type on ",t,e);return t.type=e,t}getType(t){return t&&typeof t=="object"?t.type:null}},Hn=class{#e=Object.create(null);constructor(t,e,r,i,n){this.mimetype=r,this.url=e,this.prefixes=i,this.context=n,this.subjects=Object.create(null);for(let a of t){let u;if(a.subject.termType=="BlankNode")switch(this.shortURI(a.predicate.id,":")){case"rdf:first":if(u=this.addCollection(a.subject.id),this.shortURI(a.object.id,":")!="rdf:nil"){let h=this.getValue(a.object);h&&u.push(h)}continue;case"rdf:rest":this.#e[a.object.id]=this.#e[a.subject.id];continue;default:u=this.addBlankNode(a.subject.id);break}else u=this.addNamedNode(a.subject.id);u.addPredicate(a.predicate.id,a.object)}this.subjects[e]?this.primary=this.subjects[e]:this.primary=null,Object.defineProperty(this,"data",{get(){return Object.values(this.subjects)}})}addNamedNode(t){let e=new URL(t,this.url).href;return this.subjects[e]||(this.subjects[e]=new Er(e,this)),this.subjects[e]}addBlankNode(t){return this.#e[t]||(this.#e[t]=new Zt(this)),this.#e[t]}addCollection(t){return this.#e[t]||(this.#e[t]=new Rr(this)),this.#e[t]}write(){return this.context.writer(this)}get(t){return this.subjects[this.fullURI(t)]}fullURI(t,e=null){e||(e=this.context.separator);let[r,i]=t.split(e);return i?this.prefixes[r]+i:t}shortURI(t,e=null){e||(e=this.context.separator);for(let r in this.context.prefixes)if(t.startsWith(this.context.prefixes[r]))return r+e+t.substring(this.context.prefixes[r].length);return this.url&&t.startsWith(this.url)?t.substring(this.url.length):t}setType(t,e){let r=this.shortURI(e);return this.context.setType(t,r)}getType(t){return this.context.getType(t)}setLanguage(t,e){if(typeof t=="string"?t=new String(t):typeof result=="number"&&(t=new Number(t)),typeof t!="object")throw new Error("cannot set language on ",t);return t.language=e,t}getValue(t){let e;if(t.termType=="Literal"){e=t.value;let r=t.datatype?.id;r&&(e=this.setType(e,r));let i=t.language;i&&(e=this.setLanguage(e,i))}else t.termType=="BlankNode"?e=this.addBlankNode(t.id):e=this.addNamedNode(t.id);return e}},Zt=class{constructor(t){Object.defineProperty(this,"graph",{value:t,writable:!1,enumerable:!1})}addPredicate(t,e){if(t.id&&(t=t.id),t==Ai){let r=this.graph.shortURI(e.id);this.addType(r)}else{let r=this.graph.getValue(e);t=this.graph.shortURI(t),this[t]?Array.isArray(this[t])?this[t].push(r):this[t]=[this[t],r]:this[t]=r}}addType(t){this.a?(Array.isArray(this.a)||(this.a=[this.a]),this.a.push(t)):this.a=t}},Er=class extends Zt{constructor(t,e){super(e),Object.defineProperty(this,"a",{writable:!0,enumerable:!1}),Object.defineProperty(this,"id",{value:t,writable:!1,enumerable:!1})}},Rr=class extends Array{constructor(t,e){super(),Object.defineProperty(this,"graph",{value:e,writable:!1,enumerable:!1})}},Qn=Wt(Ye()),Vn=Wt(Cn()),Lt="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ot="http://www.w3.org/2001/XMLSchema#",vr="http://www.w3.org/2000/10/swap/",Ce={xsd:{decimal:`${Ot}decimal`,boolean:`${Ot}boolean`,double:`${Ot}double`,integer:`${Ot}integer`,string:`${Ot}string`},rdf:{type:`${Lt}type`,nil:`${Lt}nil`,first:`${Lt}first`,rest:`${Lt}rest`,langString:`${Lt}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${vr}reify#forSome`,forAll:`${vr}reify#forAll`},log:{implies:`${vr}log#implies`}},{xsd:Jt}=Ce,Kn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ci={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Jn=/[\x00-\x20<>\\"\{\}\|\^\`]/,Yn={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Zn=/$0^/,Ii=class{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(let e in this)!(e in Yn)&&this[e]instanceof RegExp&&(this[e]=Zn)}else this._n3Mode=t.n3!==!1;this.comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,e){let r=this._input,i=r.length;for(;;){let u,l;for(;u=this._newline.exec(r);)this.comments&&(l=this._comment.exec(u[0]))&&n("comment",l[1],"",this._line,u[0].length),r=r.substr(u[0].length,r.length),i=r.length,this._line++;if(!u&&(u=this._whitespace.exec(r))&&(r=r.substr(u[0].length,r.length)),this._endOfFile.test(r))return e&&(this.comments&&(l=this._comment.exec(r))&&n("comment",l[1],"",this._line,r.length),r=null,n("eof","","",this._line,0)),this._input=r;let g=this._line,h=r[0],_="",b="",v="",S=null,A=0,F=!1;switch(h){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){F=!0;break}}else{this._n3Mode&&(A=1,_="^");break}case"<":if(S=this._unescapedIri.exec(r))_="IRI",b=S[1];else if(S=this._iri.exec(r)){if(b=this._unescape(S[1]),b===null||Jn.test(b))return a(this);_="IRI"}else r.length>1&&r[1]==="<"?(_="<<",A=2):this._n3Mode&&r.length>1&&r[1]==="="&&(_="inverse",A=2,b=">");break;case">":r.length>1&&r[1]===">"&&(_=">>",A=2);break;case"_":((S=this._blank.exec(r))||e&&(S=this._blank.exec(`${r} `)))&&(_="blank",v="_",b=S[1]);break;case'"':if(S=this._simpleQuotedString.exec(r))b=S[1];else if({value:b,matchLength:A}=this._parseLiteral(r),b===null)return a(this);(S!==null||A!==0)&&(_="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(S=this._simpleApostropheString.exec(r))b=S[1];else if({value:b,matchLength:A}=this._parseLiteral(r),b===null)return a(this);(S!==null||A!==0)&&(_="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(S=this._variable.exec(r))&&(_="var",b=S[0]);break;case"@":this._previousMarker==="literal"&&(S=this._langcode.exec(r))?(_="langcode",b=S[1]):(S=this._keyword.exec(r))&&(_=S[0]);break;case".":if(r.length===1?e:r[1]<"0"||r[1]>"9"){_=".",A=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(S=this._number.exec(r)||e&&(S=this._number.exec(`${r} `)))&&(_="literal",b=S[0],v=typeof S[1]=="string"?Jt.double:typeof S[2]=="string"?Jt.decimal:Jt.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(S=this._sparqlKeyword.exec(r))?_=S[0].toUpperCase():F=!0;break;case"f":case"t":(S=this._boolean.exec(r))?(_="literal",b=S[0],v=Jt.boolean):F=!0;break;case"a":(S=this._shortPredicates.exec(r))?(_="abbreviation",b="a"):F=!0;break;case"=":this._n3Mode&&r.length>1&&(_="abbreviation",r[1]!==">"?(A=1,b="="):(A=2,b=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(A=1,_=h);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(_="{|",A=2):(_=h,A=1));break;case"|":r.length>=2&&r[1]==="}"&&(_="|}",A=2);break;default:F=!0}if(F&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(S=this._prefix.exec(r))?(_="prefix",b=S[1]||""):((S=this._prefixed.exec(r))||e&&(S=this._prefixed.exec(`${r} `)))&&(_="prefixed",v=S[1]||"",b=this._unescape(S[2]))),this._previousMarker==="^^")switch(_){case"prefixed":_="type";break;case"IRI":_="typeIRI";break;default:_=""}if(!_)return e||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?a(this):this._input=r;let P=A||S[0].length,k=n(_,b,v,g,P);this.previousToken=k,this._previousMarker=_,r=r.substr(P,r.length)}function n(u,l,g,h,_){let b=r?i-r.length:i,v=b+_,S={type:u,value:l,prefix:g,line:h,start:b,end:v};return t(null,S),S}function a(u){t(u._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(t){let e=!1,r=t.replace(Kn,(i,n,a,u)=>{if(typeof n=="string")return String.fromCharCode(Number.parseInt(n,16));if(typeof a=="string"){let l=Number.parseInt(a,16);return l<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return u in ci?ci[u]:(e=!0,"")});return e?null:r}_parseLiteral(t){if(t.length>=3){let e=t.match(/^(?:"""|"|'''|'|)/)[0],r=e.length,i=Math.max(this._literalClosingPos,r);for(;(i=t.indexOf(e,i))>0;){let n=0;for(;t[i-n-1]==="\\";)n++;if(n%2===0){let a=t.substring(r,i),u=a.split(/\r\n|\r|\n/).length-1,l=i+r;if(r===1&&u!==0||r===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(a),matchLength:l}}i++}this._literalClosingPos=t.length-r+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;let e=new Error(`Unexpected "${t}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,e){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof e=="function")(0,Vn.default)(()=>this._tokenizeToEnd(e,!0));else{let r=[],i;if(this._tokenizeToEnd((n,a)=>n?i=n:r.push(a),!0),i)throw i;return r}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=Qn.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(e,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(e,!0)}),t.on("error",e)}},{rdf:Xn,xsd:ct}=Ce,Et,es=0,Ar={namedNode:Li,blankNode:Oi,variable:Mi,literal:Bi,defaultGraph:ts,quad:Ir,triple:Ir,fromTerm:Ct,fromQuad:Ci},it=Ar,Qe=class Ti{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Ti?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},Or=class extends Qe{get termType(){return"NamedNode"}},Dt=class ji extends Qe{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new Or(this.datatypeString)}get datatypeString(){let e=this.id,r=e.lastIndexOf('"')+1,i=r<e.length?e[r]:"";return i==="^"?e.substr(r+2):i!=="@"?ct.string:Xn.langString}equals(e){return e instanceof ji?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},Ni=class extends Qe{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Pi=class extends Qe{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},ki=class extends Qe{constructor(){return super(""),Et||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};Et=new ki;function St(t,e,r){if(e=e||Ar,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Ar)return new Dt(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));let i=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,i-1),t[i+1]==="@"?t.substr(i+2):e.namedNode(t.substr(i+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(St(t[0],e,!0),St(t[1],e,!0),St(t[2],e,!0),t[3]&&St(t[3],e,!0))}function dt(t,e){if(typeof t=="string")return t;if(t instanceof Qe&&t.termType!=="Quad")return t.id;if(!t)return Et.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==ct.string?`^^${t.datatype.value}`:""}`;case"Quad":let r=[dt(t.subject,!0),dt(t.predicate,!0),dt(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(dt(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}var Xt=class extends Qe{constructor(t,e,r,i){super(""),this._subject=t,this._predicate=e,this._object=r,this._graph=i||Et}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}};function Li(t){return new Or(t)}function Oi(t){return new Ni(t||`n3-${es++}`)}function Bi(t,e){if(typeof e=="string")return new Dt(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=ct.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?ct.integer:ct.double:(r=ct.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===ct.string?new Dt(`"${t}"`):new Dt(`"${t}"^^${r}`)}function Mi(t){return new Pi(t)}function ts(){return Et}function Ir(t,e,r,i){return new Xt(t,e,r,i)}function Ct(t){if(t instanceof Qe)return t;switch(t.termType){case"NamedNode":return Li(t.value);case"BlankNode":return Oi(t.value);case"Variable":return Mi(t.value);case"DefaultGraph":return Et;case"Literal":return Bi(t.value,t.language||t.datatype);case"Quad":return Ci(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function Ci(t){if(t instanceof Xt)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Ir(Ct(t.subject),Ct(t.predicate),Ct(t.object),Ct(t.graph))}var di=0,Br=class{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&Di(this,t.factory);let e=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(e),i=/trig/.test(e),n=/triple/.test(e),a=/quad/.test(e),u=this._n3Mode=/n3/.test(e),l=n||a;(this._supportsNamedGraphs=!(r||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||n||u),this._supportsRDFStar=e===""||/star|\*$/.test(e),l&&(this._resolveRelativeIRI=g=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new Ii({lineMode:l,n3:u}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){di=0}_setBase(t){if(!t)this._base="",this._basePath="";else{let e=t.indexOf("#");e>=0&&(t=t.substr(0,e)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,e,r,i,n){let a=this._n3Mode;this._contextStack.push({type:t,subject:r,predicate:i,object:n,graph:e,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,e){let r=this._contextStack.pop();if(!r||r.type!==t)return this._error(`Unexpected ${e.type}`,e);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,e){let r;switch(t.type){case"IRI":case"typeIRI":let i=this._resolveIRI(t.value);if(i===null)return this._error("Invalid IRI",t);r=this._factory.namedNode(i);break;case"type":case"prefixed":let n=this._prefixes[t.prefix];if(n===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);r=this._factory.namedNode(n+t.value);break;case"blank":r=this._factory.blankNode(this._prefixes[t.prefix]+t.value);break;case"var":r=this._factory.variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!e&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){let e=t.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${e}`,t):(this._subject=null,e==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);let e=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let e=null,r=null,i=this._readListItem,n=this._subject,a=this._contextStack,u=a[a.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=e=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,i=this._readListItemDataTypeOrLang):(e=this._factory.literal(t.value,this._factory.namedNode(t.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((e=this._readEntity(t))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),n===null?u.predicate===null?u.subject=r:u.object=r:this._emit(n,this.RDF_REST,r,this._graph),e!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,e,this._graph)}return i}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let e=this._factory.literal(this._literalValue);switch(t.type){case"type":case"typeIRI":let r=this._readEntity(t);if(r===void 0)return;e=this._factory.literal(this._literalValue,r),t=null;break;case"langcode":e=this._factory.literal(this._literalValue,t.value),t=null;break}return{token:t,literal:e}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,e){let r=this._completeLiteral(t);if(r)return this._object=r.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let e,r=this._graph,i=this._subject,n=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,n&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",t);let a=this._predicate,u=this._object;this._subject=this._factory.quad(i,a,u,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",t);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(t))!==void 0){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(i!==null){let a=this._predicate,u=this._object;n?this._emit(u,a,i,r):this._emit(i,a,u,r)}return e}_readBlankNodePunctuation(t){let e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);let e=this._readEntity(t);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(t){let e=t.type==="IRI"&&this._resolveIRI(t.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let e;switch(t.type){case"IRI":case"prefixed":if((e=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let e=this._contextStack,r=e.length&&e[e.length-1];if(r&&r.type==="item"){let i=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let e,r,i=this._factory.blankNode();if((r=this._readEntity(t))!==void 0)return this._predicate===null?(e=this._subject,this._subject=i):(e=this._object,this._object=i),this._emit(e,r,i,this._graph),this._readPath}_readBackwardPath(t){let e=this._factory.blankNode(),r,i;if((r=this._readEntity(t))!==void 0)return this._predicate===null?(i=this._subject,this._subject=e):(i=this._object,this._object=e),this._emit(e,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);let e=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){let t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,e,r,i){this._callback(null,this._factory.quad(t,e,r,i||this.DEFAULTGRAPH))}_error(t,e){let r=new Error(`${t} on line ${e.line}.`);r.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=Yt}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;let e=t.length,r="",i=-1,n=-1,a=0,u="/";for(;i<e;){switch(u){case":":if(n<0&&t[++i]==="/"&&t[++i]==="/")for(;(n=i+1)<e&&t[n]!=="/";)i=n;break;case"?":case"#":i=e;break;case"/":if(t[i+1]===".")switch(u=t[++i+1],u){case"/":r+=t.substring(a,i-1),a=i+1;break;case void 0:case"?":case"#":return r+t.substring(a,i)+t.substr(i+1);case".":if(u=t[++i+1],u===void 0||u==="/"||u==="?"||u==="#"){if(r+=t.substring(a,i-2),(a=r.lastIndexOf("/"))>=n&&(r=r.substr(0,a)),u!=="/")return`${r}/${t.substr(i+1)}`;a=i+1}}}u=t[++i]}return r+t.substring(a)}parse(t,e,r){let i,n,a;if(e&&(e.onQuad||e.onPrefix||e.onComment)?(i=e.onQuad,n=e.onPrefix,a=e.onComment):(i=e,n=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${di++}_`,this._prefixCallback=n||Yt,this._inversePredicate=!1,this._quantified=Object.create(null),!i){let l=[],g;if(this._callback=(h,_)=>{h?g=h:_&&l.push(_)},this._lexer.tokenize(t).every(h=>this._readCallback=this._readCallback(h)),g)throw g;return l}let u=(l,g)=>{l!==null?(this._callback(l),this._callback=Yt):this._readCallback&&(this._readCallback=this._readCallback(g))};a&&(this._lexer.comments=!0,u=(l,g)=>{l!==null?(this._callback(l),this._callback=Yt):this._readCallback&&(g.type==="comment"?a(g.value):this._readCallback=this._readCallback(g))}),this._callback=i,this._lexer.tokenize(t,u)}};function Yt(){}function Di(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(Ce.rdf.first),t.RDF_REST=e.namedNode(Ce.rdf.rest),t.RDF_NIL=e.namedNode(Ce.rdf.nil),t.N3_FORALL=e.namedNode(Ce.r.forAll),t.N3_FORSOME=e.namedNode(Ce.r.forSome),t.ABBREVIATIONS={a:e.namedNode(Ce.rdf.type),"=":e.namedNode(Ce.owl.sameAs),">":e.namedNode(Ce.log.implies)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}Di(Br.prototype,it);var Fi={};Ln(Fi,{inDefaultGraph:()=>os,isBlankNode:()=>is,isDefaultGraph:()=>$t,isLiteral:()=>ns,isNamedNode:()=>rs,isVariable:()=>ss,prefix:()=>as,prefixes:()=>Ui});function rs(t){return!!t&&t.termType==="NamedNode"}function is(t){return!!t&&t.termType==="BlankNode"}function ns(t){return!!t&&t.termType==="Literal"}function ss(t){return!!t&&t.termType==="Variable"}function $t(t){return!!t&&t.termType==="DefaultGraph"}function os(t){return $t(t.graph)}function as(t,e){return Ui({"":t.value||t},e)("")}function Ui(t,e){let r=Object.create(null);for(let n in t)i(n,t[n]);e=e||it;function i(n,a){if(typeof a=="string"){let u=Object.create(null);r[n]=l=>u[l]||(u[l]=e.namedNode(a+l))}else if(!(n in r))throw new Error(`Unknown prefix: ${n}`);return r[n]}return i}var Bt=it.defaultGraph(),{rdf:ls,xsd:wt}=Ce,hi=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,pi=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,us={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},Mt=class extends Qe{equals(t){return t===this}},nr=class{constructor(t,e){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(e=t,t=null),e=e||{},this._lists=e.lists,t)this._outputStream=t,this._endStream=e.end===void 0?!0:!!e.end;else{let r="";this._outputStream={write(i,n,a){r+=i,a&&a()},end:i=>{i&&i(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(e.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Bt,this._prefixIRIs=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),e.baseIRI&&(this._baseMatcher=new RegExp(`^${bi(e.baseIRI)}${e.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=e.baseIRI.length))}get _inDefaultGraph(){return Bt.equals(this._graph)}_write(t,e){this._outputStream.write(t,"utf8",e)}_writeQuad(t,e,r,i,n){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Bt.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),t.equals(this._subject)?e.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,n):this._write(`;
    ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(r)}`,n):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(r)}`,n)}catch(a){n&&n(a)}}_writeQuadLine(t,e,r,i,n){delete this._prefixMatch,this._write(this.quadToString(t,e,r,i),n)}quadToString(t,e,r,i){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(e)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(t){let e="";for(let r of t)e+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return e}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let e=t.value;this._baseMatcher&&this._baseMatcher.test(e)&&(e=e.substr(this._baseLength)),hi.test(e)&&(e=e.replace(pi,_i));let r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:`<${e}>`}_encodeLiteral(t){let e=t.value;if(hi.test(e)&&(e=e.replace(pi,_i)),t.language)return`"${e}"@${t.language}`;if(this._lineMode){if(t.datatype.value===wt.string)return`"${e}"`}else switch(t.datatype.value){case wt.string:return`"${e}"`;case wt.boolean:if(e==="true"||e==="false")return e;break;case wt.integer:if(/^[+-]?\d+$/.test(e))return e;break;case wt.decimal:if(/^[+-]?\d*\.\d+$/.test(e))return e;break;case wt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(e))return e;break}return`"${e}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===ls.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:e,object:r,graph:i}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(e)} ${this._encodeObject(r)}${$t(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,e,r,i,n){r===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,e):typeof i=="function"?this._writeQuad(t,e,r,Bt,i):this._writeQuad(t,e,r,i||Bt,n)}addQuads(t){for(let e=0;e<t.length;e++)this.addQuad(t[e])}addPrefix(t,e,r){let i={};i[t]=e,this.addPrefixes(i,r)}addPrefixes(t,e){if(!this._prefixIRIs)return e&&e();let r=!1;for(let i in t){let n=t[i];typeof n!="string"&&(n=n.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[n]=i+=":",this._write(`@prefix ${i} <${n}>.
`)}if(r){let i="",n="";for(let a in this._prefixIRIs)i+=i?`|${a}`:a,n+=(n?"|":"")+this._prefixIRIs[a];i=bi(i,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${n})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",e)}blank(t,e){let r=t,i,n;switch(t===void 0?r=[]:t.termType?r=[{predicate:t,object:e}]:"length"in t||(r=[t]),n=r.length){case 0:return new Mt("[]");case 1:if(i=r[0],!(i.object instanceof Mt))return new Mt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let a="[";for(let u=0;u<n;u++)i=r[u],i.predicate.equals(t)?a+=`, ${this._encodeObject(i.object)}`:(a+=`${(u?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,t=i.predicate);return new Mt(`${a}
]`)}}list(t){let e=t&&t.length||0,r=new Array(e);for(let i=0;i<e;i++)r[i]=this._encodeObject(t[i]);return new Mt(`(${r.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let e=t&&((r,i)=>{e=null,t(r,i)});if(this._endStream)try{return this._outputStream.end(e)}catch{}e&&e()}};function _i(t){let e=us[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function bi(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var $i=Wt(Lr()),Sr=Symbol("iter");function Ft(t,e,r=4){if(r===0)return Object.assign(t,e);for(let i in e)t[i]=Ft(t[i]||Object.create(null),e[i],r-1);return t}function Wi(t,e,r=4){let i=!1;for(let n in t)if(n in e){let a=r===0?null:Wi(t[n],e[n],r-1);if(a!==!1)i=i||Object.create(null),i[n]=a;else if(r===3)return!1}return i}function Gi(t,e,r=4){let i=!1;for(let n in t)if(!(n in e))i=i||Object.create(null),i[n]=r===0?null:Ft({},t[n],r-1);else if(r!==0){let a=Gi(t[n],e[n],r-1);if(a!==!1)i=i||Object.create(null),i[n]=a;else if(r===3)return!1}return i}var qi=class{constructor(t={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=t.factory||it}_termFromId(t){if(t[0]==="."){let e=this._entities,r=t.split(".");return this._factory.quad(this._termFromId(e[r[1]]),this._termFromId(e[r[2]]),this._termFromId(e[r[3]]),r[4]&&this._termFromId(e[r[4]]))}return St(t,this._factory)}_termToNumericId(t){if(t.termType==="Quad"){let e=this._termToNumericId(t.subject),r=this._termToNumericId(t.predicate),i=this._termToNumericId(t.object),n;return e&&r&&i&&($t(t.graph)||(n=this._termToNumericId(t.graph)))&&this._ids[n?`.${e}.${r}.${i}.${n}`:`.${e}.${r}.${i}`]}return this._ids[dt(t)]}_termToNewNumericId(t){let e=t&&t.termType==="Quad"?`.${this._termToNewNumericId(t.subject)}.${this._termToNewNumericId(t.predicate)}.${this._termToNewNumericId(t.object)}${$t(t.graph)?"":`.${this._termToNewNumericId(t.graph)}`}`:dt(t);return this._ids[e]||(this._ids[this._entities[++this._id]=e]=this._id)}createBlankNode(t){let e,r;if(t)for(e=t=`_:${t}`,r=1;this._ids[e];)e=t+r++;else do e=`_:b${this._blankNodeIndex++}`;while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,this._factory.blankNode(e.substr(2))}},Mr=class Ge{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&(r=e,e=null),r=r||{},this._factory=r.factory||it,this._entityIndex=r.entityIndex||new qi({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;let r=this._graphs,i,n;for(let a in r)for(let u in i=r[a].subjects)for(let l in n=i[u])e+=Object.keys(n[l]).length;return this._size=e}_addToIndex(e,r,i,n){let a=e[r]||(e[r]={}),u=a[i]||(a[i]={}),l=n in u;return l||(u[n]=null),!l}_removeFromIndex(e,r,i,n){let a=e[r],u=a[i];delete u[n];for(let l in u)return;delete a[i];for(let l in a)return;delete e[r]}*_findInIndex(e,r,i,n,a,u,l,g){let h,_,b,v=this._entities,S=this._termFromId(v[g]),A={subject:null,predicate:null,object:null};r&&((h=e,e={})[r]=h[r]);for(let F in e)if(_=e[F]){A[a]=this._termFromId(v[F]),i&&((h=_,_={})[i]=h[i]);for(let P in _)if(b=_[P]){A[u]=this._termFromId(v[P]);let k=n?n in b?[n]:[]:Object.keys(b);for(let c=0;c<k.length;c++)A[l]=this._termFromId(v[k[c]]),yield this._factory.quad(A.subject,A.predicate,A.object,S)}}}_loop(e,r){for(let i in e)r(i)}_loopByKey0(e,r,i){let n,a;if(n=e[r])for(a in n)i(a)}_loopByKey1(e,r,i){let n,a;for(n in e)a=e[n],a[r]&&i(n)}_loopBy2Keys(e,r,i,n){let a,u,l;if((a=e[r])&&(u=a[i]))for(l in u)n(l)}_countInIndex(e,r,i,n){let a=0,u,l,g;r&&((u=e,e={})[r]=u[r]);for(let h in e)if(l=e[h]){i&&((u=l,l={})[i]=u[i]);for(let _ in l)(g=l[_])&&(n?n in g&&a++:a+=Object.keys(g).length)}return a}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){let r=Object.create(null);return i=>{i in r||(r[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,i,n){r||(n=e.graph,i=e.object,r=e.predicate,e=e.subject),n=n?this._termToNewNumericId(n):1;let a=this._graphs[n];return a||(a=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(a)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),i=this._termToNewNumericId(i),this._addToIndex(a.subjects,e,r,i)?(this._addToIndex(a.predicates,r,i,e),this._addToIndex(a.objects,i,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,i,n){return e&&e.subject&&({subject:e,predicate:r,object:i,graph:n}=e),!this.readQuads(e,r,i,n).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,i,n){r||({subject:e,predicate:r,object:i,graph:n}=e),n=n?this._termToNumericId(n):1;let a=this._graphs,u,l,g;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(i=i&&this._termToNumericId(i))||!(u=a[n])||!(l=u.subjects[e])||!(g=l[r])||!(i in g))return!1;this._removeFromIndex(u.subjects,e,r,i),this._removeFromIndex(u.predicates,r,i,e),this._removeFromIndex(u.objects,i,e,r),this._size!==null&&this._size--;for(e in u.subjects)return!0;return delete a[n],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,i,n){let a=new $i.Readable({objectMode:!0}),u=this.readQuads(e,r,i,n);return a._read=l=>{for(;--l>=0;){let{done:g,value:h}=u.next();if(g){a.push(null);return}a.push(h)}},this.remove(a)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,i,n){return[...this.readQuads(e,r,i,n)]}*readQuads(e,r,i,n){let a=this._getGraphs(n),u,l,g,h;if(!(e&&!(l=this._termToNumericId(e))||r&&!(g=this._termToNumericId(r))||i&&!(h=this._termToNumericId(i))))for(let _ in a)(u=a[_])&&(l?h?yield*this._findInIndex(u.objects,h,l,g,"object","subject","predicate",_):yield*this._findInIndex(u.subjects,l,g,null,"subject","predicate","object",_):g?yield*this._findInIndex(u.predicates,g,h,null,"predicate","object","subject",_):h?yield*this._findInIndex(u.objects,h,null,null,"object","subject","predicate",_):yield*this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",_))}match(e,r,i,n){return new vt(this,e,r,i,n,{entityIndex:this._entityIndex})}countQuads(e,r,i,n){let a=this._getGraphs(n),u=0,l,g,h,_;if(e&&!(g=this._termToNumericId(e))||r&&!(h=this._termToNumericId(r))||i&&!(_=this._termToNumericId(i)))return 0;for(let b in a)(l=a[b])&&(e?i?u+=this._countInIndex(l.objects,_,g,h):u+=this._countInIndex(l.subjects,g,h,_):r?u+=this._countInIndex(l.predicates,h,_,g):u+=this._countInIndex(l.objects,_,g,h));return u}forEach(e,r,i,n,a){this.some(u=>(e(u,this),!1),r,i,n,a)}every(e,r,i,n,a){return!this.some(u=>!e(u,this),r,i,n,a)}some(e,r,i,n,a){for(let u of this.readQuads(r,i,n,a))if(e(u))return!0;return!1}getSubjects(e,r,i){let n=[];return this.forSubjects(a=>{n.push(a)},e,r,i),n}forSubjects(e,r,i,n){let a=this._getGraphs(n),u,l,g;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||i&&!(g=this._termToNumericId(i))))for(n in a)(u=a[n])&&(l?g?this._loopBy2Keys(u.predicates,l,g,e):this._loopByKey1(u.subjects,l,e):g?this._loopByKey0(u.objects,g,e):this._loop(u.subjects,e))}getPredicates(e,r,i){let n=[];return this.forPredicates(a=>{n.push(a)},e,r,i),n}forPredicates(e,r,i,n){let a=this._getGraphs(n),u,l,g;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||i&&!(g=this._termToNumericId(i))))for(n in a)(u=a[n])&&(l?g?this._loopBy2Keys(u.objects,g,l,e):this._loopByKey0(u.subjects,l,e):g?this._loopByKey1(u.predicates,g,e):this._loop(u.predicates,e))}getObjects(e,r,i){let n=[];return this.forObjects(a=>{n.push(a)},e,r,i),n}forObjects(e,r,i,n){let a=this._getGraphs(n),u,l,g;if(e=this._uniqueEntities(e),!(r&&!(l=this._termToNumericId(r))||i&&!(g=this._termToNumericId(i))))for(n in a)(u=a[n])&&(l?g?this._loopBy2Keys(u.subjects,l,g,e):this._loopByKey1(u.objects,l,e):g?this._loopByKey0(u.predicates,g,e):this._loop(u.objects,e))}getGraphs(e,r,i){let n=[];return this.forGraphs(a=>{n.push(a)},e,r,i),n}forGraphs(e,r,i,n){for(let a in this._graphs)this.some(u=>(e(u.graph),!0),r,i,n,this._termFromId(this._entities[a]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){let i={},n=r?()=>!0:(l,g)=>{throw new Error(`${l.value} ${g}`)},a=this.getQuads(null,Ce.rdf.rest,Ce.rdf.nil,null),u=e?[...a]:[];return a.forEach(l=>{let g=[],h=!1,_,b,v=l.graph,S=l.subject;for(;S&&!h;){let A=this.getQuads(null,null,S,null),F=this.getQuads(S,null,null,null),P,k=null,c=null,w=null;for(let x=0;x<F.length&&!h;x++)P=F[x],P.graph.equals(v)?_?h=n(S,"has non-list arcs out"):P.predicate.value===Ce.rdf.first?k?h=n(S,"has multiple rdf:first arcs"):u.push(k=P):P.predicate.value===Ce.rdf.rest?c?h=n(S,"has multiple rdf:rest arcs"):u.push(c=P):A.length?h=n(S,"can't be subject and object"):(_=P,b="subject"):h=n(S,"not confined to single graph");for(let x=0;x<A.length&&!h;++x)P=A[x],_?h=n(S,"can't have coreferences"):P.predicate.value===Ce.rdf.rest?w?h=n(S,"has incoming rdf:rest arcs"):w=P:(_=P,b="object");k?g.unshift(k.object):h=n(S,"has no list head"),S=w&&w.subject}h?e=!1:_&&(i[_[b].value]=g)}),e&&this.removeQuads(u),i}addAll(e){if(e instanceof vt&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof Ge&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=Ft(this._graphs,e._graphs),this._size=null);else for(let r of e)this.add(r);return this}contains(e){if(e instanceof vt&&(e=e.filtered),e===this)return!0;if(!(e instanceof Ge)||this._entityIndex!==e._entityIndex)return e.every(h=>this.has(h));let r=this._graphs,i=e._graphs,n,a,u,l,g;for(let h in i){if(!(n=r[h]))return!1;n=n.subjects;for(let _ in a=i[h].subjects){if(!(u=n[_]))return!1;for(let b in l=a[_]){if(!(g=u[b]))return!1;for(let v in l[b])if(!(v in g))return!1}}}return!0}deleteMatches(e,r,i,n){for(let a of this.match(e,r,i,n))this.removeQuad(a);return this}difference(e){if(e&&e instanceof vt&&(e=e.filtered),e===this)return new Ge({entityIndex:this._entityIndex});if(e instanceof Ge&&e._entityIndex===this._entityIndex){let r=new Ge({entityIndex:this._entityIndex}),i=Gi(this._graphs,e._graphs);return i&&(r._graphs=i,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof vt&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){let r=new Ge({entityIndex:this._entityIndex});for(let i of this)e(i,this)&&r.add(i);return r}intersection(e){if(e instanceof vt&&(e=e.filtered),e===this){let r=new Ge({entityIndex:this._entityIndex});return r._graphs=Ft(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof Ge&&this._entityIndex===e._entityIndex){let r=new Ge({entityIndex:this._entityIndex}),i=Wi(e._graphs,this._graphs);return i&&(r._graphs=i,r._size=null),r}return this.filter(r=>e.has(r))}map(e){let r=new Ge({entityIndex:this._entityIndex});for(let i of this)r.add(e(i,this));return r}reduce(e,r){let i=this.readQuads(),n=r===void 0?i.next().value:r;for(let a of i)n=e(n,a,this);return n}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new nr().quadsToString(this)}union(e){let r=new Ge({entityIndex:this._entityIndex});return r._graphs=Ft(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function He(t,e,r=0){let i=e[r];if(i&&!(i in t))return!1;let n=!1;for(let a in i?{[i]:t[i]}:t){let u=r===2?null:He(t[a],e,r+1);u!==!1&&(n=n||Object.create(null),n[a]=u)}return n}var vt=class zi extends $i.Readable{constructor(e,r,i,n,a,u){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:i,object:n,graph:a,options:u})}get filtered(){if(!this._filtered){let{n3Store:e,graph:r,object:i,predicate:n,subject:a}=this,u=this._filtered=new Mr({factory:e._factory,entityIndex:this.options.entityIndex}),l,g,h;if(a&&!(l=u._termToNumericId(a))||n&&!(g=u._termToNumericId(n))||i&&!(h=u._termToNumericId(i)))return u;let _=e._getGraphs(r);for(let b in _){let v,S,A;!l&&g?(S=He(_[b].predicates,[g,h,l]))&&(v=He(_[b].subjects,[l,g,h]),A=He(_[b].objects,[h,l,g])):h?(A=He(_[b].objects,[h,l,g]))&&(v=He(_[b].subjects,[l,g,h]),S=He(_[b].predicates,[g,h,l])):(v=He(_[b].subjects,[l,g,h]))&&(S=He(_[b].predicates,[g,h,l]),A=He(_[b].objects,[h,l,g])),v&&(u._graphs[b]={subjects:v,predicates:S,objects:A})}u._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[Sr]&&(this[Sr]=this[Symbol.iterator]());let r=this[Sr];for(;--e>=0;){let{done:i,value:n}=r.next();if(i){this.push(null);return}this.push(n)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,i,n){return this.filtered.deleteMatches(e,r,i,n)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,i,n,a){return this.filtered.every(e,r,i,n,a)}filter(e){return this.filtered.filter(e)}forEach(e,r,i,n,a){return this.filtered.forEach(e,r,i,n,a)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,i,n,a){return this.filtered.some(e,r,i,n,a)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new nr().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,i,n){return new zi(this.filtered,e,r,i,n,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}},fs=class{dataset(t){return new Mr(t)}};function cs(t){let e=[];for(let{subject:r,object:i}of t.match(null,it.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,it.defaultGraph())){let n=[...t.match(null,null,null,r)],a=[...t.match(null,null,null,i)];e.push({premise:n,conclusion:a})}return e}var ds=class{constructor(t){this._store=t}_add(t,e,r,i,n){this._store._addToIndex(i.subjects,t,e,r)&&(this._store._addToIndex(i.predicates,e,r,t),this._store._addToIndex(i.objects,r,t,e),n())}_evaluatePremise(t,e,r,i=0){let n,a,u,l,g,[h,_,b]=t.premise[i].value,v=e[t.premise[i].content],S=!(u=h.value);for(u in S?v:{[u]:v[u]})if(l=v[u]){S&&(h.value=Number(u)),n=!(u=_.value);for(u in n?l:{[u]:l[u]})if(g=l[u]){n&&(_.value=Number(u)),a=!(u=b.value);for(u in a?g:{[u]:g[u]})a&&(b.value=Number(u)),i===t.premise.length-1?t.conclusion.forEach(A=>{this._add(A.subject.value,A.predicate.value,A.object.value,e,()=>{r(A)})}):this._evaluatePremise(t,e,r,i+1);a&&(b.value=null)}n&&(_.value=null)}S&&(h.value=null)}_evaluateRules(t,e,r){for(let i=0;i<t.length;i++)this._evaluatePremise(t[i],e,r)}_reasonGraphNaive(t,e){let r=[];function i(u){u.next&&u.next.forEach(l=>{r.push([u.subject.value,u.predicate.value,u.object.value,l])})}let n=u=>{u.forEach(l=>{this._add(l.subject.value,l.predicate.value,l.object.value,e,()=>{i(l)})})};this._evaluateRules(t,e,i);let a;for(;(a=r.pop())!==void 0;){let[u,l,g,h]=a,_=h.basePremise.subject.value;_||(h.basePremise.subject.value=u);let b=h.basePremise.predicate.value;b||(h.basePremise.predicate.value=l);let v=h.basePremise.object.value;v||(h.basePremise.object.value=g),h.premise.length===0?n(h.conclusion):this._evaluatePremise(h,e,i),_||(h.basePremise.subject.value=null),b||(h.basePremise.predicate.value=null),v||(h.basePremise.object.value=null)}}_createRule({premise:t,conclusion:e}){let r={},i=a=>a.termType==="Variable"?r[a.value]=r[a.value]||{}:{value:this._store._termToNewNumericId(a)},n=a=>({subject:i(a.subject),predicate:i(a.predicate),object:i(a.object)});return{premise:t.map(a=>n(a)),conclusion:e.map(a=>n(a)),variables:Object.values(r)}}reason(t){Array.isArray(t)||(t=cs(t)),t=t.map(r=>this._createRule(r));for(let r of t)for(let i of t)for(let n=0;n<i.premise.length;n++){let a=i.premise[n];for(let u of r.conclusion){if(xr(a.subject,u.subject)&&xr(a.predicate,u.predicate)&&xr(a.object,u.object)){let l=new Set,g=[];a.subject.value=a.subject.value||1,a.object.value=a.object.value||1,a.predicate.value=a.predicate.value||1;for(let h=0;h<i.premise.length;h++)h!==n&&g.push(yi(i.premise[h],l));(u.next=u.next||[]).push({premise:g,conclusion:i.conclusion,basePremise:a})}i.variables.forEach(l=>{l.value=null})}}for(let r of t){let i=new Set;r.premise=r.premise.map(n=>yi(n,i))}let e=this._store._getGraphs();for(let r in e)this._reasonGraphNaive(t,e[r]);this._store._size=null}};function yi({subject:t,predicate:e,object:r},i){let n=t.value||i.has(t)||(i.add(t),!1),a=e.value||i.has(e)||(i.add(e),!1),u=r.value||i.has(r)||(i.add(r),!1);return!n&&a?{content:"predicates",value:[e,r,t]}:u?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function xr(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}var hs=Wt(Lr()),ps=class extends hs.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;let e=new Br(t),r,i,n={onQuad:(a,u)=>{a&&this.emit("error",a)||u&&this.push(u)},onPrefix:(a,u)=>{this.emit("prefix",a,u)}};t&&t.comments&&(n.onComment=a=>{this.emit("comment",a)}),e.parse({on:(a,u)=>{switch(a){case"data":r=u;break;case"end":i=u;break}}},n),this._transform=(a,u,l)=>{r(a),l()},this._flush=a=>{i(),a()}}import(t){return t.on("data",e=>{this.write(e)}),t.on("end",()=>{this.end()}),t.on("error",e=>{this.emit("error",e)}),this}},_s=Wt(Lr()),bs=class extends _s.Transform{constructor(t){super({encoding:"utf8",writableObjectMode:!0});let e=this._writer=new nr({write:(r,i,n)=>{this.push(r),n&&n()},end:r=>{this.push(null),r&&r()}},t);this._transform=(r,i,n)=>{e.addQuad(r,n)},this._flush=r=>{e.end(r)}}import(t){return t.on("data",e=>{this.write(e)}),t.on("end",()=>{this.end()}),t.on("error",e=>{this.emit("error",e)}),t.on("prefix",(e,r)=>{this._writer.addPrefix(e,r)}),this}},Tr={Lexer:Ii,Parser:Br,Writer:nr,Store:Mr,StoreFactory:fs,EntityIndex:qi,StreamParser:ps,StreamWriter:bs,Util:Fi,Reasoner:ds,DataFactory:it,Term:Qe,NamedNode:Or,Literal:Dt,BlankNode:Ni,Variable:Pi,DefaultGraph:ki,Quad:Xt,Triple:Xt,termFromId:St,termToId:dt},ys=(t,e,r)=>{let i=new Tr.Parser({blankNodePrefix:"",format:r}),n=Object.create(null);return{quads:i.parse(t,null,(u,l)=>{n[u]=l.id}),prefixes:n}},gs=t=>new Promise((e,r)=>{let i=new Tr.Writer({format:t.type,prefixes:{...t.prefixes}}),n=t.context.prefixes.rdf,a=t.prefixes.xsd,{quad:u,namedNode:l,literal:g,blankNode:h}=Tr.DataFactory,_=(c,w)=>{let x=w.a;if(Array.isArray(x)||(x=[x]),x?.length)for(let R of x)R=t.fullURI(R),i.addQuad(u(l(c),l(Ai),l(R)))},b=(c,w)=>{if(!w)return;let x=v(w);for(let R of x){Array.isArray(R.object)||(R.object=[R.object]);for(let T of R.object)i.addQuad(u(l(c),R.predicate,T))}},v=c=>{let w=[];return Object.entries(c).forEach(x=>{let R=x[0],T=x[1],L=t.fullURI(R),G={predicate:l(L)};T instanceof Rr?G.object=F(T):Array.isArray(T)?G.object=k(T):T instanceof Er?G.object=l(T.id):T instanceof Zt?G.object=P(T):A(T)?G.object=S(T):console.log("weird object",T,id,R),w.push(G)}),w},S=c=>{let w=t.getType(c)||null;if(w)w==a+t.context.separator+"string"||w==a+t.context.separator+"number"?w=null:w=t.fullURI(w),w=l(w);else{let x=c?.language;x&&(w=x)}return c instanceof String?c=""+c:c instanceof Number&&(c=+c),g(c,w)},A=c=>c instanceof String||c instanceof Number||typeof c=="boolean"||typeof c=="string"||typeof c=="number",F=c=>{let w=[];for(let x of c)A(x)?w.push(S(x)):x.id?w.push(l(x.id)):w.push(P(x));return i.list(w)},P=c=>i.blank(v(c)),k=(c,w)=>{let x=[];for(let R of w)A(R)?x.push(S(R)):R instanceof Er?x.push(l(R.id)):R instanceof Zt?x.push(P(R)):R instanceof Rr&&x.push(F(R));return x};Object.entries(t.subjects).forEach(([c,w])=>{c=t.shortURI(c,":"),_(c,w),b(c,w)}),i.end((c,w)=>{w?e(w):r(c)})}),pt=Gn;pt.n3Parser=ys;pt.n3Writer=gs;window.oldm=pt;function Ve(t){return[String,Boolean,Number,BigInt].includes(t?.constructor)}function Hi(t,e="last"){return(r,i,n)=>{let a=t(r,i,n);return Array.isArray(a)&&(e=="last"?a=a.pop():e=="first"?a=a.shift():typeof e=="function"&&(a=e(a))),a}}function Cr(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,i]of Object.entries(t))i instanceof Function?e.push(n=>({[r]:i(n,r,"select")})):Ve(i)?e.push(n=>({[r]:i})):e.push(n=>({[r]:Rt(n[r]).select(i)}));return e.length==1?e[0]:r=>{let i={};for(let n of e)Object.assign(i,n(r));return i}}function Dr(t){let e=[];if(Array.isArray(t))e.push(Ss(...t));else if(t instanceof RegExp)e.push(r=>t.test(r));else if(t instanceof Function)e.push(r=>t(r));else if(Ve(t))e.push(r=>Array.isArray(r)?r.filter(i=>t==i).length>0:t==r);else{let r={};for(let[n,a]of Object.entries(t))r[n]=Dr(a);let i=n=>{if(Array.isArray(n))return n.filter(a=>i(a)).length>0;if(Ve(n))return!1;for(let a in r){let u=r[a];if(!u(n?.[a]))return!1}return!0};e.push(i)}return e.length==1?e[0]:r=>{let i={};for(let n of e)if(!n(r))return!1;return!0}}var ms=Symbol("asc"),ws=Symbol("desc");function Qi(t){let e=Object.entries(t),r=[];for(let[i,n]of e)if(n instanceof Function)r.push(n);else if(n===ms)r.push((a,u)=>a[i]>u[i]?1:a[i]<u[i]?-1:0);else if(n===ws)r.push((a,u)=>a[i]<u[i]?1:a[i]>u[i]?-1:0);else{if(Ve(n))throw new Error("Unknown sort order",n);{let a=Qi(n);r.push((u,l)=>a(u[i],l[i]))}}return r.length==1?r[0]:(i,n)=>{for(let a of r){let u=a(i,n);if(u!==0)return u}return 0}}function Vi(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,i]of Object.entries(t))i instanceof Function?e.push((n,a,u,l)=>(Ve(n)&&(n={}),a.reduce?n[r]=a.reduce(i,n[r]||[]):n[r]=i(n[r]||[],a,u,l),n)):Ve(i)?e.push((n,a)=>(Ve(n)&&(n={}),n[r]=i,n)):e.push((n,a)=>(Ve(n)&&(n={}),n[r]=Rt(a[r]).reduce(i,[]),n));return e.length==1?e[0]:(r,i,n,a)=>{let u={};for(let l of e)Object.assign(u,l(r,i,n,a));return u}}function vs(t,e){let r={};for(let i of t){let n=e(i);Array.isArray(n)||(n=[n]);for(let a of n){if(typeof a!="string"&&!(a instanceof String)){console.warn("JAQT: groupBy(selector) can only handle string values, got:",a);continue}r[a]||(r[a]=[]),r[a].push(i)}}return r}function Ki(t,e){let r=e.shift(),i=vs(t,r);if(e.length)for(let n in i)i[n]=Ki(i[n],e);return i}function Ss(...t){let e=t.map(r=>Dr(r));return r=>e.some(i=>i(r))}var Ji={apply(t,e,r){let i=t.apply(e,r);return typeof i=="object"?new Proxy(i,Xe):i}},Xe={get(t,e){if(typeof e=="symbol")return t[e];if(Array.isArray(t))switch(e){case"where":return function(r){let i=Dr(r);return new Proxy(t.filter(n=>i(n)),Xe)};case"select":return function(r){let i=Cr(r);return new Proxy(t.map(i),Xe)};case"reduce":return function(r,i=[]){let n=Vi(r),a=t.reduce(n,i);return Array.isArray(a)?new Proxy(a,Xe):Ve(a)?a:new Proxy(a,qt)};case"orderBy":return function(r){let i=Qi(r);return new Proxy(t.toSorted(i),Xe)};case"groupBy":return function(...r){let i=Ki(t,r);return new Proxy(i,qt)}}return t&&typeof t=="object"&&e==="select"?function(r){let i=Cr(r);return new Proxy(i(t),Xe)}:t&&typeof t[e]=="function"?new Proxy(t[e],Ji):t[e]}},qt={get(t,e){switch(e){case"select":return function(r){let i=Cr(r),n={};for(let a in t)Array.isArray(t[a])?n[a]=new Proxy(t[a].map(i),Xe):n[a]=new Proxy(t[a],qt);return n};case"reduce":return function(r,i=[]){let n=Vi(r),a={};for(let u in t)if(Array.isArray(t[u])){let l=t[u].reduce(n,i);Array.isArray(l)?a[u]=new Proxy(l,Xe):Ve(l)?a[u]=l:a[u]=new Proxy(l,qt)}else a[u]=new Proxy(t[u],qt);return a};default:return Array.isArray(t[e])?Rt(t[e]):t[e]}}},sr={get(t,e){switch(e){case"where":return function(){return new Proxy([],sr)};case"reduce":case"select":return function(){return null};case"orderBy":return function(){return new Proxy([],sr)};case"groupBy":return function(){return new Proxy([],sr)}}return t&&typeof t[e]=="function"?new Proxy(t[e],Ji):null}};function Rt(t){return!t||typeof t!="object"?new Proxy([],sr):new Proxy(t,Xe)}function Fr(t){return(e,r)=>{if(t?.length>0){let i=t.slice(),n;for(;n=i.shift();){if(Array.isArray(e)&&parseInt(n)!=n)return i.unshift(n),e.map(Fr(i));e=e?.[n]}return e}else return r?e[r]:e}}var Yi=t=>(t||(t=[]),{get(e,r){if(r=="constructor"||typeof r=="symbol")return e[r];let i=t.concat([r]);return new Proxy(Fr(i),Yi(i))},apply(e,r,i){let n=e(...i);return Array.isArray(n)&&(n=n.flat(1/0)),n}}),Ur=new Proxy(Fr(),Yi());var Ee=class t{#e;constructor(e){this.#e=t.collapse(e)}get value(){return this.#e}toString(){return this.#e}get length(){return this.#e.length}static collapse(e,r=""){if(e instanceof t)return e.value;if(typeof e!="string")throw new TypeError("path argument must be a string or an instance of Path");if(r&&!(r instanceof t)&&(r=new t(r)),e=e.trim(),e.length===0)return r.value;t.isRelative(e)&&(e=r+e);let i=t.reduce(e,(a,u)=>(u==".."?a.pop():u!=="."&&a.push(u),a),[]),n="/";return i.length&&(n+=i.join("/"),t.isFolder(e)&&(n+="/")),n}static isAbsolute(e){return e instanceof t?!0:e.length&&e[0]==="/"}static isRelative(e){return!t.isAbsolute(e)}static isFolder(e){return e instanceof t&&(e=e.value),e.length&&e[e.length-1]=="/"}static isPath(e){return e instanceof t?!0:typeof e!="string"?!1:(e=e.trim(),new URL(e,document.location).pathname==e)}static reduce(e,r,i){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).reduce(r,i)}static map(e,r){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).map(r)}static parent(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.pop();let r="/";return e.length&&(r+=e.join("/")+"/"),r}static filename(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).pop()}static head(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).shift()}static tail(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.shift();let r="/";return e.length&&(r+=e.join("/")+"/"),r}};var zt=class t{#e;#t="/";constructor(e){this.#e=e,this.#t=this.#e.path}get path(){return this.#t}cd(e){return e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),new t(this.#e.cd(e))}async read(e,r=null){if(e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),typeof r=="function"){if(!this.#e.supportsStreamingRead())throw new Error("Adapter "+this.#e.name+" does not support streaming reading.");return this.#e.readStream(e,r)}else return this.#e.read(e)}async write(e,r,i=null){if(e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),!this.#e.supportsWrite())throw new Error("Adapter "+this.#e.name+" is read only.");if(typeof r=="function"){if(!this.#e.supportsStreamingWrite())throw new Error("Adapter "+this.#e.name+" does not support streaming writing.");return this.#e.writeStream(e,r,i)}else{if(typeof r=="string")return this.#e.write(e,r,i);throw new TypeError("Cannot write contents of type "+typeof r)}}async delete(e){return e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),this.#e.delete(e)}async exists(e){return e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),this.#e.exists(e)}async list(e=""){return e instanceof Ee||(e=new Ee(Ee.collapse(e,this.#t))),this.#e.list(e)}};var Ht=class t{#e;#t;#r;#n;constructor(e,r="/",i=null,n={}){this.#e=new URL(e,window.location.href),this.#t=new Ee(r),this.#r=i,this.#n=n}get name(){return"HttpAdapter"}get path(){return this.#t}supportsWrite(){return!0}supportsStreamingWrite(){return xs}supportsStreamingRead(){return!0}cd(e){if(!Ee.isPath(e))throw new TypeError(e+" is not a valid path");return new t(this.#e.href,e)}async write(e,r,i=null){let n=Object.assign({},this.#n,{method:"PUT",body:r});return this.#s(e,n)}writeStream(e,r,i=null){throw new Error("Not yet implemented")}async read(e){let r=Object.assign({},this.#n,{method:"GET"}),i=await this.#s(e,r),n={type:this.#o(i),name:Ee.filename(e),http:{headers:i.headers,status:i.status,url:i.url}};return n.type.match(/text\/.*/)?n.contents=await i.text():n.type.match(/application\/json.*/)?n.contents=await i.json():n.contents=await i.blob(),n}readStream(e,r){throw new Error("Not yet implemented")}async exists(e){let r=Object.assign({},this.#n,{method:"HEAD"});return this.#s(e,r)}async delete(e){let r=Object.assign({},this.#n,{method:"DELETE"});return this.#s(e,r)}async list(e){let r=["text/html","text/xhtml","text/xhtml+xml","text/xml"],i=await this.read(e);if(r.includes(i.type.split(";")[0]))var n=i.contents;else{let h=this.#i(e);throw new TypeError("URL "+h+" is not of a supported content type",{cause:i})}let a=Ee.collapse(this.#e.pathname),u=this.#i(e),l=document.createElement("template");l.innerHTML=n;let g=l.content.querySelectorAll("a[href]");return Array.from(g).map(h=>{let _=new URL(h.getAttribute("href"),u.href);return h.href=_.href,{filename:Ee.filename(h.pathname),path:h.pathname,name:h.innerText,href:h.href}}).filter(h=>{let _=new URL(h.href);return _.pathname=Ee.parent(_.pathname),_.href===u.href}).map(h=>({filename:h.filename,path:h.path.substring(a.length-1),name:h.name}))}#i(e){return e=Ee.collapse(this.#e.pathname+Ee.collapse(e)),new URL(e,this.#e)}async#s(e,r){return fetch(this.#i(e),r).catch(i=>{if(!this.#r||!this.#r(url,r,i))throw i})}#o(e){return e.headers.has("Content-Type")?e.headers.get("Content-Type"):null}},xs=(async()=>new Request("",{body:new ReadableStream,method:"POST",duplex:"half"}).headers.has("Content-Type")?!1:fetch("data:a/a;charset=utf-8,",{method:"POST",body:new ReadableStream,duplex:"half"}).then(()=>!0,()=>!1))();var Zi={fs:zt,adapters:{https:Ht},path:Ee};window.jsfs=Zi;var At=Zi;var $r=class{#e;options;constructor(e){let r={oidc:{client_info:{client_id:Le(window.location).authority}}};this.options=Object.assign({},r,e),this.#e=et(e).with(wr(e.oidc))}login(e,r=!1){let i=new Wr(this.#e,e,this.options);return i.login(r),i}},na=$r;function Es(t,e){return async(r,i)=>{r.data&&r.data.write&&(r=r.with({headers:{"Content-Type":r.data.type},body:await r.data.write()}));let n=await i(r);if(n.ok&&!n.data){let a=await e.parse(await n.text(),n.url);n=n.with({body:a})}return n}}var Wr=class{#e;#t;context;profile;constructor(e,r,i){this.#t=i,this.context=pt.context({prefixes:i.prefixes,parser:pt.n3Parser,writer:pt.n3Writer}),this.#e=e.with(Es(i.prefixes,this.context))}async login(e=!1){if((!this.profile||!this.oidcIssuer)&&(this.profile=await client.get(webId)?.data,this.oidcIssuer=this.profile.primary.solid$oidcIssuer,options.openid_configuration.issuer=oidcIssuer),!e&&this.isAuthorized())return;let r=options.force_authorization;options.oauth2_configuration.force_authorization=!0;let i={};if(e){for(let n of["max_age","prompt"])i[n]=options.oauth2_configuration[n];options.oauth2_configuration.max_age=0,options.oauth2_configuration.prompt="login"}await client.get(webId),options.force_authorization=r;for(let n in i)options.oauth2_configuration[n]=i[n]}async logout(){if(options.openid_configuration.end_session_endpoint){let e=await this.#e.get(options.openid_configuration.end_session_endpoint,{id_token_hint:options.tokens.get("id_token"),client_id:options.client_info.client_id,post_logout_redirect_url:options.client_info.post_logout_redirect_urls[0]})}options.oauth2_configuration.tokens.clear(),options.openid_configuration.store.clear()}isAuthorized(){return si(this.#t.oauth2_configuration.tokens)}isAuthenticated(){return this.#t.openid_configuration.store.get("id_token")}pod(e=null,r){if(e||(e=Rt(this.profile).select(Hi(Ur.pim$storage))),!e)throw new Error("No pim:storage found in users profile");return At.fs(new Gr(this.#e,r,e))}get(){return this.#e.get.apply(this.#e,arguments)}post(){return this.#e.post.apply(this.#e,arguments)}put(){return this.#e.put.apply(this.#e,arguments)}patch(){return this.#e.patch.apply(this.#e,arguments)}delete(){return this.#e.delete.apply(this.#e,arguments)}},Gr=class t{#e;#t;#r;#n;constructor(e,r,i,n="/"){this.#e=e,this.#t=i,this.#r=n,this.#n=r}get name(){return"Solid Pod"}get path(){return this.#r}supportsWrite(){return!0}supportsStreamingWrite(){return!1}supportsStreadmingRead(){return!1}cd(e){return e=this.#i(e),e==this.#r?this:new t(this.#e,this.#t,e)}async write(e,r,i=null){}writeStream(e,r,i=null){throw new Error("Not implemented")}async read(e){e=this.#i(e);let r=await this.#e.get(Le(this.#t,e));return{type:r.headers.get("Content-Type"),name:At.Path.filename(e),http:{headers:r.headers,status:r.status,url:r.url},contents:r.data}}readStream(e,r){throw new Error("Not implemented")}async exists(e){e=this.#i(e),this.#e.head(Le(this.#t,e))}async delete(e){e=this.#i(e),this.#e.delete(Le(this.#t,e))}async list(e=null){e=this.#i(e);let r=await this.read(e);return Rt(r.contents).where({a:Ur.ldp$Resource}).select({filename:i=>At.Path.filename(Le(i.id)),path:i=>Le(i.id).pathname,name:i=>At.Path.filename(Le(i.id))})}#i(e){if(e||(e=this.#r),!At.Path.isPath(e))throw new TypeError(e+" is not a valid path");return e}};})();
/*! Bundled license information:

@muze-nl/oldm/dist/oldm.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  
  queue-microtask/index.js:
    (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  safe-buffer/index.js:
    (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  *)
*/
//# sourceMappingURL=browser.min.js.map
